!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?module.exports=i():"function"==typeof define&&define.amd?define(i):(t=t||self).rextabs=i()}(this,function(){"use strict";function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function w(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function n(t,i){for(var e=0;e<i.length;e++){var n=i[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function t(t,i,e){return i&&n(t.prototype,i),e&&n(t,e),t}function i(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),i&&e(t,i)}function B(t){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function e(t,i){return(e=Object.setPrototypeOf||function(t,i){return t.__proto__=i,t})(t,i)}function z(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function T(t,i){return!i||"object"!=typeof i&&"function"!=typeof i?z(t):i}function s(t,i){for(;!Object.prototype.hasOwnProperty.call(t,i)&&null!==(t=B(t)););return t}function u(t,i,e){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,i,e){var n=s(t,i);if(n){var r=Object.getOwnPropertyDescriptor(n,i);return r.get?r.get.call(e):r.value}})(t,i,e||t)}function o(t,i,e,n){return(o="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(t,i,e,n){var r,o=s(t,i);if(o){if((r=Object.getOwnPropertyDescriptor(o,i)).set)return r.set.call(n,e),!0;if(!r.writable)return!1}if(r=Object.getOwnPropertyDescriptor(n,i)){if(!r.writable)return!1;r.value=e,Object.defineProperty(n,i,r)}else!function(t,i,e){i in t?Object.defineProperty(t,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[i]=e}(n,i,e);return!0})(t,i,e,n)}function r(t,i,e,n,r){if(!o(t,i,e,n||t)&&r)throw new Error("failed to set property");return e}function h(t){return function(t){if(Array.isArray(t)){for(var i=0,e=new Array(t.length);i<t.length;i++)e[i]=t[i];return e}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function a(t,i){return t===i?1:t/i}var c={add:function(t){return Array.isArray(t)?this.addMultiple(t):this._add(t),this},addMultiple:function(t){return t.forEach(this._add,this),this},_add:function(t){return this.children.add(t),this.resetChildState(t).updateChildVisible(t).updateChildActive(t).updateChildScrollFactor(t).updateChildMask(t),this}},d=Phaser.Math.RotateAround,p={worldToLocal:function(t){return t.x-=this.x,t.y-=this.y,d(t,0,0,-this.rotation),t.x/=this.scaleX,t.y/=this.scaleY,t.x*=this.flipX?-1:1,t.y*=this.flipY?-1:1,t},localToWorld:function(t){return t.x*=this.flipX?-1:1,t.y*=this.flipY?-1:1,t.x*=this.scaleX,t.y*=this.scaleY,d(t,0,0,this.rotation),t.x+=this.x,t.y+=this.y,t}},f={updateChildPosition:function(t){t.isRexContainerLite&&(t.syncChildrenEnable=!1);var i=this.getLocalState(t);return t.x=i.x,t.y=i.y,this.localToWorld(t),t.scaleX=i.scaleX*this.scaleX,t.scaleY=i.scaleY*this.scaleY,void 0!==t.flipX&&(t.flipX=this.flipX?!i.flipX:i.flipX,t.flipY=this.flipY?!i.flipY:i.flipY),t.rotation=i.rotation+this.rotation,t.isRexContainerLite&&(t.syncChildrenEnable=!0,t.syncPosition()),this},syncPosition:function(){return this.children&&this.syncChildrenEnable&&this.children.getChildren().forEach(this.updateChildPosition,this),this},resetChildPositionState:function(t){var i=this.getLocalState(t);return i.x=t.x,i.y=t.y,this.worldToLocal(i),i.scaleX=a(t.scaleX,this.scaleX),i.scaleY=a(t.scaleY,this.scaleY),void 0!==t.flipX&&(i.flipX=t.flipX,i.flipY=t.flipY),i.rotation=t.rotation-this.rotation,this},setChildPosition:function(t,i,e){return t.x=i,t.y=e,this.resetChildPositionState(t),this},setChildLocalPosition:function(t,i,e){var n=this.getLocalState(t);return n.x=i,n.y=e,this.updateChildPosition(t),this}},v={updateChildVisible:function(t){return t.visible=this.visible&&this.getLocalState(t).visible,this},syncVisible:function(){return this.children&&this.syncChildrenEnable&&this.children.getChildren().forEach(this.updateChildVisible,this),this},resetChildVisibleState:function(t){return this.getLocalState(t).visible=t.visible,this},setChildVisible:function(t,i){return t.visible=i,this.resetChildVisibleState(t),this},setChildLocalVisible:function(t,i){return void 0===i&&(i=!0),this.getLocalState(t).visible=i,this.updateChildVisible(t),this}},g={updateChildAlpha:function(t){return t.alpha=this.alpha*this.getLocalState(t).alpha,this},syncAlpha:function(){return this.children&&this.syncChildrenEnable&&this.children.getChildren().forEach(this.updateChildAlpha,this),this},resetChildAlphaState:function(t){return this.getLocalState(t).alpha=a(t.alpha,this.alpha),this},setChildAlpha:function(t,i){return t.alpha=i,this.resetChildAlphaState(t),this._add},setChildLocalAlpha:function(t,i){return this.getLocalState(t).alpha=i,this.updateChildAlpha(t),this}},y={updateChildActive:function(t){return t.active=this.active&&this.getLocalState(t).active,this},syncActive:function(){return this.children&&this.syncChildrenEnable&&this.children.getChildren().forEach(this.updateChildActive,this),this},resetChildActiveState:function(t){return this.getLocalState(t).active=t.active,this},setChildActive:function(t,i){return t.active=i,this.resetChildActiveState(t),this},setChildLocalActive:function(t,i){return void 0===i&&(i=!0),this.getLocalState(t).active=i,this.updateChildActive(t),this}},m={updateChildMask:function(t){return null==this.mask||(this.mask.hasOwnProperty("geometryMask")?this.mask.geometryMask:this.mask.bitmapMask)!==t&&(t.mask=this.mask),this},syncMask:function(){return this.children&&this.syncChildrenEnable&&this.children.getChildren().forEach(this.updateChildMask,this),this},setMask:function(t){return this.mask=t,this},clearMask:function(t){return void 0===t&&(t=!1),t&&this.mask&&this.mask.destroy(),this.mask=null,this}},b=Phaser.Utils.Array,C={getChildren:function(){return this.children.getChildren()},getAllChildren:function(t){void 0===t&&(t=[]);for(var i,e=this.children.getChildren(),n=0,r=e.length;n<r;n++){var o;if(i=e[n],t.push(i),i.hasOwnProperty("isRexContainerLite"))(o=t).push.apply(o,h(i.getAllChildren()))}return t},contains:function(t){if(this.children.contains(t))return!0;for(var i,e=this.children.getChildren(),n=0,r=e.length;n<r;n++)if((i=e[n]).isRexContainerLite&&i.contains(t))return!0;return!1},getByName:function(t){return b.GetFirst(this.list,"name",t)},getRandom:function(t,i){return b.GetRandom(this.list,t,i)},getFirst:function(t,i,e,n){return b.GetFirstElement(this.list,t,i,e,n)},getAll:function(t,i,e,n){return b.GetAll(this.list,t,i,e,n)},count:function(t,i,e,n){return b.CountAllMatching(this.list,t,i,e,n)},swap:function(t,i){return b.Swap(this.list,t,i),this},moveTo:function(t,i){return b.MoveTo(this.list,t,i),this},setAll:function(t,i,e,n){return b.SetAll(this.list,t,i,e,n),this}},S=Phaser.GameObjects.Zone,k=Phaser.GameObjects.Components,E=function(){function h(t,i,e,n,r,o){var s;return w(this,h),Array.isArray(n)&&(o=n,n=void 0),void 0===n&&(n=1),void 0===r&&(r=1),(s=T(this,B(h).call(this,t,i,e,n,r))).children=t.add.group(),s.type="rexContainerLite",s.isRexContainerLite=!0,s.syncChildrenEnable=!0,s._flipX=!1,s._flipY=!1,s._alpha=1,s._active=!0,s._mask=null,s._scrollFactorX=1,s._scrollFactorY=1,o&&s.add(o),s}return i(h,S),t(h,[{key:"destroy",value:function(t){this.scene&&(this.children.destroy(!t),this.children=void 0,u(B(h.prototype),"destroy",this).call(this,t))}},{key:"resize",value:function(t,i){return this.setSize(t,i),this}},{key:"x",get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.syncPosition())}},{key:"y",get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.syncPosition())}},{key:"rotation",get:function(){return u(B(h.prototype),"rotation",this)},set:function(t){this.rotation!==t&&(r(B(h.prototype),"rotation",t,this,!0),this.syncPosition())}},{key:"scaleX",get:function(){return u(B(h.prototype),"scaleX",this)},set:function(t){this.scaleX!==t&&(r(B(h.prototype),"scaleX",t,this,!0),this.syncPosition())}},{key:"scaleY",get:function(){return u(B(h.prototype),"scaleY",this)},set:function(t){this.scaleY!==t&&(r(B(h.prototype),"scaleY",t,this,!0),this.syncPosition())}},{key:"flipX",get:function(){return this._flipX},set:function(t){this._flipX!==t&&(this._flipX=t,this.syncPosition())}},{key:"flipY",get:function(){return this._flipY},set:function(t){this._flipY!==t&&(this._flipY=t,this.syncPosition())}},{key:"visible",get:function(){return u(B(h.prototype),"visible",this)},set:function(t){this.visible!==t&&(r(B(h.prototype),"visible",t,this,!0),this.syncVisible())}},{key:"alpha",get:function(){return this._alpha},set:function(t){this._alpha!==t&&(this._alpha=t,this.syncAlpha())}},{key:"active",get:function(){return this._active},set:function(t){this._active!==t&&(this._active=t,this.syncActive())}},{key:"mask",get:function(){return this._mask},set:function(t){this._mask!==t&&(this._mask=t,this.syncMask())}},{key:"scrollFactorX",get:function(){return this._scrollFactorX},set:function(t){this._scrollFactorX!==t&&(this._scrollFactorX=t,this.syncScrollFactor())}},{key:"scrollFactorY",get:function(){return this._scrollFactorY},set:function(t){this._scrollFactorY!==t&&(this._scrollFactorY=t,this.syncScrollFactor())}},{key:"list",get:function(){return this.children.getChildren()}}]),h}();Object.assign(E.prototype,c,{remove:function(t,i){return this.children.remove(t,!1,i),this},clear:function(t){return this.children.clear(!1,t),this}},{getLocalState:function(t){return t.hasOwnProperty("rexContainer")||(t.rexContainer={}),t.rexContainer},resetChildState:function(t){return this.resetChildPositionState(t).resetChildVisibleState(t).resetChildAlphaState(t).resetChildActiveState(t),this},resetChildrenState:function(t){for(var i=0,e=t.length;i<e;i++)this.resetChildState(t[i]);return this},syncProperties:function(){return this.syncPosition().syncVisible().syncAlpha().syncActive().syncScrollFactor().syncMask(),this}},p,f,v,g,{updateChildScrollFactor:function(t){return t.setScrollFactor(this.scrollFactorX,this.scrollFactorY),this},syncScrollFactor:function(){return this.children&&this.syncChildrenEnable&&this.children.getChildren().forEach(this.updateChildScrollFactor,this),this}},y,m,{setDepth:function(t){if(this.depth=t,this.children)for(var i=this.getAllChildren(),e=0,n=i.length;e<n;e++)i[e].depth=t;return this},swapDepth:function(t){var i=this.depth,e=t.depth;return this.setDepth(e),t.setDepth(i),this},incDepth:function(t){if(this.depth+=t,this.children)for(var i=this.getAllChildren(),e=0,n=i.length;e<n;e++)i[e].depth+=t;return this}},C,k.Alpha,k.Flip);function O(t){return t.hasOwnProperty("rexSizer")||(t.rexSizer={}),t.rexSizer}function x(){}var P,_=Phaser.Display.Align,M={center:_.CENTER,left:_.LEFT_CENTER,right:_.RIGHT_CENTER,top:_.TOP_CENTER,bottom:_.BOTTOM_CENTER,"left-top":_.TOP_LEFT,"left-center":_.LEFT_CENTER,"left-bottom":_.BOTTOM_LEFT,"center-top":_.TOP_CENTER,"center-center":_.CENTER,"center-bottom":_.BOTTOM_CENTER,"right-top":_.TOP_RIGHT,"right-center":_.RIGHT_CENTER,"right-bottom":_.BOTTOM_RIGHT},j=new Phaser.GameObjects.Zone({sys:{queueDepthSort:x,events:{once:x}}},0,0,1,1);j.setOrigin(0);function R(t,i,e,n){return void 0===e&&(e=0),void 0===n&&(n=0),U(t,D(i)+e),V(t,I(i)+n),t}function A(t,i,e,n){return void 0===e&&(e=0),void 0===n&&(n=0),Z(t,J(i)-e),V(t,I(i)+n),t}function L(t,i,e,n){return void 0===e&&(e=0),void 0===n&&(n=0),K(t,q(i)+e),V(t,I(i)+n),t}function H(t,i,e,n){return void 0===e&&(e=0),void 0===n&&(n=0),$(t,D(i)+e,tt(i)+n),t}function X(t,i,e,n){return void 0===e&&(e=0),void 0===n&&(n=0),Z(t,J(i)-e),Q(t,tt(i)+n),t}function Y(t,i,e,n){return void 0===e&&(e=0),void 0===n&&(n=0),K(t,q(i)+e),Q(t,tt(i)+n),t}function F(t,i,e,n){return void 0===e&&(e=0),void 0===n&&(n=0),U(t,D(i)+e),et(t,it(i)-n),t}function W(t,i,e,n){return void 0===e&&(e=0),void 0===n&&(n=0),Z(t,J(i)-e),et(t,it(i)-n),t}function N(t,i,e,n){return void 0===e&&(e=0),void 0===n&&(n=0),K(t,q(i)+e),et(t,it(i)-n),t}var G={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12},I=function(t){return t.y+t.displayHeight-t.displayHeight*t.originY},D=function(t){return t.x-t.displayWidth*t.originX+.5*t.displayWidth},V=function(t,i){return t.y=i-t.displayHeight+t.displayHeight*t.originY,t},U=function(t,i){var e=t.displayWidth*t.originX;return t.x=i+e-.5*t.displayWidth,t},J=function(t){return t.x-t.displayWidth*t.originX},Z=function(t,i){return t.x=i+t.displayWidth*t.originX,t},q=function(t){return t.x+t.displayWidth-t.displayWidth*t.originX},K=function(t,i){return t.x=i-t.displayWidth+t.displayWidth*t.originX,t},Q=function(t,i){var e=t.displayHeight*t.originY;return t.y=i+e-.5*t.displayHeight,t},$=function(t,i,e){return U(t,i),Q(t,e)},tt=function(t){return t.y-t.displayHeight*t.originY+.5*t.displayHeight},it=function(t){return t.y-t.displayHeight*t.originY},et=function(t,i){return t.y=i+t.displayHeight*t.originY,t},nt=[];nt[G.BOTTOM_CENTER]=R,nt[G.BOTTOM_LEFT]=A,nt[G.BOTTOM_RIGHT]=L,nt[G.CENTER]=H,nt[G.LEFT_CENTER]=X,nt[G.RIGHT_CENTER]=Y,nt[G.TOP_CENTER]=F,nt[G.TOP_LEFT]=W,nt[G.TOP_RIGHT]=N;function rt(t,i){return void 0===this.childrenMap&&(this.childrenMap={}),this.childrenMap[t]=i,this}function ot(t){return t instanceof mt}function st(t){return ot(t)?t:t.scene&&ot(t.scene)?t.scene:t.parent&&t.parent.scene&&ot(t.parent.scene)?t.parent.scene:void 0}var ht=function(t,i,e,n,r){return nt[e](t,i,n,r)},at=Phaser.Utils.Objects.GetValue,lt=function(t,i,e){return t.add.text(0,0,"")},ut=new Phaser.Geom.Rectangle,ct=function t(i,e){var n;for(var r in void 0===e&&(e=[]),i)void 0!==(n=i[r]).name?e.push(n):t(n,e);return e},dt=/(\S+)\[(\d+)\]/i,pt=[],ft=Phaser.Geom.Rectangle,vt=Phaser.Geom.Rectangle,gt=function(){function e(t,i){w(this,e),this.gameObject=t,this.viewport=new vt,this.resetFromJSON(i),this.boot()}return t(e,[{key:"resetFromJSON",value:function(t){var i,e,n,r,o,s,h,a;return void 0!==t.x?(i=null,e=t.x):void 0!==t.left?(i=0,e=t.left):void 0!==t.right?(i=1,e=t.right):void 0!==t.centerX&&(i=.5,e=t.centerX),void 0!==t.y?(n=null,r=t.y):void 0!==t.top?(n=0,r=t.top):void 0!==t.bottom?(n=1,r=t.bottom):void 0!==t.centerY&&(n=.5,r=t.centerY),void 0!==e&&(e=e.replace("left","0%").replace("right","100%").replace("center","50%").split("%"),o=parseFloat(e[0])/100,s=""===e[1]?0:parseFloat(e[1])),void 0!==r&&(r=r.replace("top","0%").replace("bottom","100%").replace("center","50%").split("%"),h=parseFloat(r[0])/100,a=""===r[1]?0:parseFloat(r[1])),this.setAlign(i,n),this.setPercentage(o,h),this.setOffset(s,a),this}},{key:"boot",value:function(){this.scaleManamger.on("resize",this.anchor,this),this.gameObject.once("destroy",this.destroy,this),this.anchor()}},{key:"shutdown",value:function(){this.scaleManamger.off("resize",this.anchor,this),this.gameObject=void 0}},{key:"destroy",value:function(){this.shutdown()}},{key:"setAlign",value:function(t,i){return this.alignX=t,this.alignY=i,this}},{key:"setPercentage",value:function(t,i){return this.percentageX=t,this.percentageY=i,this}},{key:"setOffset",value:function(t,i){return this.offsetX=t,this.offsetY=i,this}},{key:"anchor",value:function(){return function(t,i){void 0===i&&(i=new ft);var e=t.canvasBounds,n=t.displayScale,r=t.autoCenter;i.x=0<=e.x?0:-e.x*n.x,i.y=0<=e.y?0:-e.y*n.y,i.width=e.width*n.x-i.x,i.height=e.height*n.y-i.y,1!==r&&2!==r||(i.width-=i.x),1!==r&&3!==r||(i.height-=i.y)}(this.scaleManamger,this.viewport),this.updatePosition(),this}},{key:"updatePosition",value:function(){var t=this.gameObject;return null===this.alignX?t.x=this.anchorX:void 0!==this.alignX&&(t.x=this.anchorX+t.displayWidth*(t.originX-this.alignX)),null===this.alignY?this.gameObject.y=this.anchorY:void 0!==this.alignY&&(t.y=this.anchorY+t.displayHeight*(t.originY-this.alignY)),this}},{key:"scaleManamger",get:function(){return this.gameObject.scene.scale}},{key:"anchorX",get:function(){return this.viewport.x+this.viewport.width*this.percentageX+this.offsetX}},{key:"anchorY",get:function(){return this.viewport.y+this.viewport.height*this.percentageY+this.offsetY}}]),e}(),yt={setEventEmitter:function(t,i){return void 0===i&&(i=Phaser.Events.EventEmitter),this._privateEE=void 0===t,this._eventEmitter=this._privateEE?new i:t,this},destroyEventEmitter:function(){this._eventEmitter&&this._privateEE&&this._eventEmitter.shutdown()},getEventEmitter:function(){return this._eventEmitter},on:function(){return this._eventEmitter&&this._eventEmitter.on.apply(this._eventEmitter,arguments),this},once:function(){return this._eventEmitter&&this._eventEmitter.once.apply(this._eventEmitter,arguments),this},off:function(){return this._eventEmitter&&this._eventEmitter.off.apply(this._eventEmitter,arguments),this},emit:function(){return this._eventEmitter&&this._eventEmitter.emit.apply(this._eventEmitter,arguments),this},addListener:function(){return this._eventEmitter&&this._eventEmitter.addListener.apply(this._eventEmitter,arguments),this},removeListener:function(){return this._eventEmitter&&this._eventEmitter.removeListener.apply(this._eventEmitter,arguments),this},removeAllListeners:function(){return this._eventEmitter&&this._eventEmitter.removeAllListeners.apply(this._eventEmitter,arguments),this},listenerCount:function(){return this._eventEmitter?this._eventEmitter.listenerCount.apply(this._eventEmitter,arguments):0},listeners:function(){return this._eventEmitter?this._eventEmitter.listeners.apply(this._eventEmitter,arguments):[]}},mt=Phaser.Scene,bt=Phaser.Utils.Objects.GetValue,Ct=Phaser.Utils.Objects.GetAdvancedValue,St=function(){function e(t,i){w(this,e),this.gameObject=t,this.scene=st(t),this.scaleStart={},this.scaleEnd={},this.tween=void 0,this.resetFromJSON(i),this.boot()}return t(e,[{key:"resetFromJSON",value:function(t){return this.setMode(bt(t,"mode",0)),this.setScaleRange(Ct(t,"start",void 0),Ct(t,"end",0)),this.setDelay(Ct(t,"delay",0)),this.setDuration(Ct(t,"duration",1e3)),this.setEase(bt(t,"ease",void 0)),this}},{key:"toJSON",value:function(){return{mode:this.mode,start:this.scaleStart,end:this.scaleEnd,delay:this.delay,duration:this.duration}}},{key:"boot",value:function(){this.gameObject.once&&this.gameObject.once("destroy",this.destroy,this)}},{key:"shutdown",value:function(){return this.stop(),this.gameObject=void 0,this.scene=void 0,this}},{key:"destroy",value:function(){return this.shutdown(),this}},{key:"setMode",value:function(t){return"string"==typeof t&&(t=kt[t]),this.mode=t,this}},{key:"setScaleRange",value:function(t,i){return"number"==typeof t?(this.scaleStart.x=t,this.scaleStart.y=t):(this.scaleStart.x=bt(t,"x",this.gameObject.scaleX),this.scaleStart.y=bt(t,"y",this.gameObject.scaleY)),"number"==typeof i?(this.scaleEnd.x=i,this.scaleEnd.y=i):(this.scaleEnd.x=bt(i,"x",this.scaleStart.x),this.scaleEnd.y=bt(i,"y",this.scaleStart.y)),this}},{key:"setDelay",value:function(t){return this.delay=t,this}},{key:"setDuration",value:function(t){return this.duration=t,this}},{key:"setEase",value:function(t){return void 0===t&&(t="Linear"),this.ease=t,this}},{key:"start",value:function(){return this.tween||(0===this.duration?(this.gameObject.setScale(this.scaleEnd.x,this.scaleEnd.y),this.complete()):(this.gameObject.setScale(this.scaleStart.x,this.scaleStart.y),this.tween=this.scene.tweens.add({targets:this.gameObject,scaleX:this.scaleEnd.x,scaleY:this.scaleEnd.y,duration:this.duration,ease:this.ease,yoyo:2==this.mode,repeat:2==this.mode?-1:0,onComplete:this.complete,onCompleteScope:this}),this.setEventEmitter(this.tween))),this}},{key:"restart",value:function(){return this.stop().start(),this}},{key:"stop",value:function(){return this.tween&&(this.setEventEmitter(!1),this.tween.remove(),this.tween=void 0),this}},{key:"complete",value:function(){return this.stop(),1===this.mode&&this.gameObject.destroy(),this}}]),e}();Object.assign(St.prototype,yt);var kt={stop:0,destroy:1,yoyo:2},Et={},Ot=Phaser.Utils.Objects.IsPlainObject,xt=Phaser.Utils.Objects.GetValue;var Pt={},_t=Phaser.Utils.Objects.IsPlainObject,wt=Phaser.Utils.Objects.GetValue;var Bt=Phaser.Utils.Objects.GetValue,zt=Phaser.Utils.Objects.GetAdvancedValue,Tt=function(){function e(t,i){w(this,e),this.gameObject=t,this.scene=st(t),this.alphaStart=void 0,this.alphaEnd=void 0,this.tween=void 0,this.resetFromJSON(i),this.boot()}return t(e,[{key:"resetFromJSON",value:function(t){return this.setMode(Bt(t,"mode",0)),this.setAlphaRange(zt(t,"start",this.gameObject.alpha),zt(t,"end",0)),this.setDelay(zt(t,"delay",0)),this.setDuration(zt(t,"duration",1e3)),this}},{key:"toJSON",value:function(){return{mode:this.mode,start:this.alphaStart,end:this.alphaEnd,delay:this.delay,duration:this.duration}}},{key:"boot",value:function(){this.gameObject.once&&this.gameObject.once("destroy",this.destroy,this)}},{key:"shutdown",value:function(){return this.stop(),this.gameObject=void 0,this.scene=void 0,this}},{key:"destroy",value:function(){return this.shutdown(),this}},{key:"setMode",value:function(t){return"string"==typeof t&&(t=Mt[t]),this.mode=t,this}},{key:"setAlphaRange",value:function(t,i){return this.alphaStart=t,this.alphaEnd=i,this}},{key:"setDelay",value:function(t){return this.delay=t,this}},{key:"setDuration",value:function(t){return this.duration=t,this}},{key:"start",value:function(){return this.tween||(0===this.duration?(this.gameObject.setAlpha(this.alphaEnd),this.complete()):(this.gameObject.setAlpha(this.alphaStart),this.tween=this.scene.tweens.add({targets:this.gameObject,alpha:this.alphaEnd,delay:this.delay,duration:this.duration,ease:"Linear",yoyo:2==this.mode,repeat:2==this.mode?-1:0,onComplete:this.complete,onCompleteScope:this}),this.setEventEmitter(this.tween))),this}},{key:"restart",value:function(){return this.stop().start(),this}},{key:"stop",value:function(){return this.tween&&(this.setEventEmitter(!1),this.tween.remove(),this.tween=void 0),this}},{key:"complete",value:function(){return this.stop(),1===this.mode&&this.gameObject.destroy(),this}}]),e}();Object.assign(Tt.prototype,yt);var Mt={stop:0,destroy:1,yoyo:2},jt={},Rt=Phaser.Utils.Objects.IsPlainObject,At=Phaser.Utils.Objects.GetValue;var Lt={},Ht=Phaser.Utils.Objects.IsPlainObject,Xt=Phaser.Utils.Objects.GetValue;var Yt=void 0;function Ft(t){return O(t).parent}function Wt(t,i,e){!t||void 0===i&&void 0===e||(t.resize?(void 0===i&&(i=t.width),void 0===e&&(e=t.height),t.resize(i,e)):(void 0!==i&&(t.displayWidth=i),void 0!==e&&(t.displayHeight=e)))}var Nt=Phaser.Display.Align.CENTER,Gt=function(t,i,e){var n=this.getTopmostSizer();n.x+=i-this.x,n.y+=e-this.y},It={getSizerConfig:O,pushIntoBounds:function(t){return void 0===t&&(t=function(t,i){void 0===i&&(void 0===P&&(P=new Phaser.Geom.Rectangle),i=P);var e=t.game.config;return i.setTo(0,0,e.width,e.height),i}(this.scene)),this.left=Math.max(this.left,t.left),this.right=Math.min(this.right,t.right),this.top=Math.max(this.top,t.top),this.bottom=Math.min(this.bottom,t.bottom),this},drawBounds:function(t,i){var e,n,r,o,s=t.scene;if("number"==typeof i)e=i;else{e=at(i,"color",16777215);var h=at(i,"name",!1);h&&(n=at(h,"createTextCallback",lt),r=at(h,"createTextCallbackScope",void 0),"string"==typeof(o=at(h,"align","left-top"))&&(o=M[o]))}if(n&&!t.children){t.children=s.add.group(),t.once("destroy",function(){t.children.destroy(),t.children=void 0});var a=t.clear.bind(t);t.clear=function(){a(),t.children.clear(!1,!0)}}for(var l,u,c=this.getAllChildren([this]),d=0,p=c.length;d<p;d++)(l=c[d]).getBounds&&(e&&t.lineStyle(1,e).strokeRectShape(l.getBounds(ut)),l.name&&n&&(u=r?n.call(r,s):n(s))&&(u.setText(l.name),t.children.add(u),j.setPosition(ut.x,ut.y).setSize(ut.width,ut.height),ht(u,j,o)));return this},getChildrenWidth:function(){return 0},getChildrenHeight:function(){return 0},addChildrenMap:rt,addElement:rt,getElement:function(t){if(void 0!==this.childrenMap&&("string"==typeof t&&(t=t.split(".")),0!==t.length)){var i,e=t.shift();if("#"===e.charAt(0)){e=e.substring(1);for(var n=0,r=(o=ct(this.childrenMap,pt)).length;n<r;n++)if(o[n].name===e){i=o[n];break}pt.length=0}else if(-1===e.indexOf("["))i=this.childrenMap[e];else{var o,s=e.match(dt);if(null!=s)(o=this.childrenMap[s[1]])&&(i=o[s[2]])}return 0===t.length?i:i&&i.childrenMap?i.getElement(t):null}},getAllChildrenSizers:function(t){void 0===t&&(t=[]);for(var i=t.length,e=this.getChildrenSizers(t),n=t.length,r=i;r<n;r++)e[r].getAllChildrenSizers(t);return t},getChildrenSizers:function(t){return void 0===t&&(t=[]),t},preLayout:function(t){if(!t)for(var i,e=this.getAllChildrenSizers([this]),n=0,r=e.length;n<r;n++)(i=e[n]).rexSizer&&i._layoutInit()},_layoutInit:function(){},layout:function(t,i,e){return this.rexSizer.hidden?this:(this.preLayout(),this.postLayout())},layoutBackgrounds:function(){if(void 0!==this.backgroundChildren)for(var t,i=this.backgroundChildren,e=this.left,n=this.top,r=this.width,o=this.height,s=0,h=i.length;s<h;s++)(t=i[s]).rexSizer.hidden||(Wt(t,r,o),j.setPosition(e,n).setSize(r,o),ht(t,j,Nt),this.resetChildPositionState(t))},postLayout:function(t,i,e){return this._anchor&&this._anchor.updatePosition(),this},setAnchor:function(t){return void 0===this._anchor?this._anchor=new gt(this,t):this._anchor.resetFromJSON(t),this},popUp:function(t,i,e){if(Ot(t)){var n=t;t=xt(n,"duration",void 0),i=xt(n,"orientation",void 0),e=xt(n,"ease",void 0)}return this._scale=function(t,i,e,n,r){switch(Et.mode=0,e){case 0:case"x":Et.start={x:0};break;case 1:case"y":Et.start={y:0};break;default:Et.start=0}return Et.end=1,Et.duration=i,Et.ease=void 0===n?"Cubic":n,void 0===r?r=new St(t,Et):r.resetFromJSON(Et),r.restart(),r}(this,t,i,e,this._scale),this},scaleDownDestroy:function(t,i,e,n){if(_t(t)){var r=t;t=wt(r,"duration",void 0),i=wt(r,"orientation",void 0),e=wt(r,"ease",void 0),n=wt(r,"destroy",void 0)}return this._scale=function(t,i,e,n,r,o){switch(r instanceof St&&(o=r,r=void 0),void 0===r&&(r=!0),Pt.mode=r?1:0,e){case 0:case"x":Pt.end={x:0};break;case 1:case"y":Pt.end={y:0};break;default:Pt.end=0}return Pt.duration=i,Pt.ease=void 0===n?"Linear":n,void 0===o?o=new St(t,Pt):o.resetFromJSON(Pt),o.restart(),o}(this,t,i,e,n,this._scale),this},fadeIn:function(t){return Rt(t)&&(t=At(t,"duration",void 0)),this._fade=function(t,i,e,n){return void 0===e&&(e=t.alpha),jt.mode=0,jt.start=0,jt.end=e,jt.duration=i,void 0===n?n=new Tt(t,jt):n.resetFromJSON(jt),n.restart(),n}(this,t,this._fade),this},fadeOutDestroy:function(t,i){if(Ht(t)){var e=t;t=Xt(e,"duration",void 0),i=Xt(e,"destroy",void 0)}return this._fade=function(t,i,e,n){return e instanceof Tt&&(n=e,e=void 0),void 0===e&&(e=!0),Lt.mode=e?1:0,Lt.end=0,Lt.duration=i,void 0===n?n=new Tt(t,Lt):n.resetFromJSON(Lt),n.restart(),n}(this,t,i,this._fade),this},isInTouching:function(t){return function(t,i,e,n){if(void 0===Yt&&(Yt=new Phaser.Geom.Rectangle),t.getBounds(Yt),i)return!(e&&!e(t,i))&&(!!Yt.contains(i.x,i.y)&&!(n&&!n(t,i)));for(var r=t.scene.input.manager,o=r.pointersTotal,s=r.pointers,h=0;h<o;h++)if(i=s[h],(!e||e(t,i))&&Yt.contains(i.x,i.y)&&(!n||n(t,i)))return!0;return!1}(this,t)},getParentSizer:function(){return Ft(this)},getTopmostSizer:function(){return function(t){for(var i=Ft(t);i;)i=Ft(t=i);return t}(this)},setDraggable:function(t,i){var e=l(t);return"string"===e?t=this.getElement(t):void 0!==t&&"object"==e||(i=t,t=this),void 0===i&&(i=!0),t.input&&t.input.hasOwnProperty("draggable")?t.input.draggable=i:i&&(t.setInteractive(),t.scene.input.setDraggable(t),t.on("drag",Gt,this)),this}},Dt=Phaser.Utils.Objects.GetValue,Vt=function(){function a(t,i,e,n,r,o){var s;w(this,a),(s=T(this,B(a).call(this,t,i,e,2,2))).isRexSizer=!0,s.setMinSize(n,r),s.setName(Dt(o,"name","")),s.rexSizer={},s.backgroundChildren=void 0;var h=Dt(o,"anchor",void 0);return h&&s.setAnchor(h),s.setDraggable(Dt(o,"draggable",!1)),s}return i(a,E),t(a,[{key:"destroy",value:function(t){this.scene&&(void 0!==this.backgroundChildren&&(this.backgroundChildren.length=0),u(B(a.prototype),"destroy",this).call(this,t))}},{key:"setMinSize",value:function(t,i){return this.setMinWidth(t).setMinHeight(i),this}},{key:"setMinWidth",value:function(t){return null==t&&(t=0),this.minWidth=t,this}},{key:"setMinHeight",value:function(t){return null==t&&(t=0),this.minHeight=t,this}},{key:"alignLeft",value:function(t){return this.left=t,this}},{key:"alignRight",value:function(t){return this.right=t,this}},{key:"alignCenterX",value:function(t){return this.centerX=t,this}},{key:"alignTop",value:function(t){return this.top=t,this}},{key:"alignBottom",value:function(t){return this.bottom=t,this}},{key:"alignCenterY",value:function(t){return this.centerY=t,this}},{key:"pin",value:function(t){return u(B(a.prototype),"add",this).call(this,t),this}},{key:"addBackground",value:function(t,i){return void 0===this.backgroundChildren&&(this.backgroundChildren=[]),u(B(a.prototype),"add",this).call(this,t),(this.getSizerConfig(t).parent=this).backgroundChildren.push(t),void 0!==i&&this.addChildrenMap(i,t),this}},{key:"childrenWidth",get:function(){return void 0===this._childrenWidth&&(this._childrenWidth=this.getChildrenWidth()),this._childrenWidth}},{key:"childrenHeight",get:function(){return void 0===this._childrenHeight&&(this._childrenHeight=this.getChildrenHeight()),this._childrenHeight}},{key:"left",get:function(){return this.x-this.displayWidth*this.originX},set:function(t){this.x+=t-this.left}},{key:"right",get:function(){return this.left+this.displayWidth},set:function(t){this.x+=t-this.right}},{key:"centerX",get:function(){return this.left+this.displayWidth/2},set:function(t){this.x+=t-this.centerX}},{key:"top",get:function(){return this.y-this.displayHeight*this.originY},set:function(t){this.y+=t-this.top}},{key:"bottom",get:function(){return this.top+this.displayHeight},set:function(t){this.y+=t-this.bottom}},{key:"centerY",get:function(){return this.top+this.displayHeight/2},set:function(t){this.y+=t-this.centerY}}]),a}();Object.assign(Vt.prototype,It);function Ut(t,i){var e,n=t.rexSizer;if(n.expand){var r=n.padding;e=i-r.left-r.right}return e}function Jt(t,i){var e,n=t.rexSizer;if(n.expand){var r=n.padding;e=i-r.top-r.bottom}return e}function Zt(t,i){return void 0===i&&(i={}),"number"==typeof t?(i.left=t,i.right=t,i.top=t,i.bottom=t):(i.left=Kt(t,"left",0),i.right=Kt(t,"right",0),i.top=Kt(t,"top",0),i.bottom=Kt(t,"bottom",0)),i}var qt={getChildrenWidth:function(){if(this.rexSizer.hidden)return 0;for(var t,i,e,n,r,o=0,s=this.gridChildren,h=0;h<this.columnCount;h++){if(void(t=0)===(r=this.columnProportions[h])||0===r){for(var a=0;a<this.rowCount;a++)(i=s[a*this.columnCount+h])&&(i.rexSizer.hidden||(n=i.isRexSizer?Math.max(i.minWidth,i.childrenWidth):i.displayWidth,n+=(e=i.rexSizer.padding).left+e.right,t=Math.max(t,n)));o+=t}this.columnWidth[h]=t}return o},getChildrenHeight:function(){if(this.rexSizer.hidden)return 0;for(var t,i,e,n,r,o=0,s=this.gridChildren,h=0;h<this.rowCount;h++){if(void(t=0)===(r=this.rowProportions[h])||0===r){for(var a=0;a<this.columnCount;a++)(i=s[h*this.columnCount+a])&&(i.rexSizer.hidden||(n=i.isRexSizer?Math.max(i.minHeight,i.childrenHeight):i.displayHeight,n+=(e=i.rexSizer.padding).top+e.bottom,t=Math.max(t,n)));o+=t}this.rowHeight[h]=t}return o},getChildrenSizers:function(t){void 0===t&&(t=[]);for(var i,e=this.gridChildren,n=0,r=e.length;n<r;n++)(i=e[n])&&i.isRexSizer&&t.push(i);return t},layout:function(t,i,e){if(this.rexSizer.hidden)return this;this.preLayout(t);var n,r,o,s,h=this.totalColumnProportions,a=this.totalRowProportions;if(void 0===i)if(t&&0<h){var l=this.rexSizer.padding;i=t.width-l.left-l.right}else i=Math.max(this.childrenWidth,this.minWidth);if(void 0===e)if(t&&0<a){var l=this.rexSizer.padding;e=t.height-l.top-l.bottom}else e=Math.max(this.childrenHeight,this.minHeight);this.resize(i,e),n=0<h?(this.width-this.childrenWidth)/h:0,r=0<a?(this.height-this.childrenHeight)/a:0;for(var u,c,d,p,f,v,g,y,m,b,C=this.left,S=C,k=this.top,E=0;E<this.rowCount;E++){b=0===(y=this.rowProportions[E]||0)?this.rowHeight[E]:y*r,S=C;for(var O=0;O<this.columnCount;O++)m=0===(g=this.columnProportions[O]||0)?this.columnWidth[O]:g*n,(o=this.gridChildren[E*this.columnCount+O])&&!o.rexSizer.hidden&&(f=Ut(o,m),v=Jt(o,b),o.isRexSizer?o.layout(this,f,v):Wt(o,f,v),u=S+(l=(s=o.rexSizer).padding).left,d=m-l.left-l.right,c=k+l.top,p=b-l.top-l.bottom,j.setPosition(u,c).setSize(d,p),ht(o,j,s.align),this.resetChildPositionState(o)),S+=m;k+=b}return this.layoutBackgrounds(),this.postLayout()},_layoutInit:function(){this._childrenWidth=void 0,this._childrenHeight=void 0}},Kt=Phaser.Utils.Objects.GetValue,Qt=Phaser.Utils.Objects.IsPlainObject,$t=Phaser.Utils.Objects.GetValue,ti=Phaser.Utils.Array.Remove,ii=Phaser.Display.Align.CENTER,ei=function(){function c(t,i,e,n,r,o,s,h,a){var l,u;return w(this,c),Qt(i)?(i=$t(u=i,"x",0),e=$t(u,"y",0),n=$t(u,"width",void 0),r=$t(u,"height",void 0),o=$t(u,"column",0),s=$t(u,"row",0),h=$t(u,"columnProportions",void 0),a=$t(u,"rowProportions",void 0)):Qt(n)?(n=$t(u=n,"width",void 0),r=$t(u,"height",void 0),o=$t(u,"column",0),s=$t(u,"row",0),h=$t(u,"columnProportions",void 0),a=$t(u,"rowProportions",void 0)):Qt(o)?(o=$t(u=o,"column",0),s=$t(u,"row",0),h=$t(u,"columnProportions",void 0),a=$t(u,"rowProportions",void 0)):Qt(h)&&(h=$t(u=h,"columnProportions",void 0),a=$t(u,"rowProportions",void 0)),(l=T(this,B(c).call(this,t,i,e,n,r,u))).type="rexGridSizer",l.initialGrid(o,s,h,a),l}return i(c,Vt),t(c,[{key:"destroy",value:function(t){this.scene&&(this.gridChildren.length=0,u(B(c.prototype),"destroy",this).call(this,t))}},{key:"setColumnProportion",value:function(t,i){return t>=this.columnProportions.length||(this.columnProportions[t]=i),this}},{key:"setRowProportion",value:function(t,i){return t>=this.rowProportions.length||(this.rowProportions[t]=i),this}},{key:"add",value:function(t,i,e,n,r,o,s){var h;u(B(c.prototype),"add",this).call(this,t),Qt(i)&&(i=$t(h=i,"column",0),e=$t(h,"row",0),n=$t(h,"align",ii),r=$t(h,"padding",0),o=$t(h,"expand",!1),s=$t(h,"key",void 0));return"string"==typeof n&&(n=M[n]),void 0===n&&(n=ii),void 0===r&&(r=0),void 0===o&&(o=!0),(h=this.getSizerConfig(t)).parent=this,h.align=n,h.padding=Zt(r),h.expand=o,this.gridChildren[e*this.columnCount+i]=t,void 0!==s&&this.addChildrenMap(s,t),this}},{key:"remove",value:function(t){var i=this.getSizerConfig(t);return i.parent!==this||(i.parent=void 0,ti(this.gridChildren,t),void 0!==this.backgroundChildren&&ti(this.backgroundChildren,t),u(B(c.prototype),"remove",this).call(this,t)),this}},{key:"initialGrid",value:function(t,i,e,n){if(this.columnCount=t,this.rowCount=i,this.gridChildren=[],this.gridChildren.length=t*i,this.columnProportions=[],this.columnProportions.length=t,this.columnWidth=[],this.columnWidth.length=t,this.rowProportions=[],this.rowProportions.length=i,this.rowHeight=[],this.rowHeight.length=i,e)for(var r="number"==typeof e,o=0;o<t;o++)if(r)this.setColumnProportion(o,e);else{var s=e[o];0<s&&this.setColumnProportion(o,s)}if(n){var h="number"==typeof n;for(o=0;o<i;o++)if(h)this.setRowProportion(o,n);else{var a=n[o];0<a&&this.setRowProportion(o,a)}}return this}},{key:"totalColumnProportions",get:function(){for(var t,i=0,e=0;e<this.columnCount;e++)0<(t=this.columnProportions[e])&&(i+=t);return i}},{key:"totalRowProportions",get:function(){for(var t,i=0,e=0;e<this.rowCount;e++)0<(t=this.rowProportions[e])&&(i+=t);return i}}]),c}();Object.assign(ei.prototype,qt);var ni={getChildrenWidth:function(t){if(this.rexSizer.hidden)return 0;void 0===t&&(t=!0);var i,e,n,r=0,o=this.sizerChildren;if(0===this.orientation)for(var s=0,h=o.length;s<h;s++)(i=o[s]).rexSizer.hidden||(n=0===i.rexSizer.proportion||t&&!i.isRexSpace&&0<i.rexSizer.proportion?i.isRexSizer?Math.max(i.minWidth,i.childrenWidth):i.displayWidth:0,r+=n+=(e=i.rexSizer.padding).left+e.right);else for(s=0,h=o.length;s<h;s++)(i=o[s]).hasOwnProperty("rexSizer")&&(i.rexSizer.hidden||(n=i.isRexSizer?Math.max(i.minWidth,i.childrenWidth):i.displayWidth,n+=(e=i.rexSizer.padding).left+e.right,r=Math.max(n,r)));return r},getChildrenHeight:function(t){if(this.rexSizer.hidden)return 0;void 0===t&&(t=!0);var i,e,n,r=0,o=this.sizerChildren;if(0===this.orientation)for(var s=0,h=o.length;s<h;s++)(i=o[s]).rexSizer.hidden||(n=i.isRexSizer?Math.max(i.minHeight,i.childrenHeight):i.displayHeight,n+=(e=i.rexSizer.padding).top+e.bottom,r=Math.max(n,r));else for(s=0,h=o.length;s<h;s++)(i=o[s]).hasOwnProperty("rexSizer")&&(i.rexSizer.hidden||(n=0===i.rexSizer.proportion||t&&!i.isRexSpace&&0<i.rexSizer.proportion?i.isRexSizer?Math.max(i.minHeight,i.childrenHeight):i.displayHeight:0,r+=n+=(e=i.rexSizer.padding).top+e.bottom));return r},getChildrenProportion:function(){for(var t,i,e=0,n=this.sizerChildren,r=0,o=n.length;r<o;r++)(t=n[r]).rexSizer.hidden||0<(i=t.rexSizer.proportion)&&(e+=i);return e},getChildrenSizers:function(t){void 0===t&&(t=[]);for(var i,e=this.sizerChildren,n=0,r=e.length;n<r;n++)(i=e[n]).isRexSizer&&t.push(i);return t},layout:function(t,i,e){if(this.rexSizer.hidden)return this;var n;if(this.preLayout(t),void 0===i&&(i=Math.max(this.childrenWidth,this.minWidth)),void 0===e&&(e=Math.max(this.childrenHeight,this.minHeight)),this.resize(i,e),0<this.childrenProportion){var r=0===this.orientation?this.width-this.childrenWidth:this.height-this.childrenHeight;n=0<r?(r=0===this.orientation?this.width-this.getChildrenWidth(!1):this.height-this.getChildrenHeight(!1))/this.childrenProportion:0}else n=0;this.proportionLength=n;for(var o,s,h,a,l,u,c,d,p,f,v,g,y,m,b,C,S,k=this.sizerChildren,E=this.left,O=this.top,x=0,P=k.length;x<P;x++)(o=k[x]).rexSizer.hidden||(h=(s=o.rexSizer).padding,m=this,b=void 0,C=o.rexSizer,S=C.padding,0===m.orientation?0<C.proportion&&0<m.proportionLength&&(b=C.proportion*m.proportionLength):C.expand&&(b=m.width-S.left-S.right),d=b,f=this,v=void 0,g=o.rexSizer,y=g.padding,0===f.orientation?g.expand&&(v=f.height-y.top-y.bottom):0<g.proportion&&0<f.proportionLength&&(v=g.proportion*f.proportionLength),p=v,o.isRexSizer?o.layout(this,d,p):Wt(o,d,p),void 0===d&&(d=o.displayWidth),void 0===p&&(p=o.displayHeight),c=0===this.orientation?(a=E+h.left,u=0===s.proportion||0===n?d:s.proportion*n,l=O+h.top,this.height-h.top-h.bottom):(a=E+h.left,u=this.width-h.left-h.right,l=O+h.top,0===s.proportion||0===n?p:s.proportion*n),j.setPosition(a,l).setSize(u,c),ht(o,j,s.align),this.resetChildPositionState(o),0===this.orientation?E+=u+h.left+h.right:O+=c+h.top+h.bottom);return this.layoutBackgrounds(),this.postLayout()},_layoutInit:function(){this._childrenWidth=void 0,this._childrenHeight=void 0,this._childrenProportion=void 0}},ri={x:0,h:0,horizontal:0,"left-to-right":0,y:1,v:1,vertical:1,"top-to-bottom":1},oi=Phaser.Utils.Objects.IsPlainObject,si=Phaser.Utils.Objects.GetValue,hi=Phaser.Utils.Array.Remove,ai=Phaser.Display.Align.CENTER,li=function(){function a(t,i,e,n,r,o,s){var h;return w(this,a),oi(i)?(i=si(s=i,"x",0),e=si(s,"y",0),n=si(s,"width",void 0),r=si(s,"height",void 0)):oi(n)?(n=si(s=n,"width",void 0),r=si(s,"height",void 0)):oi(o)&&(s=o),void 0!==s&&(o=si(s,"orientation",0)),void 0===o&&(o=0),(h=T(this,B(a).call(this,t,i,e,n,r,s))).type="rexSizer",h.sizerChildren=[],h.setOrientation(o),h}return i(a,Vt),t(a,[{key:"destroy",value:function(t){this.scene&&(this.sizerChildren.length=0,u(B(a.prototype),"destroy",this).call(this,t))}},{key:"setOrientation",value:function(t){return"string"==typeof t&&(t=ri[t]),this.orientation=t,this}},{key:"add",value:function(t,i,e,n,r,o){u(B(a.prototype),"add",this).call(this,t);var s=l(i);if(null===i)return this;if("number"===s);else if("string"===s)i=ui[i];else if(oi(i)){var h;i=si(h=i,"proportion",0),e=si(h,"align",ai),n=si(h,"padding",0),r=si(h,"expand",!1),o=si(h,"key",void 0)}return"string"==typeof e&&(e=M[e]),void 0===i&&(i=0),void 0===e&&(e=ai),void 0===n&&(n=0),void 0===r&&(r=!1),(h=this.getSizerConfig(t)).parent=this,h.proportion=i,h.align=e,h.padding=Zt(n),h.expand=r,this.sizerChildren.push(t),void 0!==o&&this.addChildrenMap(o,t),this}},{key:"addSpace",value:function(t){return void 0===t&&(t=1),this.add(function(t){var i=t.add.zone(0,0,1,1);return i.isRexSpace=!0,i}(this.scene),t),this}},{key:"insert",value:function(t,i,e,n,r,o){return this.add(i,e,n,r,o),this.moveTo(i,t),this}},{key:"remove",value:function(t){var i=this.getSizerConfig(t);return i.parent!==this||(i.parent=void 0,hi(this.sizerChildren,t),u(B(a.prototype),"remove",this).call(this,t)),this}},{key:"clear",value:function(t){for(var i=0,e=this.sizerChildren.length;i<e;i++)this.getSizerConfig(this.sizerChildren[i]).parent=void 0;return this.sizerChildren.length=0,u(B(a.prototype),"clear",this).call(this,t),this}},{key:"childrenProportion",get:function(){return void 0===this._childrenProportion&&(this._childrenProportion=this.getChildrenProportion()),this._childrenProportion}}]),a}();Object.assign(li.prototype,ni);var ui={min:0,full:-1},ci=Phaser.Utils.Objects.GetValue,di=function(){function e(t,i){w(this,e),this.gameObject=t,this.scene=st(t),this.setEventEmitter(ci(i,"eventEmitter",void 0)),t.setInteractive(ci(i,"inputConfig",void 0)),this.resetFromJSON(i),this.boot()}return t(e,[{key:"resetFromJSON",value:function(t){return this.pointer=void 0,this.lastClickTime=void 0,this.setEnable(ci(t,"enable",!0)),this.setMode(ci(t,"mode",1)),this.setClickInterval(ci(t,"clickInterval",100)),this.setDragThreshold(ci(t,"threshold",void 0)),this}},{key:"boot",value:function(){this.gameObject.on("pointerdown",this.onPress,this),this.gameObject.on("pointerup",this.onRelease,this),this.gameObject.on("pointerout",this.onPointOut,this),this.gameObject.on("pointermove",this.onMove,this),this.gameObject.once("destroy",this.destroy,this)}},{key:"shutdown",value:function(){this.destroyEventEmitter(),this.pointer=void 0,this.gameObject=void 0,this.scene=void 0}},{key:"destroy",value:function(){this.shutdown()}},{key:"setEnable",value:function(t){return void 0===t&&(t=!0),this.enable===t||(t||this.cancel(),this.enable=t,this.gameObject.input.enabled=t),this}},{key:"setMode",value:function(t){return"string"==typeof t&&(t=gi[t]),this.mode=t,this}},{key:"setClickInterval",value:function(t){return this.clickInterval=t,this}},{key:"setDragThreshold",value:function(t){return this.dragThreshold=t,this}},{key:"onPress",value:function(t,i,e,n){void 0===this.pointer&&(this.pointer=t,0===this.mode&&this.click(t.downTime,t,n))}},{key:"onRelease",value:function(t,i,e,n){this.pointer===t&&(1===this.mode&&this.click(t.upTime,t,n),this.pointer=void 0)}},{key:"onPointOut",value:function(t,i){this.pointer===t&&this.cancel()}},{key:"onMove",value:function(t,i,e,n){this.pointer===t&&void 0!==this.dragThreshold&&t.getDistance()>=this.dragThreshold&&this.cancel()}},{key:"click",value:function(t,i,e){if(void 0===t)return this.emit("click",this,this.gameObject,i,e),this;this.pointer=void 0;var n=this.lastClickTime;return void 0!==n&&t-n<=this.clickInterval||(this.lastClickTime=t,this.emit("click",this,this.gameObject,i,e)),this}},{key:"cancel",value:function(){return this.pointer=void 0,this}}]),e}();Object.assign(di.prototype,yt);function pi(r,t){r._buttonBehavior=new di(r,t),r._buttonBehavior.on("click",function(t,i,e,n){yi.call(this,"button.click",r,e,n)},this),r.on("pointerover",function(t,i,e,n){yi.call(this,"button.over",r,t,n)},this).on("pointerout",function(t,i){yi.call(this,"button.out",r,t,i)},this)}function fi(t){mi(t,!1)}function vi(t){mi(t,!0)}var gi={press:0,pointerdown:0,release:1,pointerup:1},yi=function(t,i,e,n){var r;if("number"==typeof i){if(r=i,!(i=this.childrenMap.buttons[r]))return}else if(-1===(r=this.childrenMap.buttons.indexOf(i)))return;void 0!==this.groupName?this.eventEmitter.emit(t,i,this.groupName,r,e,n):this.eventEmitter.emit(t,i,r,e,n)},mi=function(t,i){t&&(O(t).hidden=i,t.setVisible(!i))},bi={getButton:function(t){var i;return"number"==typeof t?i=this.childrenMap.buttons[t]:(i=t,-1===this.childrenMap.buttons.indexOf(i)&&(i=void 0)),i},emitButtonClick:function(t){return yi.call(this,"button.click",t),this},showButton:function(t){return fi(this.getButton(t)),this},hideButton:function(t){return vi(this.getButton(t)),this},isButtonShown:function(t){return function(t){!t||O(t).hidden}(this.getButton(t)),this},forEachButtton:function(t,i){for(var e=this.childrenMap.buttons,n=0,r=e.length;n<r;n++)i?t.call(i,e[n],n,e):t(e[n],n,e);return this}},Ci=Phaser.Utils.Objects.GetValue,Si=function(){function d(t,i){var e;w(this,d),void 0===i&&(i={}),(e=T(this,B(d).call(this,t,i))).type="rexButtons",e.eventEmitter=Ci(i,"eventEmitter",z(e)),e.groupName=Ci(i,"groupName",void 0);var n=Ci(i,"background",void 0),r=Ci(i,"buttons",void 0);r&&0===r.length&&(r=void 0);var o=Ci(i,"space",0);if(n&&e.addBackground(n),r){var s,h,a=Ci(i,"align",void 0),l=Ci(i,"click",void 0);"right"!==a&&"bottom"!==a&&"center"!==a||e.addSpace();for(var u=0,c=r.length;u<c;u++)s=r[u],h=0===e.orientation?{left:1<=u?o:0,right:0,top:0,bottom:0}:{left:0,right:0,top:1<=u?o:0,bottom:0},e.add(s,0,"center",h,!0),pi.call(z(e),s,l);"center"===a&&e.addSpace()}return e.addChildrenMap("background",n),e.addChildrenMap("buttons",r||[]),e}return i(d,li),d}();Object.assign(Si.prototype,bi);var ki={getButtonsSizer:function(t){return this.childrenMap[t+"ButtonsSizer"]},getButton:function(t,i){var e=this.getButtonsSizer(t);return e?e.getButton(i):void 0},emitButtonClick:function(t,i){var e=this.getButtonsSizer(t);return e&&e.emitButtonClick(i),this},emitLeftButtonClick:function(t){return this.childrenMap.leftButtonsSizer.emitButtonClick(t),this},emitRightButtonClick:function(t){return this.childrenMap.rightButtonsSizer.emitButtonClick(t),this},emitTopButtonClick:function(t){return this.childrenMap.topButtonsSizer.emitButtonClick(t),this},emitBottomButtonClick:function(t){return this.childrenMap.bottomButtonsSizer.emitButtonClick(t),this},getLeftButton:function(t){return this.childrenMap.leftButtonsSizer.getButton(t)},getRightButton:function(t){return this.childrenMap.rightButtonsSizer.getButton(t)},getTopButton:function(t){return this.childrenMap.topButtonsSizer.getButton(t)},getBottomButton:function(t){return this.childrenMap.bottomButtonsSizer.getButton(t)},showButton:function(t,i){return fi(this.getButton(t,i)),this},showLeftButton:function(t){return fi(this.getLeftButton(t)),this},showRightButton:function(t){return fi(this.getRightButton(t)),this},showTopButton:function(t){return fi(this.getTopButton(t)),this},showBottomButton:function(t){return fi(this.getBottomButton(t)),this},hideButton:function(t,i){return vi(this.getButton(t,i)),this},hideLeftButton:function(t){return vi(this.getLeftButton(t)),this},hideRightButton:function(t){return vi(this.getRightButton(t)),this},hideTopButton:function(t){return vi(this.getTopButton(t)),this},hideBottomButton:function(t){return vi(this.getBottomButton(t)),this},forEachLeftButton:function(t,i){return this.childrenMap.leftButtonsSizer.forEachButtton(t,i),this},forEachRightButton:function(t,i){return this.childrenMap.rightButtonsSizer.forEachButtton(t,i),this},forEachTopButton:function(t,i){return this.childrenMap.topButtonsSizer.forEachButtton(t,i),this},forEachBottomButton:function(t,i){return this.childrenMap.bottomButtonsSizer.forEachButtton(t,i),this}},Ei=Phaser.Utils.Objects.GetValue,Oi=function(){function _(t,i){var e;w(this,_),void 0===i&&(i={}),i.column=3,i.row=3,(e=T(this,B(_).call(this,t,i))).type="rexTabs",e.eventEmitter=Ei(i,"eventEmitter",z(e));var n,r=Ei(i,"background",void 0),o=Ei(i,"panel",void 0),s=Ei(i,"leftButtons",void 0);s&&0===s.length&&(s=void 0);var h,a=Ei(i,"rightButtons",void 0);a&&0===a.length&&(a=void 0);var l,u=Ei(i,"topButtons",void 0);u&&0===u.length&&(u=void 0);var c,d=Ei(i,"bottomButtons",void 0);d&&0===d.length&&(d=void 0);var p=Ei(i,"click",void 0),f=Ei(i,"space.left",0),v=Ei(i,"space.right",0),g=Ei(i,"space.top",0),y=Ei(i,"space.bottom",0),m=Ei(i,"space.leftButtonsOffset",0),b=Ei(i,"space.rightButtonsOffset",0),C=Ei(i,"space.topButtonsOffset",0),S=Ei(i,"space.bottomButtonsOffset",0),k=Ei(i,"space.leftButton",0),E=Ei(i,"space.rightButton",0),O=Ei(i,"space.topButton",0),x=Ei(i,"space.bottomButton",0);if(r&&e.addBackground(r),o){var P={left:s?0:f,right:a?0:v,top:u?0:g,bottom:d?0:y};e.add(o,1,1,"center",P,!0)}if(s){n=new Si(t,{groupName:"left",buttons:s,orientation:1,space:k,align:Ei(i,"align.leftButtons",void 0),click:p,eventEmitter:e.eventEmitter});P={left:f,top:m};e.add(n,0,1,"top",P,!1)}if(a){h=new Si(t,{groupName:"right",buttons:a,orientation:1,space:E,align:Ei(i,"align.rightButtons",void 0),click:p,eventEmitter:e.eventEmitter});P={right:v,top:b};e.add(h,2,1,"top",P,!1)}if(u){l=new Si(t,{groupName:"top",buttons:u,orientation:0,space:O,align:Ei(i,"align.topButtons",void 0),click:p,eventEmitter:e.eventEmitter});P={top:g,left:C};e.add(l,1,0,"left",P,!1)}if(d){c=new Si(t,{groupName:"bottom",buttons:d,orientation:0,space:x,align:Ei(i,"align.bottomButtons",void 0),click:p,eventEmitter:e.eventEmitter});P={bottom:y,left:S};e.add(c,1,2,"left",P,!1)}return e.addChildrenMap("background",r),e.addChildrenMap("panel",o),e.addChildrenMap("leftButtons",s),e.addChildrenMap("rightButtons",a),e.addChildrenMap("topButtons",u),e.addChildrenMap("bottomButtons",d),e.addChildrenMap("leftButtonsSizer",n),e.addChildrenMap("rightButtonsSizer",h),e.addChildrenMap("topButtonsSizer",l),e.addChildrenMap("bottomButtonsSizer",c),e}return i(_,ei),_}();return Object.assign(Oi.prototype,ki),Oi});
