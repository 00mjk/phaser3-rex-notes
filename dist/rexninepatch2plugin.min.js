!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).rexninepatch2plugin=e()}(this,function(){"use strict";function _(t){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function g(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function n(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),t}function h(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function o(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function l(r){var s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=a(r);if(s){var i=a(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return o(this,t)}}function u(t,e,i){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=a(t)););return t}(t,e);if(r){var s=Object.getOwnPropertyDescriptor(r,e);return s.get?s.get.call(i):s.value}})(t,e,i||t)}function s(t){return function(t){if(Array.isArray(t))return c(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return c(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r}function f(t,e){return this.texture=this.scene.sys.textures.get(t),this.frame=this.texture.get(e),this}function t(t,e){if(this.width===t&&this.height===e)return this;this.width=t,this.height=e,this.updateDisplayOrigin();var i=this.input;return i&&!i.customHitArea&&(i.hitArea.width=t,i.hitArea.height=e),this}function e(){return this.poolManager&&this.poolManager.freeMultiple(this.children.list),this.children.list.length=0,this.lastAppendedChildren.length=0,this.dirty=!0,this}var v=Phaser.GameObjects.GetCalcMatrix,d=Phaser.Renderer.Canvas.SetTransform,p={renderWebGL:function(t,e,i,r){var s=e.getRenderList();if(0!==s.length){i.addToRenderList(e);var n=t.pipelines.set(e.pipeline),h=e.frame.glTexture,a=n.setGameObject(e),o=i.roundPixels,u=v(e,i,r),l=n.calcMatrix.copyFrom(u.calc),c=e._displayOriginX,f=e._displayOriginY,d=i.alpha*e.alpha;t.pipelines.preBatch(e);for(var p=0,y=s.length;p<y;p++)s[p].webglRender(n,l,d,c,f,h,a,o);t.pipelines.postBatch(e)}},renderCanvas:function(t,e,i,r){var s=t.currentContext,n=e.getRenderList();if(0!==n.length&&d(t,s,e,i,r)){i.addToRenderList(e);var h=i.roundPixels,a=-e._displayOriginX,o=-e._displayOriginY;s.translate(a,o);for(var u=0,l=n.length;u<l;u++)n[u].canvasRender(s,a,o,h);s.restore()}}},y=Phaser.Utils.Array.Remove,m={setTexture:f,resize:t,setSize:t,addChild:function(t){var e;(this.lastAppendedChildren.length=0,Array.isArray(t))?(this.children.add(t),(e=this.lastAppendedChildren).push.apply(e,s(t))):(this.children.add(t),this.lastAppendedChildren.push(t));return this},removeChild:function(t){return this.poolManager&&this.poolManager.free(t),y(this.children.list,t),this.lastAppendedChildren.length=0,this.dirty=!0,this},removeChildren:e,clear:e,getLastAppendedChildren:function(){return this.lastAppendedChildren},getChildren:function(){return this.children.list}},b=function(){function t(){g(this,t),this.items=[]}return n(t,[{key:"destroy",value:function(){this.clear(),this.items=void 0}},{key:"pop",value:function(){return 0<this.items.length?this.items.pop():null}},{key:"push",value:function(t){return this.items.push(t),this}},{key:"pushMultiple",value:function(t){return this.items.push.apply(this.items,t),t.length=0,this}},{key:"clear",value:function(){return this.items.length=0,this}}]),t}(),w=Phaser.Utils.Objects.GetValue,P={},O=function(){function e(t){g(this,e),this.pools=w(t,"pools",P)}return n(e,[{key:"destroy",value:function(){this.pools=void 0}},{key:"free",value:function(t){if(!this.pools)return this;var e=t.type;return this.pools.hasOwnProperty(e)||(this.pools[e]=new b),this.pools[e].push(t),t.onFree(),this}},{key:"freeMultiple",value:function(t){if(!this.pools)return this;for(var e=0,i=t.length;e<i;e++)this.free(t[e]);return this}},{key:"allocate",value:function(t){return this.pools&&this.pools.hasOwnProperty(t)?this.pools[t].pop():null}}]),e}(),k=Phaser.GameObjects.GameObject,x=Phaser.Utils.Objects.IsPlainObject,S=Phaser.Utils.Objects.GetValue,j=Phaser.Structs.List,A=Phaser.Utils.Array.StableSort,X=function(){h(u,k);var o=l(u);function u(t,e,i,r,s,n){var h;g(this,u),x(e)&&(e=S(n=e,"x",0),i=S(n,"y",0),r=S(n,"texture"),s=S(n,"frame")),void 0===e&&(e=0),void 0===i&&(i=0),(h=o.call(this,t,"rexBlitter")).children=new j,h.renderList=[],h.displayListDirty=!1,h.lastAppendedChildren=[];var a=S(n,"reuseBob",!0);return h.poolManager=a?new O(n):void 0,h.setTexture(r,s),h.setPosition(e,i),h.setOrigin(0,0),h.initPipeline(),h}return n(u,[{key:"preDestroy",value:function(){this.removeChildren(),this.children.destroy(),this.renderList.length=0,this.poolManager&&this.poolManager.destroy()}},{key:"getRenderList",value:function(){if(this.displayListDirty){this.renderList.length=0;for(var t=!1,e=this.children.list,i=0,r=e.length;i<r;i++){var s=e[i];Y(s)&&(this.renderList.push(s),t=t||0!==s.depth)}t&&A(this.renderList,D),this.displayListDirty=!1}return this.renderList}}]),u}(),Y=function(t){return t.active&&t.visible&&0<t.alpha},D=function(t,e){return t._depth-e._depth},R=Phaser.GameObjects.Components;Phaser.Class.mixin(X,[R.Alpha,R.BlendMode,R.ComputedSize,R.Depth,R.GetBounds,R.Mask,R.Origin,R.Pipeline,R.ScrollFactor,R.Transform,R.Visible,p,m]);function F(t){var e,i,r;if("object"!==_(t)||null===t)return t;for(r in e=Array.isArray(t)?[]:{},t)i=t[r],e[r]=F(i);return e}function M(){}function C(t,v){var e=function(){h(y,t);var p=l(y);function y(t,e,i,r,s,n,h,a,o,u){var l;g(this,y),B(e)?(e=U(u=e,"x",0),i=U(u,"y",0),r=U(u,"width",1),s=U(u,"height",1),n=U(u,"key",void 0),h=U(u,"baseFrame",void 0),a=U(u,"columns",void 0),o=U(u,"rows",void 0)):B(r)?(r=U(u=r,"width",1),s=U(u,"height",1),n=U(u,"key",void 0),h=U(u,"baseFrame",void 0),a=U(u,"columns",void 0),o=U(u,"rows",void 0)):B(n)?(n=U(u=n,"key",void 0),h=U(u,"baseFrame",void 0),a=U(u,"columns",void 0),o=U(u,"rows",void 0)):B(h)?(h=U(u=h,"baseFrame",void 0),a=U(u,"columns",void 0),o=U(u,"rows",void 0)):Array.isArray(h)?(u=o,o=a,a=h,h=U(u,"baseFrame",void 0)):B(a)&&(a=U(u=a,"columns",void 0),o=U(u,"rows",void 0)),(l=p.call(this,t)).type=v,l.setPosition(e,i).setSize(r,s).setOrigin(.5,.5),l.columns={},l.rows={},l.stretchMode={},l._tileSprite=void 0,l._image=void 0,l.setGetFrameNameCallback(U(u,"getFrameNameCallback",void 0)),l.setStretchMode(U(u,"stretchMode",0)),l.setPreserveRatio(U(u,"preserveRatio",!0));var c=U(u,"maxFixedPartScale",1),f=U(u,"maxFixedPartScaleX",c),d=U(u,"maxFixedPartScaleY",void 0);return l.setMaxFixedPartScale(f,d),l.setTexture(n,h,a,o),l}return n(y,[{key:"minWidth",get:function(){return this.columns.minWidth}},{key:"minHeight",get:function(){return this.rows.minHeight}},{key:"fixedPartScaleX",get:function(){return this.columns.scale}},{key:"fixedPartScaleY",get:function(){return this.rows.scale}},{key:"resize",value:function(t,e){return this.width===t&&this.height===e||(u(a(y.prototype),"resize",this).call(this,t,e),this.updateTexture()),this}}]),y}();return Object.assign(e.prototype,E),e}var T=function(t,e,i){return"__BASE"===i?"".concat(t,",").concat(e):"".concat(i,"_").concat(t,",").concat(e)},L=Phaser.Utils.Objects.IsPlainObject,G=Phaser.Utils.Objects.GetValue,W=function(t){return"string"==typeof t&&(t=H[t]),t},H={scale:0,repeat:1},E={_drawImage:M,_drawTileSprite:M,setGetFrameNameCallback:function(t){return void 0===t&&(t=T),this.getFrameNameCallback=t,this},setTexture:function(t,e,i,r){Array.isArray(e)&&(r=i,i=e,e=void 0),void 0===e&&(e="__BASE"),i=F(i),r=F(r),this.textureKey=t,this.baseFrameName=e,this.columns.data=i,this.columns.count=i?i.length:0,this.columns.stretch=0,this.columns.minWidth=0,this.columns.scale=1,this.rows.data=r,this.rows.count=r?r.length:0,this.rows.stretch=0,this.rows.minHeight=0,this.rows.scale=1;var s=this.scene.sys.textures.get(t);if(!s)return this.clear(),this;if(!i||!r)return this.clear(),this;for(var n=s.frames[e],h=n.width,a=0,o=0,u=i.length;o<u;o++)void 0===i[o]?a++:"number"==typeof i[o]?h-=i[o]:h-=i[o].width;var l=h/a,c=n.height,f=0;for(o=0,u=r.length;o<u;o++)void 0===r[o]?f++:"number"==typeof r[o]?c-=r[o]:c-=r[o].width;for(var d,p,y,v,g,m=c/f,b=0,w=0,P=0,O=r.length;P<O;P++){void 0===r[P]&&(r[P]=m),"number"==typeof r[P]&&(r[P]={height:r[P],stretch:P%2}),y=(d=r[P]).height,this.rows.stretch+=0|d.stretch,this.rows.minHeight+=0<d.stretch?0:y;o=b=0;for(var k=i.length;o<k;o++){if(void 0===i[o]&&(i[o]=l),"number"==typeof i[o]&&(i[o]={width:i[o],stretch:o%2}),v=(p=i[o]).width,0===P&&(this.columns.stretch+=0|p.stretch,this.columns.minWidth+=0<p.stretch?0:v),1<=v&&1<=y){var x=_(g=this.getFrameNameCallback(o,P,e));"string"!==x&&"number"!==x||s.add(g,0,b+n.cutX,w+n.cutY,v,y)}b+=v}w+=y}return this.updateTexture(),this},updateTexture:function(){if(this.clear(),void 0===this.textureKey)return this;var t=this.scene.sys.textures.get(this.textureKey);if(!t)return this;var e,i,r,s,n,h,a,o=this.columns.minWidth*this.maxFixedPartScaleX,u=this.rows.minHeight*this.maxFixedPartScaleY,l=this.width-o,c=this.height-u,f=0<=l?this.maxFixedPartScaleX:this.width/o,d=0<=c?this.maxFixedPartScaleY:this.height/u;if(this.preserveRatio){var p=Math.min(f,d);if(p<f){var y=(f-p)*o;0<=l?l+=y:l=y,f=p}if(p<d){var v=(d-p)*u;0<=c?c+=v:c=v,d=p}}this.columns.scale=f,this.rows.scale=d,e=0<l&&0<this.columns.stretch?l/this.columns.stretch:0,i=0<c&&0<this.rows.stretch?c/this.rows.stretch:0;for(var g=0,m=0,b=0,w=this.rows.count;b<w;b++){a=0===(n=this.rows.data[b]).stretch?n.height*d:i*n.stretch;for(var P=g=0,O=this.columns.count;P<O;P++)h=0===(s=this.columns.data[P]).stretch?s.width*f:e*s.stretch,r=this.getFrameNameCallback(P,b,this.baseFrameName),t.has(r)&&0<h&&0<a&&(0===(0===n.stretch&&0===s.stretch||0===this.getStretchMode(P,b)?0:1)?this._drawImage(this.textureKey,r,g,m,h,a):this._drawTileSprite(this.textureKey,r,g,m,h,a)),g+=h;m+=a}},setStretchMode:function(t){return L(t)?(this.stretchMode.edge=W(G(t,"edge",0)),this.stretchMode.internal=W(G(t,"internal",0))):(t=W(t),this.stretchMode.edge=t,this.stretchMode.internal=t),this},getStretchMode:function(t,e){return function(t,e){return 0===t||t===this.columns.count-1||0===e||e===this.rows.count-1}.call(this,t,e)?this.stretchMode.edge:this.stretchMode.internal},setPreserveRatio:function(t){return null==t&&(t=!0),this.preserveRatio=t,this},setMaxFixedPartScale:function(t,e){return void 0===e&&(e=t),this.maxFixedPartScaleX=t,this.maxFixedPartScaleY=e,this}},B=Phaser.Utils.Objects.IsPlainObject,U=Phaser.Utils.Objects.GetValue,I={enableData:function(){return void 0===this.data&&(this.data={}),this},getData:function(t,e){return this.enableData(),void 0===t?this.data:function(t,e,i){if(t&&"number"!=typeof t){if(t.hasOwnProperty(e))return t[e];if(-1===e.indexOf("."))return i;for(var r=e.split("."),s=t,n=i,h=0;h<r.length;h++){if(!s.hasOwnProperty(r[h])){n=i;break}n=s[r[h]],s=s[r[h]]}return n}return i}(this.data,t,e)},setData:function(t,e){if(this.enableData(),1===arguments.length){var i=t;for(t in i)this.data[t]=i[t]}else this.data[t]=e;return this},incData:function(t,e,i){return void 0===i&&(i=0),this.enableData(),this.setData(t,this.getData(t,i)+e),this},mulData:function(t,e,i){return void 0===i&&(i=0),this.enableData(),this.setData(t,this.getData(t,i)*e),this},clearData:function(){return this.data&&function(t){if(null!=t)if(Array.isArray(t))t.length=0;else for(var e in t)delete t[e]}(this.data),this}},N=function(){function i(t,e){g(this,i),this.type=e,this.data=void 0,this.setParent(t).reset().setActive()}return n(i,[{key:"destroy",value:function(){this.parent&&this.parent.removeChild(this)}},{key:"setParent",value:function(t){return this.parent=t,this}},{key:"setDisplayListDirty",value:function(t){return t&&this.parent&&(this.parent.displayListDirty=!0),this}},{key:"active",get:function(){return this._active},set:function(t){this.setDisplayListDirty(this._active!=t),this._active=t}},{key:"setActive",value:function(t){return void 0===t&&(t=!0),this.active=t,this}},{key:"modifyPorperties",value:function(){return this}},{key:"reset",value:function(){this.clearData()}},{key:"onFree",value:function(){this.reset().setActive(!1).setParent()}}]),i}();Object.assign(N.prototype,I);var V=Phaser.Math.DegToRad,z=Phaser.Math.RadToDeg,K=Phaser.Utils.Objects.GetValue,Q=function(){h(e,N);var t=l(e);function e(){return g(this,e),t.apply(this,arguments)}return n(e,[{key:"visible",get:function(){return this._visible},set:function(t){this.setDisplayListDirty(this._visible!=t),this._visible=t}},{key:"setVisible",value:function(t){return void 0===t&&(t=!0),this.visible=t,this}},{key:"alpha",get:function(){return this._alpha},set:function(t){this.setDisplayListDirty(!!this._alpha!=!!t),this._alpha=t}},{key:"setAlpha",value:function(t){return this.alpha=t,this}},{key:"setX",value:function(t){return this.x=t,this}},{key:"setY",value:function(t){return this.y=t,this}},{key:"setPosition",value:function(t,e){return this.x=t,this.y=e,this}},{key:"setRotation",value:function(t){return this.rotation=t,this}},{key:"angle",get:function(){return z(this.rotation)},set:function(t){this.rotation=V(t)}},{key:"setAngle",value:function(t){return this.angle=t,this}},{key:"setScaleX",value:function(t){return this.scaleX=t,this}},{key:"width",get:function(){return this._width},set:function(t){this._width=t}},{key:"setWidth",value:function(t,e){return void 0===e&&(e=!1),this.width=t,e&&(this.scaleY=this.scaleX),this}},{key:"setScaleY",value:function(t){return this.scaleY=t,this}},{key:"setScale",value:function(t,e){return void 0===e&&(e=t),this.scaleX=t,this.scaleY=e,this}},{key:"height",get:function(){return this._height},set:function(t){this._height=t}},{key:"setHeight",value:function(t,e){return void 0===e&&(e=!1),this.height=t,e&&(this.scaleX=this.scaleY),this}},{key:"displayWidth",get:function(){return this._width*this.scaleX},set:function(t){this.scaleX=t/this._width}},{key:"setDisplayWidth",value:function(t,e){return void 0===e&&(e=!1),this.displayWidth=t,e&&(this.scaleY=this.scaleX),this}},{key:"displayHeight",get:function(){return this._height*this.scaleY},set:function(t){this.scaleY=t/this._height}},{key:"setDisplayHeight",value:function(t,e){return void 0===e&&(e=!1),this.displayHeight=t,e&&(this.scaleX=this.scaleY),this}},{key:"setOriginX",value:function(t){return this.originX=t,this._displayOriginX=this.width*t,this}},{key:"setOriginY",value:function(t){return this.originY=t,this._displayOriginY=this.height*t,this}},{key:"setOrigin",value:function(t,e){return void 0===e&&(e=t),this.setOriginX(t).setOriginY(e),this}},{key:"depth",get:function(){return this._depth},set:function(t){this.setDisplayListDirty(this._depth!=t),this._depth=t}},{key:"setDepth",value:function(t){return void 0===t&&(t=0),this.depth=t,this}},{key:"modifyPorperties",value:function(t){if(!t)return this;t.hasOwnProperty("x")&&this.setX(t.x),t.hasOwnProperty("y")&&this.setY(t.y),t.hasOwnProperty("rotation")?this.setRotation(t.rotation):t.hasOwnProperty("angle")&&this.setAngle(t.angle),t.hasOwnProperty("alpha")&&this.setAlpha(t.alpha);var e=K(t,"width",void 0),i=K(t,"height",void 0),r=K(t,"scale",void 0),s=K(t,"scaleX",r),n=K(t,"scaleY",r);void 0!==e?void 0===i&&void 0===n?this.setWidth(e,!0):this.setWidth(e):void 0!==s?this.setScaleX(s):t.hasOwnProperty("displayWidth")&&this.setDisplayWidth(t.displayWidth),void 0!==i?void 0===e&&void 0===s?this.setHeight(i,!0):this.setHeight(i):void 0!==n?this.setScaleY(n):t.hasOwnProperty("displayHeight")&&this.setDisplayHeight(t.displayHeight);var h=K(t,"origin",void 0);return void 0!==h?this.setOrigin(h):(t.hasOwnProperty("originX")&&this.setOriginX(t.originX),t.hasOwnProperty("originY")&&this.setOriginY(t.originY)),t.hasOwnProperty("depth")&&this.setDepth(t.depth),this}},{key:"reset",value:function(){return u(a(e.prototype),"reset",this).call(this),this.setVisible().setAlpha(1).setPosition(0,0).setRotation(0).setScale(1,1).setOrigin(0).setDepth(0),this}},{key:"webglRender",value:function(){}},{key:"canvasRender",value:function(){}}]),e}(),$=Phaser.GameObjects.Components.TransformMatrix,q=Phaser.Renderer.WebGL.Utils.getTintAppendFloatAlpha,J=new $,Z=Phaser.Utils.Objects.IsPlainObject,tt=function(){h(s,Q);var r=l(s);function s(t,e){var i;return g(this,s),(i=r.call(this,t,"image")).setFrame(e),i}return n(s,[{key:"width",get:function(){return this._width},set:function(){}},{key:"height",get:function(){return this._height},set:function(){}},{key:"setFrame",value:function(t){return 0<arguments.length&&!Z(t)&&(t=this.parent.texture.get(t)),this.frame=t,this._width=t?t.width:0,this._height=t?t.height:0,this}},{key:"setFlipX",value:function(t){return void 0===t&&(t=!0),this.flipX=t,this}},{key:"setFlipY",value:function(t){return void 0===t&&(t=!0),this.flipY=t,this}},{key:"resetFlip",value:function(){return this.flipX=!1,this.flipY=!1,this}},{key:"color",get:function(){return this._color},set:function(t){this._color=t}},{key:"setColor",value:function(t){return this.color=t,this}},{key:"setTintEffect",value:function(t){return void 0===t&&(t=0),this.tintEffect=t,this}},{key:"reset",value:function(){return u(a(s.prototype),"reset",this).call(this),this.resetFlip().setColor(16777215).setTintEffect().setFrame(),this}},{key:"modifyPorperties",value:function(t){return t&&(t.hasOwnProperty("width")&&(t.displayWidth=t.width,delete t.width),t.hasOwnProperty("height")&&(t.displayHeight=t.height,delete t.height),t.hasOwnProperty("frame")&&this.setFrame(t.frame),u(a(s.prototype),"modifyPorperties",this).call(this,t),t.hasOwnProperty("flipX")&&this.setFlipX(t.flipX),t.hasOwnProperty("flipY")&&this.setFlipY(t.flipY),t.hasOwnProperty("color")&&this.setColor(t.color),t.hasOwnProperty("tintEffect")&&this.setTintEffect(t.tintEffect)),this}}]),s}(),et={webglRender:function(t,e,i,r,s,n,h,a){var o=this._width,u=this._height,l=o*this.originX,c=u*this.originY,f=this.x-r,d=this.y-s,p=1,y=1;this.flipX&&(f+=o-2*l,p=-1),this.flipY&&(d+=u-2*c,y=-1),J.applyITRS(f,d,this.rotation,this.scaleX*p,this.scaleY*y),e.multiply(J,J);var v=-l,g=-c,m=v+o,b=g+u,w=J.getXRound(v,g,a),P=J.getXRound(v,b,a),O=J.getXRound(m,b,a),k=J.getXRound(m,g,a),x=J.getYRound(v,g,a),_=J.getYRound(v,b,a),S=J.getYRound(m,b,a),j=J.getYRound(m,g,a),A=this.frame.u0,X=this.frame.v0,Y=this.frame.u1,D=this.frame.v1,R=q(this.color,this.alpha*i);t.batchQuad(this.parent,w,x,P,_,O,S,k,j,A,X,Y,D,R,R,R,R,this.tintEffect,n,h)},canvasRender:function(t,e,i,r){t.save();var s=this._width,n=this._height,h=s*this.originX,a=n*this.originY,o=this.x-h,u=this.y-a,l=1,c=1;this.flipX&&(o+=s,l=-1),this.flipY&&(u+=n,c=-1),r&&(o=Math.round(o),u=Math.round(u)),t.translate(o,u),t.rotate(this.rotation),t.scale(this.scaleX*l,this.scaleY*c);var f=this.frame;t.drawImage(f.source.image,f.cutX,f.cutY,s,n,0,0,s,n),t.restore()}};Object.assign(tt.prototype,et);function it(t,e){"string"==typeof e&&(e={frame:e});var i=t.poolManager?t.poolManager.allocate("image"):null;return null===i?i=new tt(t):i.setParent(t).setActive(),i.modifyPorperties(e),t.addChild(i),i}var rt={_drawImage:function(t,e,i,r,s,n){it(this,{frame:e,x:i,y:r,width:s,height:n})},_drawTileSprite:function(t,e,i,r,s,n){var h=this.texture.get(e),a=h.width,o=h.height,u=Math.floor(s/a),l=Math.floor(n/o);i+=(s-u*a)/2,r+=(n-l*o)/2;for(var c=0;c<u;c++)for(var f=0;f<l;f++)it(this,{frame:e,x:i+c*a,y:r+f*o})}},st=function(){h(s,C(X,"rexNinePatch2"));var t=l(s);function s(){return g(this,s),t.apply(this,arguments)}return n(s,[{key:"setTexture",value:function(t,e,i,r){return f.call(this,t,"__BASE"),this.columns&&u(a(s.prototype),"setTexture",this).call(this,t,e,i,r),this}}]),s}();function nt(t,e,i,r,s,n,h,a,o){var u=new st(this.scene,t,e,i,r,s,n,h,a,o);return this.scene.add.existing(u),u}Object.assign(st.prototype,rt);var ht=Phaser.GameObjects.BuildGameObject;function at(t,e){void 0===t&&(t={}),void 0!==e&&(t.add=e);var i=new st(this.scene,t);return ht(this.scene,i,t),i}function ot(t){return null==t||""===t||0===t.length}var ut=function(){h(r,Phaser.Plugins.BasePlugin);var i=l(r);function r(t){var e;return g(this,r),e=i.call(this,t),t.registerGameObject("rexNinePatch2",nt,at),e}return n(r,[{key:"start",value:function(){this.game.events.on("destroy",this.destroy,this)}}]),r}();return function(t,e,i){if("object"===_(t)){if(ot(e)){if(null==i)return;"object"===_(i)&&(t=i)}else{"string"==typeof e&&(e=e.split("."));var r=e.pop();(function(t,e,i){var r=t;if(!ot(e)){var s;"string"==typeof e&&(e=e.split("."));for(var n=0,h=e.length;n<h;n++){var a;if(null==r[s=e[n]]||"object"!==_(r[s]))a=n!==h-1||void 0===i?{}:i,r[s]=a;r=r[s]}}return r})(t,e)[r]=i}}}(window,"RexPlugins.GameObjects.NinePatch2",st),ut});
