!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).rextextzoneplugin=e()}(this,function(){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function t(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function f(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=o(n);if(r){var i=o(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return u(this,t)}}var h=Phaser.Display.Color,e={rgbaToColor32:function(t,e,i,n){return n<<24|t<<16|e<<8|i},color32ToColorInt:function(t){return 16777215&t},color32ToAlpha:function(t){return t>>>24},color32ToColorObject:function(t,e){var i=t>>16&255,n=t>>8&255,r=255&t,o=t>>24&255;return void 0===e?e=new h(i,r,n,o):e.setTo(i,r,n,o),e}},c=function(){function n(t,e,i){r(this,n),void 0===e&&(e=0),void 0===i&&(i=e),this.width=e,this.height=i,this.buffer=new t(e*i)}return t(n,[{key:"getOffset",value:function(t,e){return e*this.width+t}},{key:"get",value:function(t,e){var i;return i=2===arguments.length?this.getOffset(t,e):t,this.buffer.get(i)}},{key:"set",value:function(t,e,i){var n;return 3===arguments.length?n=this.getOffset(t,e):(n=t,i=e),this.buffer.set(n,i),this}},{key:"fill",value:function(t,e,i,n,r,o,s){if("number"==typeof t){var u=t;this.buffer.fill(u)}else{void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=t.width-e),void 0===r&&(r=t.height-i),this.resize(n,r);for(var f,h=t.getContext("2d").getImageData(e,i,n,r).data,a=0,c=h.length/4;a<c;a++)f=4*a,u=s?o.call(s,h,f):o(h,f),this.set(a,u)}return this}},{key:"clear",value:function(){return this.fill(0),this}},{key:"resize",value:function(t,e){return this.width===t&&this.height===e||(this.width=t,this.height=e,this.buffer.resize(t*e)),this}},{key:"forEach",value:function(t,e,i){var n;void 0===i&&(i=!1);for(var r=0,o=this.height;r<o;r++)for(var s=0,u=this.width;s<u;s++)n=this.get(s,r),i&&(0===n||!1===n)||(e?t.call(e,n,s,r,this):t(n,s,r,this));return this}},{key:"forEachNonZero",value:function(t,e){return this.forEach(t,e,!0),this}}]),n}();Object.assign(c.prototype,e);function l(t,e){return 0<t[e+3]}function a(t,e){return i=t.canvas,u=v,f=l,a=e,(h=s=o=r=n=void 0)===n&&(n=0),void 0===r&&(r=0),void 0===o&&(o=i.width-n),void 0===s&&(s=i.height-r),void 0===a&&(a=new c(u,o,s)),a.fill(i,n,r,o,s,f,h),a;var i,n,r,o,s,u,f,h,a}var v=function(){function e(t){r(this,e),this.resize(t)}return t(e,[{key:"get",value:function(t){var e=t>>3,i=1<<t%8;return 0<(this._bin[e]&i)}},{key:"set",value:function(t,e){var i=t>>3,n=1<<t%8;return e?this._bin[i]|=n:(n^=255,this._bin[i]&=n),this}},{key:"fill",value:function(t){t=t?255:0;for(var e=0,i=this._rows;e<i;e++)this._bin[e]=t;return this}},{key:"resize",value:function(t){var e=1+(t>>3);return e!==this._rows&&(this._rows=e,this._buf=new ArrayBuffer(this._rows),this._bin=new Uint8Array(this._buf)),this}}]),e}(),d=Phaser.Utils.Array.GetRandom,y=Phaser.Utils.Objects.GetValue,p=function(){function i(t,e){r(this,i),this.data=[],this.setTextObject(t,e)}return t(i,[{key:"setTextObject",value:function(t,e){var i=a(t);this.width=i.width,this.height=i.height;var n=this.width,r=this.data;r.length=0,i.forEachNonZero(function(t,e,i){r.push(i*n+e)});var o=y(e,"offsetX",t.displayOriginX),s=y(e,"offsetY",t.displayOriginY);return this.setOffset(o,s),this}},{key:"setOffset",value:function(t,e){if("number"!=typeof t){var i=t;t=i.displayOriginX,e=i.displayOriginY}return this.offsetX=t,this.offsetY=e,this}},{key:"contains",value:function(t,e){return t=Math.floor(t+this.offsetX),e=Math.floor(e+this.offsetY),-1!==this.data.indexOf(e*this.width+t)}},{key:"getRandomPoint",value:function(t){if(void 0===t&&(t={}),0<this.data.length){var e=d(this.data),i=e%this.width,n=(e-i)/this.width;t.x=i-this.offsetX,t.y=n-this.offsetY}else t.x=0,t.y=0;return t}},{key:"pointsCount",get:function(){return this.bitMapList.length}}]),i}();return function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(i,Phaser.Plugins.BasePlugin);var e=f(i);function i(t){return r(this,i),e.call(this,t)}return t(i,[{key:"start",value:function(){this.game.events.on("destroy",this.destroy,this)}},{key:"add",value:function(t){return new p(t)}}]),i}()});
