!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).rextexttranslationplugin=t()}(void 0,function(){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function e(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function t(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&n(e,t)}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function n(e,t){return(n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(r){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=a(r);if(o){var n=a(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return s(e)}(this,e)}}function c(){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=a(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function l(e,t){var n;return(n=e)&&"function"==typeof n?t={config:{callback:e,scope:t}}:g(e)?(t=e).hasOwnProperty("config")||(t={config:t}):t={key:e,config:t},this.addFile(new h(this,t)),this}var f=Phaser.Loader.FILE_POPULATED,p=Phaser.Utils.String.UUID,h=function(){t(r,Phaser.Loader.File);var n=u(r);function r(e,t){return i(this,r),t.hasOwnProperty("type")||(t.type="await"),t.hasOwnProperty("url")||(t.url=""),t.hasOwnProperty("key")||(t.key=p()),n.call(this,e,t)}return e(r,[{key:"load",value:function(){if(this.state===f)this.loader.nextFile(this,!0);else{var e=this.config,t=e.callback,n=e.scope,r=this.onLoad.bind(this),o=this.onError.bind(this);t?n?t.call(n,r,o):t(r,o):this.onLoad()}}},{key:"onLoad",value:function(){this.loader.nextFile(this,!0)}},{key:"onError",value:function(){this.loader.nextFile(this,!1)}}]),r}(),g=Phaser.Utils.Objects.IsPlainObject;function V(e){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e){var t=function(e,t){if("object"!==V(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);var r=n.call(e,t||"default");if("object"!==V(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===V(t)?t:String(t)}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,v(r.key),r)}}function m(e,t,n){return t&&y(e.prototype,t),n&&y(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e,t){return(O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function k(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&O(e,t)}function w(e,t){if(t&&("object"===V(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return b(e)}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t,n){return(t=v(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function j(e){return function(e){if(Array.isArray(e))return e}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return P(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?P(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function E(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?L(Object(n),!0).forEach(function(e){S(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}Phaser.Loader.FileTypesManager.register("rexAwait",l);var R={type:"logger",log:function(e){this.output("log",e)},warn:function(e){this.output("warn",e)},error:function(e){this.output("error",e)},output:function(e,t){console&&console[e]&&console[e].apply(console,t)}};function N(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};d(this,N),this.init(e,t)}var C=new(m(N,[{key:"init",value:function(e,t){var n=1<arguments.length&&void 0!==t?t:{};this.prefix=n.prefix||"i18next:",this.logger=e||R,this.options=n,this.debug=n.debug}},{key:"setDebug",value:function(e){this.debug=e}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"log","",!0)}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","",!0)}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"error","")}},{key:"deprecate",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(e,t,n,r){return r&&!this.debug?null:("string"==typeof e[0]&&(e[0]="".concat(n).concat(this.prefix," ").concat(e[0])),this.logger[t](e))}},{key:"create",value:function(e){return new N(this.logger,E(E({},{prefix:"".concat(this.prefix,":").concat(e,":")}),this.options))}},{key:"clone",value:function(e){return(e=e||this.options).prefix=e.prefix||this.prefix,new N(this.logger,e)}}]),N),D=(m(T,[{key:"on",value:function(e,t){var n=this;return e.split(" ").forEach(function(e){n.observers[e]=n.observers[e]||[],n.observers[e].push(t)}),this}},{key:"off",value:function(e,t){this.observers[e]&&(t?this.observers[e]=this.observers[e].filter(function(e){return e!==t}):delete this.observers[e])}},{key:"emit",value:function(t){for(var e=arguments.length,n=new Array(1<e?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];this.observers[t]&&[].concat(this.observers[t]).forEach(function(e){e.apply(void 0,n)}),this.observers["*"]&&[].concat(this.observers["*"]).forEach(function(e){e.apply(e,[t].concat(n))})}}]),T);function T(){d(this,T),this.observers={}}function I(){var n,r,e=new Promise(function(e,t){n=e,r=t});return e.resolve=n,e.reject=r,e}function _(e){return null==e?"":""+e}function F(e,t,n){function r(e){return e&&-1<e.indexOf("###")?e.replace(/###/g,"."):e}function o(){return!e||"string"==typeof e}for(var i="string"!=typeof t?[].concat(t):t.split(".");1<i.length;){if(o())return{};var a=r(i.shift());!e[a]&&n&&(e[a]=new n),e=Object.prototype.hasOwnProperty.call(e,a)?e[a]:{}}return o()?{}:{obj:e,k:r(i.shift())}}function A(e,t,n){var r=F(e,t,Object);r.obj[r.k]=n}function U(e,t){var n=F(e,t),r=n.obj,o=n.k;if(r)return r[o]}function M(e,t,n){var r=U(e,n);return void 0!==r?r:U(t,n)}function H(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var q={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function K(e){return"string"==typeof e?e.replace(/[&<>"'\/]/g,function(e){return q[e]}):e}var B="undefined"!=typeof window&&window.navigator&&void 0===window.navigator.userAgentData&&window.navigator.userAgent&&-1<window.navigator.userAgent.indexOf("MSIE"),J=[" ",",","?","!",";"];function z(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function X(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?z(Object(n),!0).forEach(function(e){S(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function $(r){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=x(r);if(o){var n=x(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return w(this,e)}}var W=function(){k(o,D);var r=$(o);function o(e){var t,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};return d(this,o),t=r.call(this),B&&D.call(b(t)),t.data=e||{},t.options=n,void 0===t.options.keySeparator&&(t.options.keySeparator="."),void 0===t.options.ignoreJSONStructure&&(t.options.ignoreJSONStructure=!0),t}return m(o,[{key:"addNamespaces",value:function(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}},{key:"removeNamespaces",value:function(e){var t=this.options.ns.indexOf(e);-1<t&&this.options.ns.splice(t,1)}},{key:"getResource",value:function(e,t,n,r){var o=3<arguments.length&&void 0!==r?r:{},i=void 0!==o.keySeparator?o.keySeparator:this.options.keySeparator,a=void 0!==o.ignoreJSONStructure?o.ignoreJSONStructure:this.options.ignoreJSONStructure,s=[e,t];n&&"string"!=typeof n&&(s=s.concat(n)),n&&"string"==typeof n&&(s=s.concat(i?n.split(i):n)),-1<e.indexOf(".")&&(s=e.split("."));var u=U(this.data,s);return u||!a||"string"!=typeof n?u:function e(t,n,r){var o=2<arguments.length&&void 0!==r?r:".";if(t){if(t[n])return t[n];for(var i=n.split(o),a=t,s=0;s<i.length;++s){if(!a)return;if("string"==typeof a[i[s]]&&s+1<i.length)return;if(void 0===a[i[s]]){for(var u=2,c=i.slice(s,s+u).join(o),l=a[c];void 0===l&&i.length>s+u;)u++,l=a[c=i.slice(s,s+u).join(o)];if(void 0===l)return;if(null===l)return null;if(n.endsWith(c)){if("string"==typeof l)return l;if(c&&"string"==typeof l[c])return l[c]}var f=i.slice(s+u).join(o);return f?e(l,f,o):void 0}a=a[i[s]]}return a}}(this.data&&this.data[e]&&this.data[e][t],n,i)}},{key:"addResource",value:function(e,t,n,r,o){var i=4<arguments.length&&void 0!==o?o:{silent:!1},a=this.options.keySeparator;void 0===a&&(a=".");var s=[e,t];n&&(s=s.concat(a?n.split(a):n)),-1<e.indexOf(".")&&(r=t,t=(s=e.split("."))[1]),this.addNamespaces(t),A(this.data,s,r),i.silent||this.emit("added",e,t,n,r)}},{key:"addResources",value:function(e,t,n,r){var o=3<arguments.length&&void 0!==r?r:{silent:!1};for(var i in n)"string"!=typeof n[i]&&"[object Array]"!==Object.prototype.toString.apply(n[i])||this.addResource(e,t,i,n[i],{silent:!0});o.silent||this.emit("added",e,t,n)}},{key:"addResourceBundle",value:function(e,t,n,r,o,i){var a=5<arguments.length&&void 0!==i?i:{silent:!1},s=[e,t];-1<e.indexOf(".")&&(r=n,n=t,t=(s=e.split("."))[1]),this.addNamespaces(t);var u=U(this.data,s)||{};r?function e(t,n,r){for(var o in n)"__proto__"!==o&&"constructor"!==o&&(o in t?"string"==typeof t[o]||t[o]instanceof String||"string"==typeof n[o]||n[o]instanceof String?r&&(t[o]=n[o]):e(t[o],n[o],r):t[o]=n[o]);return t}(u,n,o):u=X(X({},u),n),A(this.data,s,u),a.silent||this.emit("added",e,t,n)}},{key:"removeResourceBundle",value:function(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}},{key:"hasResourceBundle",value:function(e,t){return void 0!==this.getResource(e,t)}},{key:"getResourceBundle",value:function(e,t){return t=t||this.options.defaultNS,"v1"===this.options.compatibilityAPI?X(X({},{}),this.getResource(e,t)):this.getResource(e,t)}},{key:"getDataByLanguage",value:function(e){return this.data[e]}},{key:"hasLanguageSomeTranslations",value:function(e){var t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(function(e){return t[e]&&0<Object.keys(t[e]).length})}},{key:"toJSON",value:function(){return this.data}}]),o}(),G={processors:{},addPostProcessor:function(e){this.processors[e.name]=e},handle:function(e,t,n,r,o){var i=this;return e.forEach(function(e){i.processors[e]&&(t=i.processors[e].process(t,n,r,o))}),t}};function Y(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function Q(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Y(Object(n),!0).forEach(function(e){S(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function Z(r){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=x(r);if(o){var n=x(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return w(this,e)}}var ee={},te=function(){k(M,D);var a=Z(M);function M(e){var t,n,r,o,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return d(this,M),t=a.call(this),B&&D.call(b(t)),n=["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],r=e,o=b(t),n.forEach(function(e){r[e]&&(o[e]=r[e])}),t.options=i,void 0===t.options.keySeparator&&(t.options.keySeparator="."),t.logger=C.create("translator"),t}return m(M,[{key:"changeLanguage",value:function(e){e&&(this.language=e)}},{key:"exists",value:function(e,t){var n=1<arguments.length&&void 0!==t?t:{interpolation:{}};if(null==e)return!1;var r=this.resolve(e,n);return r&&void 0!==r.res}},{key:"extractFromKey",value:function(e,t){var n=void 0!==t.nsSeparator?t.nsSeparator:this.options.nsSeparator;void 0===n&&(n=":");var r=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator,o=t.ns||this.options.defaultNS||[],i=n&&-1<e.indexOf(n),a=!(this.options.userDefinedKeySeparator||t.keySeparator||this.options.userDefinedNsSeparator||t.nsSeparator||function(e,t,n){t=t||"",n=n||"";var r=J.filter(function(e){return t.indexOf(e)<0&&n.indexOf(e)<0});if(0===r.length)return 1;var o=new RegExp("(".concat(r.map(function(e){return"?"===e?"\\?":e}).join("|"),")")),i=!o.test(e);if(!i){var a=e.indexOf(n);0<a&&!o.test(e.substring(0,a))&&(i=!0)}return i}(e,n,r));if(i&&!a){var s=e.match(this.interpolator.nestingRegexp);if(s&&0<s.length)return{key:e,namespaces:o};var u=e.split(n);(n!==r||n===r&&-1<this.options.ns.indexOf(u[0]))&&(o=u.shift()),e=u.join(r)}return"string"==typeof o&&(o=[o]),{key:e,namespaces:o}}},{key:"translate",value:function(e,o,t){var i=this;if("object"!==V(o)&&this.options.overloadTranslationOptionHandler&&(o=this.options.overloadTranslationOptionHandler(arguments)),o=o||{},null==e)return"";Array.isArray(e)||(e=[String(e)]);var n=void 0!==o.returnDetails?o.returnDetails:this.options.returnDetails,r=void 0!==o.keySeparator?o.keySeparator:this.options.keySeparator,a=this.extractFromKey(e[e.length-1],o),s=a.key,u=a.namespaces,c=u[u.length-1],l=o.lng||this.language,f=o.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(l&&"cimode"===l.toLowerCase()){if(f){var p=o.nsSeparator||this.options.nsSeparator;return n?(h.res="".concat(c).concat(p).concat(s),h):"".concat(c).concat(p).concat(s)}return n?(h.res=s,h):s}var h=this.resolve(e,o),g=h&&h.res,d=h&&h.usedKey||s,v=h&&h.exactUsedKey||s,y=Object.prototype.toString.apply(g),m=void 0!==o.joinArrays?o.joinArrays:this.options.joinArrays,b=!this.i18nFormat||this.i18nFormat.handleAsObject;if(b&&g&&("string"!=typeof g&&"boolean"!=typeof g&&"number"!=typeof g)&&["[object Number]","[object Function]","[object RegExp]"].indexOf(y)<0&&("string"!=typeof m||"[object Array]"!==y)){if(!o.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");var O=this.options.returnedObjectHandler?this.options.returnedObjectHandler(d,g,Q(Q({},o),{},{ns:u})):"key '".concat(s," (").concat(this.language,")' returned an object instead of string.");return n?(h.res=O,h):O}if(r){var k="[object Array]"===y,w=k?[]:{},x=k?v:d;for(var S in g)if(Object.prototype.hasOwnProperty.call(g,S)){var P="".concat(x).concat(r).concat(S);w[S]=this.translate(P,Q(Q({},o),{joinArrays:!1,ns:u})),w[S]===P&&(w[S]=g[S])}g=w}}else if(b&&"string"==typeof m&&"[object Array]"===y)g=(g=g.join(m))&&this.extendTranslation(g,e,o,t);else{var j=!1,L=!1,E=void 0!==o.count&&"string"!=typeof o.count,R=M.hasDefaultValue(o),N=E?this.pluralResolver.getSuffix(l,o.count,o):"",C=o["defaultValue".concat(N)]||o.defaultValue;!this.isValidLookup(g)&&R&&(j=!0,g=C),this.isValidLookup(g)||(L=!0,g=s);var D=(o.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&L?void 0:g,T=R&&C!==g&&this.options.updateMissing;if(L||j||T){if(this.logger.log(T?"updateKey":"missingKey",l,c,s,T?C:g),r){var I=this.resolve(s,Q(Q({},o),{},{keySeparator:!1}));I&&I.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}var _=[],F=this.languageUtils.getFallbackCodes(this.options.fallbackLng,o.lng||this.language);if("fallback"===this.options.saveMissingTo&&F&&F[0])for(var A=0;A<F.length;A++)_.push(F[A]);else"all"===this.options.saveMissingTo?_=this.languageUtils.toResolveHierarchy(o.lng||this.language):_.push(o.lng||this.language);function U(e,t,n){var r=R&&n!==g?n:D;i.options.missingKeyHandler?i.options.missingKeyHandler(e,c,t,r,T,o):i.backendConnector&&i.backendConnector.saveMissing&&i.backendConnector.saveMissing(e,c,t,r,T,o),i.emit("missingKey",e,c,t,g)}this.options.saveMissing&&(this.options.saveMissingPlurals&&E?_.forEach(function(t){i.pluralResolver.getSuffixes(t,o).forEach(function(e){U([t],s+e,o["defaultValue".concat(e)]||C)})}):U(_,s,C))}g=this.extendTranslation(g,e,o,h,t),L&&g===s&&this.options.appendNamespaceToMissingKey&&(g="".concat(c,":").concat(s)),(L||j)&&this.options.parseMissingKeyHandler&&(g="v1"!==this.options.compatibilityAPI?this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?"".concat(c,":").concat(s):s,j?g:void 0):this.options.parseMissingKeyHandler(g))}return n?(h.res=g,h):g}},{key:"extendTranslation",value:function(e,r,o,t,i){var a=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,Q(Q({},this.options.interpolation.defaultVariables),o),t.usedLng,t.usedNS,t.usedKey,{resolved:t});else if(!o.skipInterpolation){o.interpolation&&this.interpolator.init(Q(Q({},o),{interpolation:Q(Q({},this.options.interpolation),o.interpolation)}));var n,s="string"==typeof e&&(o&&o.interpolation&&void 0!==o.interpolation.skipOnVariables?o.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);if(s){var u=e.match(this.interpolator.nestingRegexp);n=u&&u.length}var c=o.replace&&"string"!=typeof o.replace?o.replace:o;if(this.options.interpolation.defaultVariables&&(c=Q(Q({},this.options.interpolation.defaultVariables),c)),e=this.interpolator.interpolate(e,c,o.lng||this.language,o),s){var l=e.match(this.interpolator.nestingRegexp);n<(l&&l.length)&&(o.nest=!1)}!1!==o.nest&&(e=this.interpolator.nest(e,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i&&i[0]===t[0]&&!o.context?(a.logger.warn("It seems you are nesting recursively key: ".concat(t[0]," in key: ").concat(r[0])),null):a.translate.apply(a,t.concat([r]))},o)),o.interpolation&&this.interpolator.reset()}var f=o.postProcess||this.options.postProcess,p="string"==typeof f?[f]:f;return null!=e&&p&&p.length&&!1!==o.applyPostProcessor&&(e=G.handle(p,e,r,this.options&&this.options.postProcessPassResolved?Q({i18nResolved:t},o):o,this)),e}},{key:"resolve",value:function(e,t){var f,o,p,h,i,g=this,d=1<arguments.length&&void 0!==t?t:{};return"string"==typeof e&&(e=[e]),e.forEach(function(e){if(!g.isValidLookup(f)){var t=g.extractFromKey(e,d),s=t.key;o=s;var n=t.namespaces;g.options.fallbackNS&&(n=n.concat(g.options.fallbackNS));var u=void 0!==d.count&&"string"!=typeof d.count,c=u&&!d.ordinal&&0===d.count&&g.pluralResolver.shouldUseIntlApi(),l=void 0!==d.context&&("string"==typeof d.context||"number"==typeof d.context)&&""!==d.context,r=d.lngs?d.lngs:g.languageUtils.toResolveHierarchy(d.lng||g.language,d.fallbackLng);n.forEach(function(a){g.isValidLookup(f)||(i=a,!ee["".concat(r[0],"-").concat(a)]&&g.utils&&g.utils.hasLoadedNamespace&&!g.utils.hasLoadedNamespace(i)&&(ee["".concat(r[0],"-").concat(a)]=!0,g.logger.warn('key "'.concat(o,'" for languages "').concat(r.join(", "),'" won\'t get resolved as namespace "').concat(i,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),r.forEach(function(e){if(!g.isValidLookup(f)){h=e;var t,n=[s];if(g.i18nFormat&&g.i18nFormat.addLookupKeys)g.i18nFormat.addLookupKeys(n,s,e,a,d);else{var r;u&&(r=g.pluralResolver.getSuffix(e,d.count,d));var o="".concat(g.options.pluralSeparator,"zero");if(u&&(n.push(s+r),c&&n.push(s+o)),l){var i="".concat(s).concat(g.options.contextSeparator).concat(d.context);n.push(i),u&&(n.push(i+r),c&&n.push(i+o))}}for(;t=n.pop();)g.isValidLookup(f)||(p=t,f=g.getResource(e,a,t,d))}}))})}}),{res:f,usedKey:o,exactUsedKey:p,usedLng:h,usedNS:i}}},{key:"isValidLookup",value:function(e){return!(void 0===e||!this.options.returnNull&&null===e||!this.options.returnEmptyString&&""===e)}},{key:"getResource",value:function(e,t,n,r){var o=3<arguments.length&&void 0!==r?r:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,t,n,o):this.resourceStore.getResource(e,t,n,o)}}],[{key:"hasDefaultValue",value:function(e){var t="defaultValue";for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t===n.substring(0,t.length)&&void 0!==e[n])return!0;return!1}}]),M}();function ne(e){return e.charAt(0).toUpperCase()+e.slice(1)}var re=(m(oe,[{key:"getScriptPartFromCode",value:function(e){if(!e||e.indexOf("-")<0)return null;var t=e.split("-");return 2===t.length?null:(t.pop(),"x"===t[t.length-1].toLowerCase()?null:this.formatLanguageCode(t.join("-")))}},{key:"getLanguagePartFromCode",value:function(e){if(!e||e.indexOf("-")<0)return e;var t=e.split("-");return this.formatLanguageCode(t[0])}},{key:"formatLanguageCode",value:function(e){if("string"==typeof e&&-1<e.indexOf("-")){var t=["hans","hant","latn","cyrl","cans","mong","arab"],n=e.split("-");return this.options.lowerCaseLng?n=n.map(function(e){return e.toLowerCase()}):2===n.length?(n[0]=n[0].toLowerCase(),n[1]=n[1].toUpperCase(),-1<t.indexOf(n[1].toLowerCase())&&(n[1]=ne(n[1].toLowerCase()))):3===n.length&&(n[0]=n[0].toLowerCase(),2===n[1].length&&(n[1]=n[1].toUpperCase()),"sgn"!==n[0]&&2===n[2].length&&(n[2]=n[2].toUpperCase()),-1<t.indexOf(n[1].toLowerCase())&&(n[1]=ne(n[1].toLowerCase())),-1<t.indexOf(n[2].toLowerCase())&&(n[2]=ne(n[2].toLowerCase()))),n.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}},{key:"isSupportedCode",value:function(e){return"languageOnly"!==this.options.load&&!this.options.nonExplicitSupportedLngs||(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||-1<this.supportedLngs.indexOf(e)}},{key:"getBestMatchFromCodes",value:function(e){var n,r=this;return e?(e.forEach(function(e){if(!n){var t=r.formatLanguageCode(e);r.options.supportedLngs&&!r.isSupportedCode(t)||(n=t)}}),!n&&this.options.supportedLngs&&e.forEach(function(e){if(!n){var t=r.getLanguagePartFromCode(e);if(r.isSupportedCode(t))return n=t;n=r.options.supportedLngs.find(function(e){if(0===e.indexOf(t))return e})}}),n=n||this.getFallbackCodes(this.options.fallbackLng)[0]):null}},{key:"getFallbackCodes",value:function(e,t){if(!e)return[];if("function"==typeof e&&(e=e(t)),"string"==typeof e&&(e=[e]),"[object Array]"===Object.prototype.toString.apply(e))return e;if(!t)return e.default||[];var n=e[t];return(n=(n=(n=(n=n||e[this.getScriptPartFromCode(t)])||e[this.formatLanguageCode(t)])||e[this.getLanguagePartFromCode(t)])||e.default)||[]}},{key:"toResolveHierarchy",value:function(e,t){function n(e){e&&(r.isSupportedCode(e)?i.push(e):r.logger.warn("rejecting language code not found in supportedLngs: ".concat(e)))}var r=this,o=this.getFallbackCodes(t||this.options.fallbackLng||[],e),i=[];return"string"==typeof e&&-1<e.indexOf("-")?("languageOnly"!==this.options.load&&n(this.formatLanguageCode(e)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&n(this.getScriptPartFromCode(e)),"currentOnly"!==this.options.load&&n(this.getLanguagePartFromCode(e))):"string"==typeof e&&n(this.formatLanguageCode(e)),o.forEach(function(e){i.indexOf(e)<0&&n(r.formatLanguageCode(e))}),i}}]),oe);function oe(e){d(this,oe),this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=C.create("languageUtils")}var ie=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],ae={1:function(e){return Number(1<e)},2:function(e){return Number(1!=e)},3:function(){return 0},4:function(e){return Number(e%10==1&&e%100!=11?0:2<=e%10&&e%10<=4&&(e%100<10||20<=e%100)?1:2)},5:function(e){return Number(0==e?0:1==e?1:2==e?2:3<=e%100&&e%100<=10?3:11<=e%100?4:5)},6:function(e){return Number(1==e?0:2<=e&&e<=4?1:2)},7:function(e){return Number(1==e?0:2<=e%10&&e%10<=4&&(e%100<10||20<=e%100)?1:2)},8:function(e){return Number(1==e?0:2==e?1:8!=e&&11!=e?2:3)},9:function(e){return Number(2<=e)},10:function(e){return Number(1==e?0:2==e?1:e<7?2:e<11?3:4)},11:function(e){return Number(1==e||11==e?0:2==e||12==e?1:2<e&&e<20?2:3)},12:function(e){return Number(e%10!=1||e%100==11)},13:function(e){return Number(0!==e)},14:function(e){return Number(1==e?0:2==e?1:3==e?2:3)},15:function(e){return Number(e%10==1&&e%100!=11?0:2<=e%10&&(e%100<10||20<=e%100)?1:2)},16:function(e){return Number(e%10==1&&e%100!=11?0:0!==e?1:2)},17:function(e){return Number(1==e||e%10==1&&e%100!=11?0:1)},18:function(e){return Number(0==e?0:1==e?1:2)},19:function(e){return Number(1==e?0:0==e||1<e%100&&e%100<11?1:10<e%100&&e%100<20?2:3)},20:function(e){return Number(1==e?0:0==e||0<e%100&&e%100<20?1:2)},21:function(e){return Number(e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0)},22:function(e){return Number(1==e?0:2==e?1:(e<0||10<e)&&e%10==0?2:3)}},se=["v1","v2","v3"],ue={zero:0,one:1,two:2,few:3,many:4,other:5};var ce=(m(le,[{key:"addRule",value:function(e,t){this.rules[e]=t}},{key:"getRule",value:function(e,t){var n=1<arguments.length&&void 0!==t?t:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(e,{type:n.ordinal?"ordinal":"cardinal"})}catch(e){return}return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}},{key:"needsPlural",value:function(e,t){var n=1<arguments.length&&void 0!==t?t:{},r=this.getRule(e,n);return this.shouldUseIntlApi()?r&&1<r.resolvedOptions().pluralCategories.length:r&&1<r.numbers.length}},{key:"getPluralFormsOfKey",value:function(e,t,n){var r=2<arguments.length&&void 0!==n?n:{};return this.getSuffixes(e,r).map(function(e){return"".concat(t).concat(e)})}},{key:"getSuffixes",value:function(t,e){var n=this,r=1<arguments.length&&void 0!==e?e:{},o=this.getRule(t,r);return o?this.shouldUseIntlApi()?o.resolvedOptions().pluralCategories.sort(function(e,t){return ue[e]-ue[t]}).map(function(e){return"".concat(n.options.prepend).concat(e)}):o.numbers.map(function(e){return n.getSuffix(t,e,r)}):[]}},{key:"getSuffix",value:function(e,t,n){var r=2<arguments.length&&void 0!==n?n:{},o=this.getRule(e,r);return o?this.shouldUseIntlApi()?"".concat(this.options.prepend).concat(o.select(t)):this.getSuffixRetroCompatible(o,t):(this.logger.warn("no plural rule found for: ".concat(e)),"")}},{key:"getSuffixRetroCompatible",value:function(e,t){var n=this,r=e.noAbs?e.plurals(t):e.plurals(Math.abs(t)),o=e.numbers[r];function i(){return n.options.prepend&&o.toString()?n.options.prepend+o.toString():o.toString()}return this.options.simplifyPluralSuffix&&2===e.numbers.length&&1===e.numbers[0]&&(2===o?o="plural":1===o&&(o="")),"v1"===this.options.compatibilityJSON?1===o?"":"number"==typeof o?"_plural_".concat(o.toString()):i():"v2"===this.options.compatibilityJSON||this.options.simplifyPluralSuffix&&2===e.numbers.length&&1===e.numbers[0]?i():this.options.prepend&&r.toString()?this.options.prepend+r.toString():r.toString()}},{key:"shouldUseIntlApi",value:function(){return!se.includes(this.options.compatibilityJSON)}}]),le);function le(e){var n,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};d(this,le),this.languageUtils=e,this.options=t,this.logger=C.create("pluralResolver"),this.options.compatibilityJSON&&"v4"!==this.options.compatibilityJSON||"undefined"!=typeof Intl&&Intl.PluralRules||(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=(n={},ie.forEach(function(t){t.lngs.forEach(function(e){n[e]={numbers:t.nr,plurals:ae[t.fc]}})}),n)}function fe(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function pe(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?fe(Object(n),!0).forEach(function(e){S(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fe(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var he=(m(ge,[{key:"init",value:function(e){var t=0<arguments.length&&void 0!==e?e:{};t.interpolation||(t.interpolation={escapeValue:!0});var n=t.interpolation;this.escape=void 0!==n.escape?n.escape:K,this.escapeValue=void 0===n.escapeValue||n.escapeValue,this.useRawValueToEscape=void 0!==n.useRawValueToEscape&&n.useRawValueToEscape,this.prefix=n.prefix?H(n.prefix):n.prefixEscaped||"{{",this.suffix=n.suffix?H(n.suffix):n.suffixEscaped||"}}",this.formatSeparator=n.formatSeparator?n.formatSeparator:n.formatSeparator||",",this.unescapePrefix=n.unescapeSuffix?"":n.unescapePrefix||"-",this.unescapeSuffix=!this.unescapePrefix&&n.unescapeSuffix||"",this.nestingPrefix=n.nestingPrefix?H(n.nestingPrefix):n.nestingPrefixEscaped||H("$t("),this.nestingSuffix=n.nestingSuffix?H(n.nestingSuffix):n.nestingSuffixEscaped||H(")"),this.nestingOptionsSeparator=n.nestingOptionsSeparator?n.nestingOptionsSeparator:n.nestingOptionsSeparator||",",this.maxReplaces=n.maxReplaces?n.maxReplaces:1e3,this.alwaysFormat=void 0!==n.alwaysFormat&&n.alwaysFormat,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var e="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(e,"g");var t="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(t,"g");var n="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(n,"g")}},{key:"interpolate",value:function(o,i,a,s){var u,c,l,f=this,p=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function t(e){return e.replace(/\$/g,"$$$$")}function h(e){if(e.indexOf(f.formatSeparator)<0){var t=M(i,p,e);return f.alwaysFormat?f.format(t,void 0,a,pe(pe(pe({},s),i),{},{interpolationkey:e})):t}var n=e.split(f.formatSeparator),r=n.shift().trim(),o=n.join(f.formatSeparator).trim();return f.format(M(i,p,r),o,a,pe(pe(pe({},s),i),{},{interpolationkey:r}))}this.resetRegExp();var g=s&&s.missingInterpolationHandler||this.options.missingInterpolationHandler,d=s&&s.interpolation&&void 0!==s.interpolation.skipOnVariables?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:function(e){return t(e)}},{regex:this.regexp,safeValue:function(e){return f.escapeValue?t(f.escape(e)):t(e)}}].forEach(function(e){for(l=0;u=e.regex.exec(o);){var t=u[1].trim();if(void 0===(c=h(t)))if("function"==typeof g){var n=g(o,u,s);c="string"==typeof n?n:""}else if(s&&s.hasOwnProperty(t))c="";else{if(d){c=u[0];continue}f.logger.warn("missed to pass in variable ".concat(t," for interpolating ").concat(o)),c=""}else"string"==typeof c||f.useRawValueToEscape||(c=_(c));var r=e.safeValue(c);if(o=o.replace(u[0],r),d?(e.regex.lastIndex+=c.length,e.regex.lastIndex-=u[0].length):e.regex.lastIndex=0,++l>=f.maxReplaces)break}}),o}},{key:"nest",value:function(e,t,n){var r,o,s,i=this,a=2<arguments.length&&void 0!==n?n:{};function u(t,e){var n=this.nestingOptionsSeparator;if(t.indexOf(n)<0)return t;var r=t.split(new RegExp("".concat(n,"[ ]*{"))),o="{".concat(r[1]);t=r[0];var i=(o=this.interpolate(o,s)).match(/'/g),a=o.match(/"/g);(i&&i.length%2==0&&!a||a.length%2!=0)&&(o=o.replace(/'/g,'"'));try{s=JSON.parse(o),e&&(s=pe(pe({},e),s))}catch(e){return this.logger.warn("failed parsing options string in nesting for key ".concat(t),e),"".concat(t).concat(n).concat(o)}return delete s.defaultValue,t}for(;r=this.nestingRegexp.exec(e);){var c=[];(s=(s=pe({},a)).replace&&"string"!=typeof s.replace?s.replace:s).applyPostProcessor=!1,delete s.defaultValue;var l=!1;if(-1!==r[0].indexOf(this.formatSeparator)&&!/{.*}/.test(r[1])){var f=r[1].split(this.formatSeparator).map(function(e){return e.trim()});r[1]=f.shift(),c=f,l=!0}if((o=t(u.call(this,r[1].trim(),s),s))&&r[0]===e&&"string"!=typeof o)return o;"string"!=typeof o&&(o=_(o)),o||(this.logger.warn("missed to resolve ".concat(r[1]," for nesting ").concat(e)),o=""),l&&(o=c.reduce(function(e,t){return i.format(e,t,a.lng,pe(pe({},a),{},{interpolationkey:r[1].trim()}))},o.trim())),e=e.replace(r[0],o),this.regexp.lastIndex=0}return e}}]),ge);function ge(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};d(this,ge),this.logger=C.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||function(e){return e},this.init(e)}function de(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function ve(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?de(Object(n),!0).forEach(function(e){S(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):de(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function ye(i){var a={};return function(e,t,n){var r=t+JSON.stringify(n),o=a[r];return o||(o=i(t,n),a[r]=o),o(e)}}var me=(m(be,[{key:"init",value:function(e,t){var n=(1<arguments.length&&void 0!==t?t:{interpolation:{}}).interpolation;this.formatSeparator=n.formatSeparator?n.formatSeparator:n.formatSeparator||","}},{key:"add",value:function(e,t){this.formats[e.toLowerCase().trim()]=t}},{key:"addCached",value:function(e,t){this.formats[e.toLowerCase().trim()]=ye(t)}},{key:"format",value:function(e,t,u,c){var l=this;return t.split(this.formatSeparator).reduce(function(e,t){var n=function(e){var t=e.toLowerCase().trim(),o={};if(-1<e.indexOf("(")){var n=e.split("(");t=n[0].toLowerCase().trim();var r=n[1].substring(0,n[1].length-1);"currency"===t&&r.indexOf(":")<0?o.currency||(o.currency=r.trim()):"relativetime"===t&&r.indexOf(":")<0?o.range||(o.range=r.trim()):r.split(";").forEach(function(e){if(e){var t=j(e.split(":")),n=t[0],r=t.slice(1).join(":").trim().replace(/^'+|'+$/g,"");o[n.trim()]||(o[n.trim()]=r),"false"===r&&(o[n.trim()]=!1),"true"===r&&(o[n.trim()]=!0),isNaN(r)||(o[n.trim()]=parseInt(r,10))}})}return{formatName:t,formatOptions:o}}(t),r=n.formatName,o=n.formatOptions;if(l.formats[r]){var i=e;try{var a=c&&c.formatParams&&c.formatParams[c.interpolationkey]||{},s=a.locale||a.lng||c.locale||c.lng||u;i=l.formats[r](e,s,ve(ve(ve({},o),c),a))}catch(e){l.logger.warn(e)}return i}return l.logger.warn("there was no format function for ".concat(r)),e},e)}}]),be);function be(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};d(this,be),this.logger=C.create("formatter"),this.options=e,this.formats={number:ye(function(e,t){var n=new Intl.NumberFormat(e,t);return function(e){return n.format(e)}}),currency:ye(function(e,t){var n=new Intl.NumberFormat(e,ve(ve({},t),{},{style:"currency"}));return function(e){return n.format(e)}}),datetime:ye(function(e,t){var n=new Intl.DateTimeFormat(e,ve({},t));return function(e){return n.format(e)}}),relativetime:ye(function(e,t){var n=new Intl.RelativeTimeFormat(e,ve({},t));return function(e){return n.format(e,t.range||"day")}}),list:ye(function(e,t){var n=new Intl.ListFormat(e,ve({},t));return function(e){return n.format(e)}})},this.init(e)}function Oe(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function ke(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Oe(Object(n),!0).forEach(function(e){S(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Oe(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function we(r){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=x(r);if(o){var n=x(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return w(this,e)}}var xe=function(){k(a,D);var i=we(a);function a(e,t,n){var r,o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};return d(this,a),r=i.call(this),B&&D.call(b(r)),r.backend=e,r.store=t,r.services=n,r.languageUtils=n.languageUtils,r.options=o,r.logger=C.create("backendConnector"),r.waitingReads=[],r.maxParallelReads=o.maxParallelReads||10,r.readingCalls=0,r.maxRetries=0<=o.maxRetries?o.maxRetries:5,r.retryTimeout=1<=o.retryTimeout?o.retryTimeout:350,r.state={},r.queue=[],r.backend&&r.backend.init&&r.backend.init(n,o.backend,o),r}return m(a,[{key:"queueLoad",value:function(e,t,o,n){var i=this,a={},s={},u={},c={};return e.forEach(function(n){var r=!0;t.forEach(function(e){var t="".concat(n,"|").concat(e);!o.reload&&i.store.hasResourceBundle(n,e)?i.state[t]=2:i.state[t]<0||(1===i.state[t]?void 0===s[t]&&(s[t]=!0):(i.state[t]=1,r=!1,void 0===s[t]&&(s[t]=!0),void 0===a[t]&&(a[t]=!0),void 0===c[e]&&(c[e]=!0)))}),r||(u[n]=!0)}),(Object.keys(a).length||Object.keys(s).length)&&this.queue.push({pending:s,pendingCount:Object.keys(s).length,loaded:{},errors:[],callback:n}),{toLoad:Object.keys(a),pending:Object.keys(s),toLoadLanguages:Object.keys(u),toLoadNamespaces:Object.keys(c)}}},{key:"loaded",value:function(c,l,e){var t=c.split("|"),f=t[0],p=t[1];l&&this.emit("failedLoading",f,p,l),e&&this.store.addResourceBundle(f,p,e),this.state[c]=l?-1:2;var h={};this.queue.forEach(function(n){var e,t,r,o,i,a,s,u;e=n.loaded,t=p,o=F(e,[f],Object),i=o.obj,a=o.k,i[a]=i[a]||[],r&&(i[a]=i[a].concat(t)),r||i[a].push(t),u=c,void 0!==(s=n).pending[u]&&(delete s.pending[u],s.pendingCount--),l&&n.errors.push(l),0!==n.pendingCount||n.done||(Object.keys(n.loaded).forEach(function(t){h[t]||(h[t]={});var e=n.loaded[t];e.length&&e.forEach(function(e){void 0===h[t][e]&&(h[t][e]=!0)})}),n.done=!0,n.errors.length?n.callback(n.errors):n.callback())}),this.emit("loaded",h),this.queue=this.queue.filter(function(e){return!e.done})}},{key:"read",value:function(r,o,i,e,t,n){var a=this,s=3<arguments.length&&void 0!==e?e:0,u=4<arguments.length&&void 0!==t?t:this.retryTimeout,c=5<arguments.length?n:void 0;if(!r.length)return c(null,{});if(this.readingCalls>=this.maxParallelReads)this.waitingReads.push({lng:r,ns:o,fcName:i,tried:s,wait:u,callback:c});else{this.readingCalls++;function l(e,t){if(a.readingCalls--,0<a.waitingReads.length){var n=a.waitingReads.shift();a.read(n.lng,n.ns,n.fcName,n.tried,n.wait,n.callback)}e&&t&&s<a.maxRetries?setTimeout(function(){a.read.call(a,r,o,i,s+1,2*u,c)},u):c(e,t)}var f=this.backend[i].bind(this.backend);if(2!==f.length)return f(r,o,l);try{var p=f(r,o);p&&"function"==typeof p.then?p.then(function(e){return l(null,e)}).catch(l):l(null,p)}catch(e){l(e)}}}},{key:"prepareLoading",value:function(e,t,n,r){var o=this,i=2<arguments.length&&void 0!==n?n:{},a=3<arguments.length?r:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),a&&a();"string"==typeof e&&(e=this.languageUtils.toResolveHierarchy(e)),"string"==typeof t&&(t=[t]);var s=this.queueLoad(e,t,i,a);if(!s.toLoad.length)return s.pending.length||a(),null;s.toLoad.forEach(function(e){o.loadOne(e)})}},{key:"load",value:function(e,t,n){this.prepareLoading(e,t,{},n)}},{key:"reload",value:function(e,t,n){this.prepareLoading(e,t,{reload:!0},n)}},{key:"loadOne",value:function(n,e){var r=this,o=1<arguments.length&&void 0!==e?e:"",t=n.split("|"),i=t[0],a=t[1];this.read(i,a,"read",void 0,void 0,function(e,t){e&&r.logger.warn("".concat(o,"loading namespace ").concat(a," for language ").concat(i," failed"),e),!e&&t&&r.logger.log("".concat(o,"loaded namespace ").concat(a," for language ").concat(i),t),r.loaded(n,e,t)})}},{key:"saveMissing",value:function(e,t,n,r,o,i,a){var s=5<arguments.length&&void 0!==i?i:{},u=6<arguments.length&&void 0!==a?a:function(){};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(t))this.logger.warn('did not save key "'.concat(n,'" as the namespace "').concat(t,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");else if(null!=n&&""!==n){if(this.backend&&this.backend.create){var c=ke(ke({},s),{},{isUpdate:o}),l=this.backend.create.bind(this.backend);if(l.length<6)try{var f;(f=5===l.length?l(e,t,n,r,c):l(e,t,n,r))&&"function"==typeof f.then?f.then(function(e){return u(null,e)}).catch(u):u(null,f)}catch(e){u(e)}else l(e,t,n,r,u,c)}e&&e[0]&&this.store.addResource(e[0],t,n,r)}}}]),a}();function Se(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(e){var t={};if("object"===V(e[1])&&(t=e[1]),"string"==typeof e[1]&&(t.defaultValue=e[1]),"string"==typeof e[2]&&(t.tDescription=e[2]),"object"===V(e[2])||"object"===V(e[3])){var n=e[3]||e[2];Object.keys(n).forEach(function(e){t[e]=n[e]})}return t},interpolation:{escapeValue:!0,format:function(e){return e},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function Pe(e){return"string"==typeof e.ns&&(e.ns=[e.ns]),"string"==typeof e.fallbackLng&&(e.fallbackLng=[e.fallbackLng]),"string"==typeof e.fallbackNS&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs&&e.supportedLngs.indexOf("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),e}function je(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function Le(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?je(Object(n),!0).forEach(function(e){S(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):je(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function Ee(r){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=x(r);if(o){var n=x(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return w(this,e)}}function Re(){}var Ne=function(){k(s,D);var o=Ee(s);function s(){var e,t,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r=1<arguments.length?arguments[1]:void 0;if(d(this,s),e=o.call(this),B&&D.call(b(e)),e.options=Pe(n),e.services={},e.logger=C,e.modules={external:[]},t=b(e),Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(function(e){"function"==typeof t[e]&&(t[e]=t[e].bind(t))}),r&&!e.isInitialized&&!n.isClone){if(!e.options.initImmediate)return e.init(n,r),w(e,b(e));setTimeout(function(){e.init(n,r)},0)}return e}return m(s,[{key:"init",value:function(e,t){var o=this,n=0<arguments.length&&void 0!==e?e:{},r=1<arguments.length?t:void 0;"function"==typeof n&&(r=n,n={}),!n.defaultNS&&!1!==n.defaultNS&&n.ns&&("string"==typeof n.ns?n.defaultNS=n.ns:n.ns.indexOf("translation")<0&&(n.defaultNS=n.ns[0]));var i=Se();function a(e){return e?"function"==typeof e?new e:e:null}if(this.options=Le(Le(Le({},i),this.options),Pe(n)),"v1"!==this.options.compatibilityAPI&&(this.options.interpolation=Le(Le({},i.interpolation),this.options.interpolation)),void 0!==n.keySeparator&&(this.options.userDefinedKeySeparator=n.keySeparator),void 0!==n.nsSeparator&&(this.options.userDefinedNsSeparator=n.nsSeparator),!this.options.isClone){var s;this.modules.logger?C.init(a(this.modules.logger),this.options):C.init(null,this.options),this.modules.formatter?s=this.modules.formatter:"undefined"!=typeof Intl&&(s=me);var u=new re(this.options);this.store=new W(this.options.resources,this.options);var c=this.services;c.logger=C,c.resourceStore=this.store,c.languageUtils=u,c.pluralResolver=new ce(u,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),!s||this.options.interpolation.format&&this.options.interpolation.format!==i.interpolation.format||(c.formatter=a(s),c.formatter.init(c,this.options),this.options.interpolation.format=c.formatter.format.bind(c.formatter)),c.interpolator=new he(this.options),c.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},c.backendConnector=new xe(a(this.modules.backend),c.resourceStore,c,this.options),c.backendConnector.on("*",function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];o.emit.apply(o,[e].concat(n))}),this.modules.languageDetector&&(c.languageDetector=a(this.modules.languageDetector),c.languageDetector.init&&c.languageDetector.init(c,this.options.detection,this.options)),this.modules.i18nFormat&&(c.i18nFormat=a(this.modules.i18nFormat),c.i18nFormat.init&&c.i18nFormat.init(this)),this.translator=new te(this.services,this.options),this.translator.on("*",function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];o.emit.apply(o,[e].concat(n))}),this.modules.external.forEach(function(e){e.init&&e.init(o)})}if(this.format=this.options.interpolation.format,r=r||Re,this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){var l=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);0<l.length&&"dev"!==l[0]&&(this.options.lng=l[0])}this.services.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined");["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(function(t){o[t]=function(){var e;return(e=o.store)[t].apply(e,arguments)}});["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(function(t){o[t]=function(){var e;return(e=o.store)[t].apply(e,arguments),o}});function f(){function e(e,t){o.isInitialized&&!o.initializedStoreOnce&&o.logger.warn("init: i18next is already initialized. You should call init just once!"),o.isInitialized=!0,o.options.isClone||o.logger.log("initialized",o.options),o.emit("initialized",o.options),p.resolve(t),r(e,t)}if(o.languages&&"v1"!==o.options.compatibilityAPI&&!o.isInitialized)return e(null,o.t.bind(o));o.changeLanguage(o.options.lng,e)}var p=I();return this.options.resources||!this.options.initImmediate?f():setTimeout(f,0),p}},{key:"loadResources",value:function(e,t){var n=this,r=1<arguments.length&&void 0!==t?t:Re,o="string"==typeof e?e:this.language;if("function"==typeof e&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if(o&&"cimode"===o.toLowerCase())return r();function i(e){e&&n.services.languageUtils.toResolveHierarchy(e).forEach(function(e){a.indexOf(e)<0&&a.push(e)})}var a=[];if(o)i(o);else this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(function(e){return i(e)});this.options.preload&&this.options.preload.forEach(function(e){return i(e)}),this.services.backendConnector.load(a,this.options.ns,function(e){e||n.resolvedLanguage||!n.language||n.setResolvedLanguage(n.language),r(e)})}else r(null)}},{key:"reloadResources",value:function(e,t,n){var r=I();return e=e||this.languages,t=t||this.options.ns,n=n||Re,this.services.backendConnector.reload(e,t,function(e){r.resolve(),n(e)}),r}},{key:"use",value:function(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===e.type&&(this.modules.backend=e),("logger"===e.type||e.log&&e.warn&&e.error)&&(this.modules.logger=e),"languageDetector"===e.type&&(this.modules.languageDetector=e),"i18nFormat"===e.type&&(this.modules.i18nFormat=e),"postProcessor"===e.type&&G.addPostProcessor(e),"formatter"===e.type&&(this.modules.formatter=e),"3rdParty"===e.type&&this.modules.external.push(e),this}},{key:"setResolvedLanguage",value:function(e){if(e&&this.languages&&!(-1<["cimode","dev"].indexOf(e)))for(var t=0;t<this.languages.length;t++){var n=this.languages[t];if(!(-1<["cimode","dev"].indexOf(n))&&this.store.hasLanguageSomeTranslations(n)){this.resolvedLanguage=n;break}}}},{key:"changeLanguage",value:function(t,o){var i=this;this.isLanguageChangingTo=t;var a=I();this.emit("languageChanging",t);function s(e){i.language=e,i.languages=i.services.languageUtils.toResolveHierarchy(e),i.resolvedLanguage=void 0,i.setResolvedLanguage(e)}function e(e){t||e||!i.services.languageDetector||(e=[]);var r="string"==typeof e?e:i.services.languageUtils.getBestMatchFromCodes(e);r&&(i.language||s(r),i.translator.language||i.translator.changeLanguage(r),i.services.languageDetector&&i.services.languageDetector.cacheUserLanguage&&i.services.languageDetector.cacheUserLanguage(r)),i.loadResources(r,function(e){var t,n;t=e,(n=r)?(s(n),i.translator.changeLanguage(n),i.isLanguageChangingTo=void 0,i.emit("languageChanged",n),i.logger.log("languageChanged",n)):i.isLanguageChangingTo=void 0,a.resolve(function(){return i.t.apply(i,arguments)}),o&&o(t,function(){return i.t.apply(i,arguments)})})}return t||!this.services.languageDetector||this.services.languageDetector.async?!t&&this.services.languageDetector&&this.services.languageDetector.async?0===this.services.languageDetector.detect.length?this.services.languageDetector.detect().then(e):this.services.languageDetector.detect(e):e(t):e(this.services.languageDetector.detect()),a}},{key:"getFixedT",value:function(e,t,u){function c(e,t){var n;if("object"!==V(t)){for(var r=arguments.length,o=new Array(2<r?r-2:0),i=2;i<r;i++)o[i-2]=arguments[i];n=l.options.overloadTranslationOptionHandler([e,t].concat(o))}else n=Le({},t);n.lng=n.lng||c.lng,n.lngs=n.lngs||c.lngs,n.ns=n.ns||c.ns,n.keyPrefix=n.keyPrefix||u||c.keyPrefix;var a,s=l.options.keySeparator||".";return a=n.keyPrefix&&Array.isArray(e)?e.map(function(e){return"".concat(n.keyPrefix).concat(s).concat(e)}):n.keyPrefix?"".concat(n.keyPrefix).concat(s).concat(e):e,l.t(a,n)}var l=this;return"string"==typeof e?c.lng=e:c.lngs=e,c.ns=t,c.keyPrefix=u,c}},{key:"t",value:function(){var e;return this.translator&&(e=this.translator).translate.apply(e,arguments)}},{key:"exists",value:function(){var e;return this.translator&&(e=this.translator).exists.apply(e,arguments)}},{key:"setDefaultNamespace",value:function(e){this.options.defaultNS=e}},{key:"hasLoadedNamespace",value:function(e,t){var r=this,n=1<arguments.length&&void 0!==t?t:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var o=this.resolvedLanguage||this.languages[0],i=!!this.options&&this.options.fallbackLng,a=this.languages[this.languages.length-1];if("cimode"===o.toLowerCase())return!0;function s(e,t){var n=r.services.backendConnector.state["".concat(e,"|").concat(t)];return-1===n||2===n}if(n.precheck){var u=n.precheck(this,s);if(void 0!==u)return u}return!!this.hasResourceBundle(o,e)||(!(this.services.backendConnector.backend&&(!this.options.resources||this.options.partialBundledLanguages))||!(!s(o,e)||i&&!s(a,e)))}},{key:"loadNamespaces",value:function(e,t){var n=this,r=I();return this.options.ns?("string"==typeof e&&(e=[e]),e.forEach(function(e){n.options.ns.indexOf(e)<0&&n.options.ns.push(e)}),this.loadResources(function(e){r.resolve(),t&&t(e)}),r):(t&&t(),Promise.resolve())}},{key:"loadLanguages",value:function(e,t){var n=I();"string"==typeof e&&(e=[e]);var r=this.options.preload||[],o=e.filter(function(e){return r.indexOf(e)<0});return o.length?(this.options.preload=r.concat(o),this.loadResources(function(e){n.resolve(),t&&t(e)}),n):(t&&t(),Promise.resolve())}},{key:"dir",value:function(e){if(!(e=e||(this.resolvedLanguage||(this.languages&&0<this.languages.length?this.languages[0]:this.language))))return"rtl";var t=this.services&&this.services.languageUtils||new re(Se());return-1<["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"].indexOf(t.getLanguagePartFromCode(e))||1<e.toLowerCase().indexOf("-arab")?"rtl":"ltr"}},{key:"cloneInstance",value:function(e,t){var n=this,r=0<arguments.length&&void 0!==e?e:{},o=1<arguments.length&&void 0!==t?t:Re,i=Le(Le(Le({},this.options),r),{isClone:!0}),a=new s(i);void 0===r.debug&&void 0===r.prefix||(a.logger=a.logger.clone(r));return["store","services","language"].forEach(function(e){a[e]=n[e]}),a.services=Le({},this.services),a.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},a.translator=new te(a.services,a.options),a.translator.on("*",function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];a.emit.apply(a,[e].concat(n))}),a.init(i,o),a.translator.options=a.options,a.translator.backendConnector.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},a}},{key:"toJSON",value:function(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}]),s}();S(Ne,"createInstance",function(){return new Ne(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},1<arguments.length?arguments[1]:void 0)});var Ce=Ne.createInstance();function De(e){return(De="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Ce.createInstance=Ne.createInstance,Ce.createInstance,Ce.dir,Ce.init,Ce.loadResources,Ce.reloadResources,Ce.use,Ce.changeLanguage,Ce.getFixedT,Ce.t,Ce.exists,Ce.setDefaultNamespace,Ce.hasLoadedNamespace,Ce.loadNamespaces,Ce.loadLanguages;var Te=[],Ie=Te.forEach,_e=Te.slice;function Fe(n){return Ie.call(_e.call(arguments,1),function(e){if(e)for(var t in e)void 0===n[t]&&(n[t]=e[t])}),n}function Ae(){return"function"==typeof XMLHttpRequest||"object"===("undefined"==typeof XMLHttpRequest?"undefined":De(XMLHttpRequest))}var Ue,Me="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};if("function"==typeof fetch&&(Ue="undefined"!=typeof global&&global.fetch?global.fetch:"undefined"!=typeof window&&window.fetch?window.fetch:fetch),"undefined"!=typeof require&&("undefined"==typeof window||void 0===window.document)){var Ve=Ue||require("cross-fetch");Ve.default&&(Ve=Ve.default),exports.default=Ve,module.exports=exports.default}var He,qe,Ke,Be=Object.freeze({__proto__:null});function Je(e){return(Je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}"function"==typeof fetch&&(He=void 0!==Me&&Me.fetch?Me.fetch:"undefined"!=typeof window&&window.fetch?window.fetch:fetch),Ae()&&(void 0!==Me&&Me.XMLHttpRequest?qe=Me.XMLHttpRequest:"undefined"!=typeof window&&window.XMLHttpRequest&&(qe=window.XMLHttpRequest)),"function"==typeof ActiveXObject&&(void 0!==Me&&Me.ActiveXObject?Ke=Me.ActiveXObject:"undefined"!=typeof window&&window.ActiveXObject&&(Ke=window.ActiveXObject)),He||!Be||qe||Ke||(He=Be),"function"!=typeof He&&(He=void 0);function ze(e,t){if(t&&"object"===Je(t)){var n="";for(var r in t)n+="&"+encodeURIComponent(r)+"="+encodeURIComponent(t[r]);if(!n)return e;e=e+(-1!==e.indexOf("?")?"&":"?")+n.slice(1)}return e}function Xe(e,t,n){He(e,t).then(function(t){if(!t.ok)return n(t.statusText||"Error",{status:t.status});t.text().then(function(e){n(null,{status:t.status,data:e})}).catch(n)}).catch(n)}function $e(e,t,n,r){return"function"==typeof n&&(r=n,n=void 0),r=r||function(){},He&&0!==t.indexOf("file:")?function(e,t,n,r){e.queryStringParams&&(t=ze(t,e.queryStringParams));var o=Fe({},"function"==typeof e.customHeaders?e.customHeaders():e.customHeaders);n&&(o["Content-Type"]="application/json");var i="function"==typeof e.requestOptions?e.requestOptions(n):e.requestOptions,a=Fe({method:n?"POST":"GET",body:n?e.stringify(n):void 0,headers:o},We?{}:i);try{Xe(t,a,r)}catch(e){if(!i||0===Object.keys(i).length||!e.message||e.message.indexOf("not implemented")<0)return r(e);try{Object.keys(i).forEach(function(e){delete a[e]}),Xe(t,a,r),We=!0}catch(e){r(e)}}}(e,t,n,r):Ae()||"function"==typeof ActiveXObject?function(e,t,n,r){n&&"object"===Je(n)&&(n=ze("",n).slice(1)),e.queryStringParams&&(t=ze(t,e.queryStringParams));try{var o;(o=qe?new qe:new Ke("MSXML2.XMLHTTP.3.0")).open(n?"POST":"GET",t,1),e.crossDomain||o.setRequestHeader("X-Requested-With","XMLHttpRequest"),o.withCredentials=!!e.withCredentials,n&&o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.overrideMimeType&&o.overrideMimeType("application/json");var i=e.customHeaders;if(i="function"==typeof i?i():i)for(var a in i)o.setRequestHeader(a,i[a]);o.onreadystatechange=function(){3<o.readyState&&r(400<=o.status?o.statusText:null,{status:o.status,data:o.responseText})},o.send(n)}catch(e){console&&console.log(e)}}(e,t,n,r):void r(new Error("No fetch and no xhr implementation found!"))}var We=!1;function Ge(e){return(Ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ye(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Qe(r.key),r)}}function Qe(e){var t=function(e,t){if("object"!==Ge(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);var r=n.call(e,t||"default");if("object"!==Ge(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===Ge(t)?t:String(t)}function Ze(){return{loadPath:"/locales/{{lng}}/{{ns}}.json",addPath:"/locales/add/{{lng}}/{{ns}}",allowMultiLoading:!1,parse:function(e){return JSON.parse(e)},stringify:JSON.stringify,parsePayload:function(e,t,n){return r={},i=n||"",(o=Qe(o=t))in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i,r;var r,o,i},request:$e,reloadInterval:"undefined"==typeof window&&36e5,customHeaders:{},queryStringParams:{},crossDomain:!1,withCredentials:!1,overrideMimeType:!1,requestOptions:{mode:"cors",credentials:"same-origin",cache:"default"}}}var et,tt,nt=(Ye((et=rt).prototype,[{key:"init",value:function(e,t,n){var r=this,o=1<arguments.length&&void 0!==t?t:{},i=2<arguments.length&&void 0!==n?n:{};this.services=e,this.options=Fe(o,this.options||{},Ze()),this.allOptions=i,this.services&&this.options.reloadInterval&&setInterval(function(){return r.reload()},this.options.reloadInterval)}},{key:"readMulti",value:function(e,t,n){this._readAny(e,e,t,t,n)}},{key:"read",value:function(e,t,n){this._readAny([e],e,[t],t,n)}},{key:"_readAny",value:function(n,r,o,i,a){var e,t,s=this,u=this.options.loadPath;"function"==typeof this.options.loadPath&&(u=this.options.loadPath(n,o)),(u=(t=e=u)&&"function"==typeof t.then?e:Promise.resolve(e)).then(function(e){if(!e)return a(null,{});var t=s.services.interpolator.interpolate(e,{lng:n.join("+"),ns:o.join("+")});s.loadUrl(t,a,r,i)})}},{key:"loadUrl",value:function(o,i,a,s){var u=this;this.options.request(this.options,o,void 0,function(e,t){if(t&&(500<=t.status&&t.status<600||!t.status))return i("failed loading "+o+"; status code: "+t.status,!0);if(t&&400<=t.status&&t.status<500)return i("failed loading "+o+"; status code: "+t.status,!1);if(!t&&e&&e.message&&-1<e.message.indexOf("Failed to fetch"))return i("failed loading "+o+": "+e.message,!0);if(e)return i(e,!1);var n,r;try{n="string"==typeof t.data?u.options.parse(t.data,a,s):t.data}catch(e){r="failed parsing "+o+" to json"}if(r)return i(r,!1);i(null,n)})}},{key:"create",value:function(r,o,e,t,i){var a=this;if(this.options.addPath){"string"==typeof r&&(r=[r]);var s=this.options.parsePayload(o,e,t),u=0,c=[],l=[];r.forEach(function(e){var t=a.options.addPath;"function"==typeof a.options.addPath&&(t=a.options.addPath(e,o));var n=a.services.interpolator.interpolate(t,{lng:e,ns:o});a.options.request(a.options,n,s,function(e,t){u+=1,c.push(e),l.push(t),u===r.length&&"function"==typeof i&&i(c,l)})})}}},{key:"reload",value:function(){var e=this,t=this.services,o=t.backendConnector,n=t.languageUtils,i=t.logger,r=o.language;if(!r||"cimode"!==r.toLowerCase()){function a(e){n.toResolveHierarchy(e).forEach(function(e){s.indexOf(e)<0&&s.push(e)})}var s=[];a(r),this.allOptions.preload&&this.allOptions.preload.forEach(function(e){return a(e)}),s.forEach(function(r){e.allOptions.ns.forEach(function(n){o.read(r,n,"read",null,null,function(e,t){e&&i.warn("loading namespace ".concat(n," for language ").concat(r," failed"),e),!e&&t&&i.log("loaded namespace ".concat(n," for language ").concat(r),t),o.loaded("".concat(r,"|").concat(n),e,t)})})})}}}]),tt&&Ye(et,tt),Object.defineProperty(et,"prototype",{writable:!1}),rt);function rt(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,rt),this.services=e,this.options=t,this.allOptions=n,this.type="backend",this.init(e,t,n)}nt.type="backend";function ot(e){return e instanceof ut}function it(e){return e instanceof ct}var at,st={setEventEmitter:function(e,t){return void 0===t&&(t=Phaser.Events.EventEmitter),this._privateEE=!0===e||void 0===e,this._eventEmitter=this._privateEE?new t:e,this},destroyEventEmitter:function(){return this._eventEmitter&&this._privateEE&&this._eventEmitter.shutdown(),this},getEventEmitter:function(){return this._eventEmitter},on:function(){return this._eventEmitter&&this._eventEmitter.on.apply(this._eventEmitter,arguments),this},once:function(){return this._eventEmitter&&this._eventEmitter.once.apply(this._eventEmitter,arguments),this},off:function(){return this._eventEmitter&&this._eventEmitter.off.apply(this._eventEmitter,arguments),this},emit:function(e){return this._eventEmitter&&e&&this._eventEmitter.emit.apply(this._eventEmitter,arguments),this},addListener:function(){return this._eventEmitter&&this._eventEmitter.addListener.apply(this._eventEmitter,arguments),this},removeListener:function(){return this._eventEmitter&&this._eventEmitter.removeListener.apply(this._eventEmitter,arguments),this},removeAllListeners:function(){return this._eventEmitter&&this._eventEmitter.removeAllListeners.apply(this._eventEmitter,arguments),this},listenerCount:function(){return this._eventEmitter?this._eventEmitter.listenerCount.apply(this._eventEmitter,arguments):0},listeners:function(){return this._eventEmitter?this._eventEmitter.listeners.apply(this._eventEmitter,arguments):[]},eventNames:function(){return this._eventEmitter?this._eventEmitter.eventNames.apply(this._eventEmitter,arguments):[]}},ut=Phaser.Scene,ct=Phaser.Game,lt=Phaser.Utils.Objects.GetValue,ft=function(){function n(e,t){i(this,n),this.setParent(e),this.isShutdown=!1,this.setEventEmitter(lt(t,"eventEmitter",!0)),this.parent&&(this.parent===this.scene?this.scene.sys.events.once("shutdown",this.onEnvDestroy,this):this.parent===this.game?this.game.events.once("shutdown",this.onEnvDestroy,this):this.parent.once&&this.parent.once("destroy",this.onParentDestroy,this))}return e(n,[{key:"shutdown",value:function(){this.isShutdown||(this.parent&&(this.parent===this.scene?this.scene.sys.events.off("shutdown",this.onEnvDestroy,this):this.parent===this.game?this.game.events.off("shutdown",this.onEnvDestroy,this):this.parent.once&&this.parent.off("destroy",this.onParentDestroy,this)),this.destroyEventEmitter(),this.parent=void 0,this.scene=void 0,this.game=void 0,this.isShutdown=!0)}},{key:"destroy",value:function(e){this.shutdown(e)}},{key:"onEnvDestroy",value:function(){this.destroy(!0)}},{key:"onParentDestroy",value:function(e,t){this.destroy(t)}},{key:"setParent",value:function(e){var t,n;return this.parent=e,this.scene=null==(t=e)||"object"!==r(t)?null:ot(t)?t:t.scene&&ot(t.scene)?t.scene:t.parent&&t.parent.scene&&ot(t.parent.scene)?t.parent.scene:null,this.game=null==(n=e)||"object"!==r(n)?null:it(n)?n:it(n.game)?n.game:ot(n)?n.sys.game:ot(n.scene)?n.scene.sys.game:void 0,this}}]),n}();Object.assign(ft.prototype,st);var pt=Phaser.Utils.Objects.GetValue,ht=function(){t(o,ft);var r=u(o);function o(e,t){var n;return i(this,o),(n=r.call(this,e,t)).resetFromJSON(t),n.onLanguageChanged=n.updateText.bind(s(n)),at.on("languageChanged",n.onLanguageChanged),n}return e(o,[{key:"resetFromJSON",value:function(e){return this.setSetTextCallback(pt(e,"setText",gt)),this.setInterpolation(pt(e,"interpolations")),this.setTranslationKey(pt(e,"translationKey","")),pt(e,"updateText",!0)&&this.updateText(),this}},{key:"shutdown",value:function(e){this.isShutdown||(at.off("languageChanged",this.onLanguageChanged),c(a(o.prototype),"shutdown",this).call(this,e))}},{key:"setSetTextCallback",value:function(e){return this.setTextCallback=e,this}},{key:"setInterpolation",value:function(e){return void 0===e&&(e={}),this.interpolations=e,this}},{key:"updateInterpolation",value:function(e,t){if("string"==typeof e)this.interpolations[e]=t;else{var n=e;for(e in n)this.interpolations[e]=n[e]}return this}},{key:"setTranslationKey",value:function(e){return this.translationKey=e,this}},{key:"updateText",value:function(){var e=at.t(this.translationKey,this.interpolations);return this.setTextCallback(this.parent,e),this}}],[{key:"setI18Next",value:function(e){at=e}}]),o}(),gt=function(e,t){e.setText(t)};return function(){t(r,Phaser.Plugins.BasePlugin);var n=u(r);function r(e){var t;return i(this,r),(t=n.call(this,e)).i18next=Ce,ht.setI18Next(Ce),t}return e(r,[{key:"start",value:function(){this.game.events.on("destroy",this.destroy,this)}},{key:"initI18Next",value:function(e,n){return l.call(e.load,function(e,t){Ce.use(nt).init(n,e)}),this}},{key:"add",value:function(e,t){return new ht(e,t)}},{key:"changeLanguage",value:function(e,t){return Ce.changeLanguage(e,t),this}},{key:"t",value:function(e,t){return Ce.t(e,t)}}]),r}()});
