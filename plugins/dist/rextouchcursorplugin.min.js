!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.rextouchcursorplugin=e():t.rextouchcursorplugin=e()}(window,function(){return function(t){var e={};function s(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,s),n.l=!0,n.exports}return s.m=t,s.c=e,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(i,n,function(e){return t[e]}.bind(null,n));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=29)}({12:function(t,e,s){"use strict";var i=s(2);const n=Phaser.Events.EventEmitter,r=Phaser.Utils.Objects.GetValue,o=Phaser.Math.Distance.Power;var h=class extends n{constructor(t,e){super(),this.gameObject=t,this.scene=Object(i.a)(t),this.gameObject.setInteractive(r(e,"inputConfig",void 0)),this.resetFromJSON(e),this.boot()}resetFromJSON(t){return this.isInTouched=!1,this.pointerId=void 0,this.x=void 0,this.y=void 0,this.localX=void 0,this.localY=void 0,this.preX=void 0,this.preY=void 0,this.setEnable(r(t,"enable",!0)),this}boot(){this.gameObject.on&&(this.gameObject.on("pointerdown",this.onPointIn,this),this.gameObject.on("pointerover",this.onPointIn,this),this.gameObject.on("pointerup",this.onPointOut,this),this.gameObject.on("pointerout",this.onPointOut,this),this.gameObject.on("pointermove",this.onPointerMove,this),this.gameObject.on("destroy",this.destroy,this))}shutdown(){super.shutdown(),this.gameObject=void 0,this.scene=void 0}destroy(){this.shutdown()}setEnable(t){return void 0===t&&(t=!0),this.enable===t?this:(this.enable=t,this.gameObject.input.enabled=t,t||(this.isInTouched=!1),this)}onPointIn(t,e,s){t.isDown&&void 0===this.pointerId&&(this.isInTouched=!0,this.pointerId=t.id,this.preX=t.x,this.preY=t.y,this.x=t.x,this.y=t.y,this.localX=e,this.localY=s,this.emit("touchstart",t,e,s))}onPointOut(t){this.pointerId===t.id&&(this.isInTouched=!1,this.pointerId=void 0,this.emit("touchend",t))}onPointerMove(t,e,s){t.isDown&&this.pointerId===t.id&&(this.preX=this.x,this.preY=this.y,this.x=t.x,this.y=t.y,this.localX=e,this.localY=s,this.emit("touchmove",t,e,s))}get dx(){return this.x-this.preX}get dy(){return this.y-this.preY}get dt(){return this.scene.sys.game.loop.delta}get speed(){return o(this.x,this.preX,this.y,this.preY)/(.001*this.dt)}};e.a=h},2:function(t,e,s){"use strict";const i=Phaser.Scene;e.a=function(t){return t instanceof i?t:t.scene&&t.scene instanceof i?t.scene:t.parent&&t.parent.scene&&t.parent.scene instanceof i?t.parent.scene:void 0}},29:function(t,e,s){"use strict";s.r(e);var i=s(12);const n=Phaser.Utils.Objects.GetValue,r=Phaser.Input.Keyboard.Key,o=Phaser.Math.RadToDeg;const h={"up&down":0,"left&right":1,"4dir":2,"8dir":3};var a=class{constructor(t){this.resetFromJSON(t)}resetFromJSON(t){void 0==this.cfg&&(this.cfg={}),void 0==this.start&&(this.start={}),void 0==this.end&&(this.end={}),void 0==this.cursorKeys&&(this.cursorKeys={up:new r,down:new r,left:new r,right:new r}),this.setEnable(n(t,"enable",!0)),this.setMode(n(t,"dir","8dir")),this.setDistanceThreshold(n(t,"distanceMin",16));var e=n(t,"start.x",null),s=n(t,"start.y",null),i=n(t,"end.x",null),o=n(t,"end.y",null);return null!==e&&null!==s&&null!==i&&null!==o?this.setVector(e,s,i,o):this.cleanVector(),this}toJSON(){return{enable:this.cfg.enable,dir:this.cfg.dirMode,distanceMin:this.cfg.distanceMin,start:{x:this.start.x,y:this.start.y},end:{x:this.end.x,y:this.end.y}}}setMode(t){return"string"==typeof t&&(t=h[t]),this.cfg.dirMode=t,this}setEnable(t){(t=void 0==t||!!t)!==this.cfg.enable&&(!1===t&&this.cleanVector(),this.cfg.enable=t)}setDistanceThreshold(t){return t<0&&(t=0),this.cfg.distanceMin=t,this}createCursorKeys(){return this.cursorKeys}setKeyState(t,e){var s=this.cursorKeys[t];if(s.enabled){var i=!e;s.isDown=e,s.isUp=i}}cleanVector(){for(var t in this.start.x=null,this.start.y=null,this.end.x=null,this.end.y=null,this.cursorKeys)this.setKeyState(t,!1);return this}setVector(t,e,s,i){if(!this.cfg.enable)return this;if(this.cleanVector(),null==t)return this;this.start.x=t,this.start.y=e,this.end.x=s,this.end.y=i;var n=s-t,r=i-e,h=Math.sqrt(n*n+r*r),a=o(Math.atan2(r,n));if(a=(360+a)%360,h<this.cfg.distanceMin)return this;switch(this.cfg.dirMode){case 0:var c=a<180?"down":"up";this.setKeyState(c,!0);break;case 1:c=a>90&&a<=270?"left":"right",this.setKeyState(c,!0);break;case 2:c=a>45&&a<=135?"down":a>135&&a<=225?"left":a>225&&a<=315?"up":"right",this.setKeyState(c,!0);break;case 3:a>22.5&&a<=67.5?(this.setKeyState("down",!0),this.setKeyState("right",!0)):a>67.5&&a<=112.5?this.setKeyState("down",!0):a>112.5&&a<=157.5?(this.setKeyState("down",!0),this.setKeyState("left",!0)):a>157.5&&a<=202.5?this.setKeyState("left",!0):a>202.5&&a<=247.5?(this.setKeyState("left",!0),this.setKeyState("up",!0)):a>247.5&&a<=292.5?this.setKeyState("up",!0):a>292.5&&a<=337.5?(this.setKeyState("up",!0),this.setKeyState("right",!0)):this.setKeyState("right",!0)}return this}get upKeyDown(){return this.cursorKeys.up.isDown}get downKeyDown(){return this.cursorKeys.down.isDown}get leftKeyDown(){return this.cursorKeys.left.isDown}get rightKeyDown(){return this.cursorKeys.right.isDown}get anyKeyDown(){var t=this.cursorKeys;return t.up.isDown||t.down.isDown||t.left.isDown||t.right.isDown}get noKeyDown(){return!this.anyKeyDown}};const c=Phaser.Utils.Objects.GetValue;var u=class extends a{constructor(t,e){super(e),this.gameObject=t,this.touchState=new i.a(t,e),this.touchState.on("touchstart",this.keyPress,this),this.touchState.on("touchmove",this.keyPress,this),this.touchState.on("touchend",this.KeyRelease,this),this.boot()}resetFromJSON(t){super.resetFromJSON(t),this.origin=void 0;var e=c(t,"origin",void 0);return e&&this.setOrigin(e.x,e.y),this}toJSON(){var t=super.toJSON();return t.origin=this.origin,t}boot(){this.gameObject.on&&this.gameObject.on("destroy",this.destroy,this)}shutdown(){this.touchState.destroy(),this.gameObject=void 0}destroy(){this.shutdown()}setOrigin(t,e){return void 0===this.origin&&(this.origin={}),this.origin.x=t,this.origin.y=e,this}keyPress(t){var e=this.origin||this.gameObject,s=this.touchState;this.setVector(e.x,e.y,s.x,s.y)}KeyRelease(t){this.cleanVector()}};e.default=class extends Phaser.Plugins.BasePlugin{constructor(t){super(t)}start(){this.game.events.once("destroy",this.destroy,this)}add(t,e){return new u(t,e)}}}}).default});