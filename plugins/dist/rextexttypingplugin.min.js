!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.rextexttypingplugin=e():t.rextexttypingplugin=e()}("undefined"!=typeof self?self:this,function(){return function(t){var e={};function s(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,s),i.l=!0,i.exports}return s.m=t,s.c=e,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=69)}({0:function(t,e,s){"use strict";const n=Phaser.Scene;e.a=function(t){return t instanceof n?t:t.scene&&t.scene instanceof n?t.scene:t.parent&&t.parent.scene&&t.parent.scene instanceof n?t.parent.scene:void 0}},69:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(70);e.default=class extends Phaser.Plugins.BasePlugin{constructor(t){super(t)}start(){this.game.events.once("destroy",this.destroy,this)}add(t,e){return new n.a(t,e)}}},7:function(t,e,s){"use strict";var n=Object.prototype.hasOwnProperty,i="~";function r(){}function o(t,e,s,n,r){if("function"!=typeof s)throw new TypeError("The listener must be a function");var o=new function(t,e,s){this.fn=t,this.context=e,this.once=s||!1}(s,n||t,r),h=i?i+e:e;return t._events[h]?t._events[h].fn?t._events[h]=[t._events[h],o]:t._events[h].push(o):(t._events[h]=o,t._eventsCount++),t}function h(t,e){0==--t._eventsCount?t._events=new r:delete t._events[e]}function a(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(i=!1)),a.prototype.eventNames=function(){var t,e,s=[];if(0===this._eventsCount)return s;for(e in t=this._events)n.call(t,e)&&s.push(i?e.slice(1):e);return Object.getOwnPropertySymbols?s.concat(Object.getOwnPropertySymbols(t)):s},a.prototype.listeners=function(t){var e=i?i+t:t,s=this._events[e];if(!s)return[];if(s.fn)return[s.fn];for(var n=0,r=s.length,o=new Array(r);n<r;n++)o[n]=s[n].fn;return o},a.prototype.listenerCount=function(t){var e=i?i+t:t,s=this._events[e];return s?s.fn?1:s.length:0},a.prototype.emit=function(t,e,s,n,r,o){var h=i?i+t:t;if(!this._events[h])return!1;var a,c,u=this._events[h],l=arguments.length;if(u.fn){switch(u.once&&this.removeListener(t,u.fn,void 0,!0),l){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,e),!0;case 3:return u.fn.call(u.context,e,s),!0;case 4:return u.fn.call(u.context,e,s,n),!0;case 5:return u.fn.call(u.context,e,s,n,r),!0;case 6:return u.fn.call(u.context,e,s,n,r,o),!0}for(c=1,a=new Array(l-1);c<l;c++)a[c-1]=arguments[c];u.fn.apply(u.context,a)}else{var p,f=u.length;for(c=0;c<f;c++)switch(u[c].once&&this.removeListener(t,u[c].fn,void 0,!0),l){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,e);break;case 3:u[c].fn.call(u[c].context,e,s);break;case 4:u[c].fn.call(u[c].context,e,s,n);break;default:if(!a)for(p=1,a=new Array(l-1);p<l;p++)a[p-1]=arguments[p];u[c].fn.apply(u[c].context,a)}}return!0},a.prototype.on=function(t,e,s){return o(this,t,e,s,!1)},a.prototype.once=function(t,e,s){return o(this,t,e,s,!0)},a.prototype.removeListener=function(t,e,s,n){var r=i?i+t:t;if(!this._events[r])return this;if(!e)return h(this,r),this;var o=this._events[r];if(o.fn)o.fn!==e||n&&!o.once||s&&o.context!==s||h(this,r);else{for(var a=0,c=[],u=o.length;a<u;a++)(o[a].fn!==e||n&&!o[a].once||s&&o[a].context!==s)&&c.push(o[a]);c.length?this._events[r]=1===c.length?c[0]:c:h(this,r)}return this},a.prototype.removeAllListeners=function(t){var e;return t?(e=i?i+t:t,this._events[e]&&h(this,e)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=i,a.EventEmitter=a,t.exports=a},70:function(t,e,s){"use strict";var n=s(71);e.a=n.a},71:function(t,e,s){"use strict";var n=s(7),i=s.n(n),r=s(0);const o=Phaser.Utils.Objects.GetFastValue,h=Phaser.Utils.Objects.GetValue;var a=function(t){return Array.isArray(t)?t=t.join("\n"):"number"==typeof t&&(t=t.toString()),t};const c={"left-to-right":0,"right-to-left":1,"middle-to-sides":2,"sides-to-middle":3};e.a=class extends i.a{constructor(t,e){super(),this.gameobject=t,this.scene=Object(r.a)(t),this.timer=null,this.resetFromJSON(e),this.boot()}resetFromJSON(t){this.setTypeMode(h(t,"typeMode",0)),this.setTypeSpeed(h(t,"speed",333)),this.setTextCallback=o(t,"setTextCallback",null),this.setTextCallbackScope=o(t,"setTextCallbackScope",null),this.typingIdx=o(t,"typingIdx",0),this.text=a(o(t,"text","")),this.textLen=o(t,"textLen",0),this.insertIdx=o(t,"insertIdx",null);var e=o(t,"elapsed",null);return null!==e&&this.start(void 0,void 0,this.typingIdx,e),this}toJSON(){var t,e=this.getTimer();return t=e?e.elapsed:null,{typeMode:this.typeMode,speed:this.speed,setTextCallback:this.setTextCallback,setTextCallbackScope:this.setTextCallbackScope,typingIdx:this.typingIdx,text:this.text,textLen:this.textLen,insertIdx:this.insertIdx,elapsed:t}}boot(){return this.gameobject.on&&this.gameobject.on("destroy",this.destroy,this),this}shutdown(){return this.freeTimer(),this.removeAllListeners(),this.gameobject=void 0,this.scene=void 0,this}destroy(){return this.shutdown(),this}setTypeMode(t){return"string"==typeof t&&(t=c[t]),this.typeMode=t,this}setTypeSpeed(t){return this.speed=t,this}get isTyping(){return null!==this.getTimer()}get isLastChar(){return this.typingIdx===this.textLen}start(t,e,s,n){return void 0!==t&&this.setTypingContent(t),void 0!==e&&(this.speed=e),void 0===s&&(s=0),this.typingIdx=s+1,0===this.speed?this.stop(!0):this.startTimer(n),this}appendText(t){var e=this.text.concat(a(t));return this.isTyping?this.setTypingContent(e):this.start(e,void 0,this.textLen),this}stop(t){return this.getTimer()&&this.freeTimer(),t&&(this.typingIdx=this.textLen,this.setText(this.text),this.emit("type"),this.emit("complete")),this}pause(){var t=this.getTimer();return t&&(t.paused=!0),this}resume(){var t=this.getTimer();return t&&(t.paused=!1),this}setTypingContent(t){return this.text=a(t),this.textLen=this.getTextLength(this.text),this}onTyping(){var t=this.getTypingString(this.text,this.typingIdx,this.textLen,this.typeMode);this.setText(t),this.emit("type"),this.isLastChar?(this.freeTimer(),this.emit("complete")):(this.timer.delay=this.speed,this.typingIdx++)}getTypingString(t,e,s,n){var i;if(0===n){var r=0,o=e;this.insertIdx=o,i=this.getSubString(t,r,o)}else if(1===n)r=(o=s)-e,this.insertIdx=0,i=this.getSubString(t,r,o);else if(2===n){var h=s/2;o=(r=Math.floor(h-e/2))+e,this.insertIdx=e%2?e:0,i=this.getSubString(t,r,o)}else if(3===n){var a,c=Math.floor(e/2);c>0?(r=(o=s)-c,a=this.getSubString(t,r,o)):a="";var u,l=e-c;l>0?(o=(r=0)+l,this.insertIdx=o,u=this.getSubString(t,r,o)):(u="",this.insertIdx=0),i=u+a}return i}startTimer(t){var e;return this.timer&&this.freeTimer(),void 0===t?e=0:(this.speed,e=t),this.timer=this.scene.time.addEvent({delay:0,startAt:e,loop:!0,callback:this.onTyping,callbackScope:this}),this}getTimer(){return this.timer}freeTimer(){return this.timer&&(this.timer.remove(),this.timer=null),this}setText(t){this.setTextCallback&&(t=this.setTextCallbackScope?this.setTextCallback.call(this.setTextCallbackScope,t,this.isLastChar,this.insertIdx):this.setTextCallback(t,this.isLastChar,this.insertIdx)),this.gameobject.setText(t)}getTextLength(t){var e=this.gameobject;return e.getRawText?e.getRawText(t).length:t.length}getSubString(t,e,s){var n=this.gameobject;return n.getSubString?n.getSubString(t,e,s):t.slice(e,s)}}}}).default});