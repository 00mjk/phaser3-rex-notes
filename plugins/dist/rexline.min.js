!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.rexline=t():e.rexline=t()}(window,function(){return function(e){var t={};function i(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=e,i.c=t,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=310)}({127:function(e,t,i){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e,t,i){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,i){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}(e,t);if(r){var n=Object.getOwnPropertyDescriptor(r,t);return n.get?n.get.call(i):n.value}})(e,t,i||e)}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var h,c=Phaser.GameObjects.RenderTexture,f=Phaser.Utils.Objects.GetValue,l=Phaser.Math.Distance.Between,d=Phaser.Math.Angle.Between,y=function(e){function t(e,i){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=f(i,"start",void 0),s=f(i,"end",void 0),a=f(i,"body",void 0);return(r=o(this,u(t).call(this,e))).setOrigin(0,.5).setLineStartPosition(f(n,"x",0),f(n,"y",0)).setLineEndPosition(f(s,"x",0),f(s,"y",0)).setLineStartTexture(f(n,"key",n),f(n,"frame",void 0)).setLineEndTexture(f(s,"key",s),f(s,"frame",void 0)).setLineBodyTexture(f(a,"key",a),f(a,"frame",void 0),f(a,"width",void 0)),r}var i,r,y;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(t,c),i=t,(r=[{key:"setLineStartPosition",value:function(e,t){return this.x0=e,this.y0=t,this}},{key:"setLineEndPosition",value:function(e,t){return this.x1=e,this.y1=t,this}},{key:"setLineStartTexture",value:function(e,t){return this.lineStartTexture=e,this.lineStartFrameName=t,this.redraw=!0,this}},{key:"setLineEndTexture",value:function(e,t){return this.lineEndTexture=e,this.lineEndFrameName=t,this.redraw=!0,this}},{key:"setLineBodyTexture",value:function(e,t,i){return this.lineBodyTexture=e,this.lineBodyFrameName=t,this.lineBodyWidth=i,this.redraw=!0,this}},{key:"updateLineTexture",value:function(){if(!this.redraw)return this;this.redraw=!1,this.clear();var e,t,i=this.scene.textures.getFrame(this.lineStartTexture,this.lineStartFrameName),r=this.scene.textures.getFrame(this.lineEndTexture,this.lineEndFrameName),n=this.scene.textures.getFrame(this.lineBodyTexture,this.lineBodyFrameName),o=l(this.x0,this.y0,this.x1,this.y1),s=0,u=d(this.x0,this.y0,this.x1,this.y1);if(i&&(s=i.cutHeight),r&&(s=Math.max(s,r.cutHeight)),n){var a=void 0!==this.lineBodyWidth?this.lineBodyWidth:n.cutWidth;s=Math.max(s,a)}if(o=Math.floor(o),s=Math.floor(s),o<=0||s<=0)return this.setPosition(this.x0,this.y0).setSize(1,1).setRotation(u),this;this.setPosition(this.x0,this.y0).setSize(o,s).setRotation(u).setOrigin(0,0);var c=this.width;return i&&(e=0,t=(this.height-i.cutHeight)/2,this.drawFrame(this.lineStartTexture,this.lineStartFrameName,e,t),c-=i.cutWidth),r&&(e=this.width-r.cutWidth,t=(this.height-r.cutHeight)/2,this.drawFrame(this.lineEndTexture,this.lineEndFrameName,e,t),c-=r.cutWidth),n&&c>0&&a>0&&(h||(h=this.scene.make.tileSprite({add:!1,origin:{x:0,y:0}})),h.setSize(c,a).setTexture(this.lineBodyTexture,this.lineBodyFrameName),e=i?i.cutWidth:0,t=(this.height-h.height)/2,this.draw(h,e,t)),this.setOrigin(0,.5),this}},{key:"renderWebGL",value:function(e,i,r,n,o){this.updateLineTexture(),s(u(t.prototype),"renderWebGL",this).call(this,e,i,r,n,o)}},{key:"renderCanvas",value:function(e,i,r,n,o){this.updateLineTexture(),s(u(t.prototype),"renderCanvas",this).call(this,e,i,r,n,o)}},{key:"x0",get:function(){return this._x0},set:function(e){this.redraw|=this._x0!==e,this._x0=e}},{key:"y0",get:function(){return this._y0},set:function(e){this.redraw|=this._y0!==e,this._y0=e}},{key:"x1",get:function(){return this._x1},set:function(e){this.redraw|=this._x1!==e,this._x1=e}},{key:"y1",get:function(){return this._y1},set:function(e){this.redraw|=this._y1!==e,this._y1=e}}])&&n(i.prototype,r),y&&n(i,y),t}();t.a=y},259:function(e,t,i){"use strict";var r=i(127);t.a=function(e){var t=new r.a(this.scene,e);return this.scene.add.existing(t),t}},260:function(e,t,i){"use strict";var r=i(127),n=Phaser.GameObjects.BuildGameObject;t.a=function(e,t){void 0!==t&&(e.add=t);var i=new r.a(this.scene,e);return n(this.scene,i,e),i}},310:function(e,t,i){"use strict";i.r(t);var r=i(259),n=i(260),o=i(127);Phaser.GameObjects.GameObjectFactory.register("rexLine",r.a),Phaser.GameObjects.GameObjectCreator.register("rexLine",n.a),t.default=o.a}}).default});