!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.rexvideo=t():e.rexvideo=t()}(window,function(){return function(e){var t={};function i(s){if(t[s])return t[s].exports;var r=t[s]={i:s,l:!1,exports:{}};return e[s].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=e,i.c=t,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(s,r,function(t){return e[t]}.bind(null,r));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=314)}({133:function(e,t,i){"use strict";const s=Phaser.Utils.Objects.IsPlainObject,r=Phaser.Utils.Objects.GetValue,a=Phaser.Math.Clamp;const o={id:["id",void 0],width:["width",void 0],height:["height",void 0],autoPlay:["autoplay",!0],controls:["controls",!1],loop:["loop",!1],poster:["poster",void 0],preload:["preload",void 0],muted:["muted",!1],playsInline:["playsInline",!0],crossOrigin:["crossOrigin","anonymous"]},n={canplay:"canplay",canplaythrough:"canplaythrough",ended:"ended",error:"error",loadstart:"loadstart",playing:"playing",pause:"pause",stalled:"stalled"},h=["webm","ogg","mp4","h264","vp9","hls"];t.a=function(e){return class extends e{createVideoElement(e){var t,i,s=this.video?this.video:document.createElement("video");for(var a in o)t=o[a],void 0!==(i=r(e,a,t[1]))&&(s[t[0]]=i);for(let e in n)s.addEventListener(n[e],function(){this.emit(e,this)}.bind(this));return this.video=s,s}destroy(e){this.scene&&(this.video.pause(),this.video.removeAttribute("src"),this.video.load(),this.video=void 0,super.destroy(e))}get availableVideoTypes(){return this.scene.sys.game.device.video}load(e){if(s(e))for(var t,i=0,r=h.length;i<r;i++)if(t=h[i],this.availableVideoTypes[t+"Video"]&&e.hasOwnProperty(t)){e=e[t];break}return""!==e&&(this.video.src=e,this.video.load()),this}play(){return this.video.play(),this}get isPlaying(){var e=this.video;return!e.paused&&!e.ended&&e.currentTime>0}pause(){return this.video.pause(),this}get isPaused(){return this.video.paused}get playbackTime(){return this.video.currentTime||0}set playbackTime(e){try{this.video.currentTime=e}catch(e){}}setPlaybackTime(e){return this.playbackTime=e,this}get duration(){return this.video.duration||0}get t(){var e=this.duration;return 0===e?0:this.playbackTime/e}set t(e){e=a(e,0,1),this.playbackTime=this.duration*e}setT(e){return this.t=e,this}get hasEnded(){return this.video.ended}get volume(){return this.video.volume||0}set volume(e){this.video.volume=e}setVolume(e){return this.volume=e,this}get muted(){return this.video.muted||!1}set muted(e){this.video.muted=e}setMute(e){return void 0===e&&(e=!0),this.muted=e,this}get loop(){return this.video.loop}set loop(e){this.video.loop=e}setLoop(e){return void 0===e&&(e=!0),this.mute=e,this}}}},134:function(e,t,i){"use strict";var s=i(133),r=i(42);const a=Phaser.Utils.Objects.IsPlainObject,o=Phaser.Utils.Objects.GetValue;t.a=class extends(Object(s.a)(r.a)){constructor(e,t,i,s,r,n){a(t)?(t=o(n=t,"x",0),i=o(n,"y",0),s=o(n,"width",void 0),r=o(n,"height",void 0)):a(s)&&(s=o(n=s,"width",void 0),r=o(n,"height",void 0)),void 0===n&&(n={});var h=e.scale.autoRound;void 0!==s&&(h&&(s=Math.floor(s)),n.width=s),void 0!==r&&(h&&(r=Math.floor(r)),n.height=r),super(e,t,i,s,r),this.type="rexVideoCanvas",this.createVideoElement(n),this.load(o(n,"src","")),this.boot()}boot(){return this.scene.events.on("preupdate",this.preupdate,this),this}destroy(e){this.scene&&(this.scene.events.off("preupdate",this.preupdate,this),super.destroy(e))}preupdate(e,t){var i=this.canvas.width,s=this.canvas.height;this.renderer.gl?(this.frame.source.glTexture=this.renderer.canvasToTexture(this.video,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture):this.context.drawImage(this.video,0,0,i,s)}}},135:function(e,t,i){"use strict";var s=i(133);const r=Phaser.GameObjects.DOMElement,a=Phaser.Utils.Objects.IsPlainObject,o=Phaser.Utils.Objects.GetValue,n=r||Object;t.a=class extends(Object(s.a)(n)){constructor(e,t,i,s,r,n){a(t)?(t=o(n=t,"x",0),i=o(n,"y",0),s=o(n,"width",void 0),r=o(n,"height",void 0)):a(s)&&(s=o(n=s,"width",void 0),r=o(n,"height",void 0)),void 0===n&&(n={});var h=e.scale.autoRound;void 0!==s&&(h&&(s=Math.floor(s)),n.width=s),void 0!==r&&(h&&(r=Math.floor(r)),n.height=r),super(e,t,i),this.type="rexVideo",this.setElement(this.createVideoElement(n)).load(o(n,"src",""))}}},314:function(e,t,i){"use strict";i.r(t);var s=i(135);i.d(t,"Video",function(){return s.a});var r=i(134);i.d(t,"VideoCanvas",function(){return r.a});const a=Phaser.Utils.Objects.GetAdvancedValue,o=Phaser.GameObjects.BuildGameObject;Phaser.GameObjects.GameObjectFactory.register("rexVideo",function(e,t,i,r,a){var o=new s.a(this.scene,e,t,i,r,a);return this.displayList.add(o),o}),Phaser.GameObjects.GameObjectCreator.register("rexVideo",function(e,t){var i=a(e,"width",void 0),r=a(e,"height",void 0);void 0!==t&&(e.add=t);var n=new s.a(this.scene,0,0,i,r,e);return o(this.scene,n,e),n}),Phaser.GameObjects.GameObjectFactory.register("rexVideoCanvas",function(e,t,i,s,a){var o=new r.a(this.scene,e,t,i,s,a);return this.displayList.add(o),o}),Phaser.GameObjects.GameObjectCreator.register("rexVideoCanvas",function(e,t){var i=a(e,"width",void 0),s=a(e,"height",void 0);void 0!==t&&(e.add=t);var n=new r.a(this.scene,0,0,i,s,e);return o(this.scene,n,e),n})},42:function(e,t,i){"use strict";const s=Phaser.Renderer.WebGL.Utils;var r=function(e,t,i,r,a){t.dirty&&(t.updateTexture(),t.dirty=!1);var o=t.frame,n=o.width,h=o.height,d=s.getTintAppendFloatAlpha;this.pipeline.batchTexture(t,o.glTexture,n,h,t.x,t.y,n/t.resolution,h/t.resolution,t.scaleX,t.scaleY,t.rotation,t.flipX,t.flipY,t.scrollFactorX,t.scrollFactorY,t.displayOriginX,t.displayOriginY,0,0,n,h,d(t._tintTL,r.alpha*t._alphaTL),d(t._tintTR,r.alpha*t._alphaTR),d(t._tintBL,r.alpha*t._alphaBL),d(t._tintBR,r.alpha*t._alphaBR),t._isTinted&&t.tintFill,0,0,r,a)},a=function(e,t,i,s,r){e.batchSprite(t,t.frame,s,r)},o=i(9),n=(o.default,o.default,{renderWebGL:r,renderCanvas:a});const h=Phaser.Display.Canvas.CanvasPool,d=Phaser.GameObjects.Components,u=Phaser.GameObjects.GameObject;var c=new Phaser.Class({Extends:u,Mixins:[d.Alpha,d.BlendMode,d.ComputedSize,d.Crop,d.Depth,d.Flip,d.GetBounds,d.Mask,d.Origin,d.Pipeline,d.ScrollFactor,d.Tint,d.Transform,d.Visible,n],initialize:function(e,t,i,s,r){void 0===t&&(t=0),void 0===i&&(i=0),void 0===s&&(s=0),void 0===r&&(r=0),u.call(this,e,"rexCanvas"),this.renderer=e.sys.game.renderer,this.resolution=e.sys.game.config.resolution,this.canvas=h.create(this,this.resolution*s,this.resolution*r),this.context=this.canvas.getContext("2d"),this.dirty=!0,this.setPosition(t,i),this.setSize(s,r),this.setOrigin(.5,.5),this.initPipeline(),this._crop=this.resetCropObject(),this.texture=e.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.frame.source.resolution=this.resolution,this.renderer.gl&&(s>0&&r>0?this.updateTexture():(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null)),e.sys.game.config.renderType===Phaser.WEBGL&&e.sys.game.renderer.onContextRestored(function(){this.dirty=!0},this)},getCanvas:function(e){return e||(this.dirty=!0),this.canvas},needRedraw:function(){return this.dirty=!0,this},clear:function(){var e=this.canvas;return this.context.clearRect(0,0,e.width,e.height),this.dirty=!0,this},fill:function(e){var t=this.canvas,i=this.context;return i.fillStyle=e,i.fillRect(0,0,t.width,t.height),this.dirty=!0,this},preDestroy:function(){h.remove(this.canvas)},updateTexture:function(e,t){return e&&(t?e.call(t,this.canvas,this.context):e(this.canvas,this.context)),this.width===this.frame.width&&this.height===this.frame.height||this.frame.setSize(this.width,this.height),this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(this.canvas,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!1,this},generateTexture:function(e,t,i,s,r){var a,o=this.canvas,n=this.scene.sys,h=n.game.renderer;void 0===t&&(t=0),void 0===i&&(i=0),void 0===s?s=o.width:s*=this.resolution,void 0===r?r=o.height:r*=this.resolution;var d=(a=n.textures.exists(e)?n.textures.get(e):n.textures.createCanvas(e,s,r)).getSourceImage();d.width!==s&&(d.width=s),d.height!==r&&(d.height=r);var u=d.getContext("2d");return u.clearRect(0,0,s,r),u.drawImage(o,t,i,s,r),h.gl&&a&&(a.source[0].glTexture=h.canvasToTexture(d,a.source[0].glTexture,!0,0)),this},loadTexture:function(e,t){var i=this.scene.sys;if(!i.textures.exists(e))return this;void 0===t&&(t=!0);var s=i.textures.get(e).getSourceImage(),r=(s.getContext("2d"),this.canvas);r.width!==s.width&&(r.width=s.width),r.height!==s.height&&(r.height=s.height);var a=r.getContext("2d");return a.clearRect(0,0,r.width,r.height),a.drawImage(s,0,0,r.width,r.height),this.updateTexture(),t&&this.setSize(r.width/this.resolution,r.height/this.resolution),this},resize:function(e,t){return this.width===e&&this.height===t?this:(this.canvas.width=this.resolution*e,this.canvas.height=this.resolution*t,this.setSize(e,t).updateDisplayOrigin(),this)}});t.a=c},9:function(e,t,i){"use strict";i.r(t);t.default=function(){}}}).default});