!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var s=e();for(var n in s)("object"==typeof exports?exports:t)[n]=s[n]}}("undefined"!=typeof self?self:this,function(){return function(t){var e={};function s(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,s),i.l=!0,i.exports}return s.m=t,s.c=e,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=55)}({0:function(t,e,s){"use strict";const n=Phaser.Scene;e.a=function(t){return t instanceof n?t:t.scene&&t.scene instanceof n?t.scene:t.parent&&t.parent.scene&&t.parent.scene instanceof n?t.parent.scene:void 0}},1:function(t,e,s){"use strict";e.a=function(t){return"[object Array]"===Object.prototype.toString.call(t)}},10:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(11);e.default=n.a},11:function(t,e,s){"use strict";var n=s(0);const i=Phaser.Utils.Objects.GetFastValue;e.a=class{constructor(t,e){this.parent=t,this.resetFromJSON(e),this.boot()}resetFromJSON(t){return this.state=i(t,"state",0),this.now=i(t,"now",0),this.timeScale=i(t,"timeScale",1),this}toJSON(){return{state:this.state,now:this.now,timeScale:this.timeScale}}boot(){Object(n.a)(this.parent).sys.events.on("preupdate",this.updateNowTime,this)}shutdown(){Object(n.a)(this.parent).sys.events.off("preupdate",this.updateNowTime,this),this.parent=void 0}destroy(){this.shutdown()}start(t){return void 0===t&&(t=0),this.state=1,this.now=t,this}pause(){return this.state=0,this}resume(){return this.state=1,this}stop(){return this.state=0,this}seek(t){return this.now=t,this}get isRunning(){return 1===this.state}updateNowTime(t,e){0!==this.state&&(this.now+=e*this.timeScale)}}},2:function(t,e,s){"use strict";e.a=function(t,e,s,n){void 0===s&&(s=0),void 0===n&&(n=e.length),t.length=n-s;for(var i=0,r=t.length;i<r;i++)t[i]=e[i+s];return t}},3:function(t,e,s){"use strict";var n=/^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i;e.a=function(t){if("string"!=typeof t)return t;if(""===t)t=null;else if(n.test(t))t=parseFloat(t);else{var e=t.toLowerCase();"false"===e?t=!1:"true"===e&&(t=!0)}return t}},4:function(t,e,s){"use strict";var n=s(5),i=s(1);e.a=function(t,e){var s,r=Object(i.a)(t);for(var o in null!=e?(s=e,Object(n.a)(s)):s=r?[]:{},r&&(s.length=t.length),t)s[o]=t[o];return s}},5:function(t,e,s){"use strict";var n=s(1);e.a=function(t){if(Object(n.a)(t))t.length=0;else for(var e in t)delete t[e]}},55:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(56),i=s(57);e.default={Recorder:n.a,Player:i.a}},56:function(t,e,s){"use strict";var n=s(10),i=s(4);const r=Phaser.Utils.Objects.GetFastValue;e.a=class{constructor(t,e){this.clock=new n.default(t),this.parent=t,this.resetFromJSON(e)}resetFromJSON(t){var e=r(t,"clock",void 0);return this.clock.resetFromJSON(e),this.commands=r(t,"commands",[]),this}toJSON(){return{clock:this.clock.toJSON(),commands:this.commands}}shutdown(){this.clock.shutdown(),this.commands=void 0}destroy(){this.shutdown()}start(t){return this.clock.start(t),this.clean(),this}pause(){return this.clock.pause(),this}resume(){return this.clock.resume(),this}stop(){return this.clock.stop(),this}seek(t){return this.clock.seek(t),this}get isRecording(){return this.clock.isRunning}get timeScale(){return this.clock.timeScale}set timeScale(t){this.clock.timeScale=t}get now(){return this.clock.now}addCommand(t,e){if(!this.isRecording)return this;void 0===e&&(e=0);var s=this.clock.now+e;return this.commands.push([s,t]),this}getCommands(t){return void 0===t&&(t=!1),t?this.commands:Object(i.a)(this.commands)}clean(){this.commands.length=0}}},57:function(t,e,s){"use strict";var n=s(8),i=s.n(n),r=s(10),o=s(0),c=s(2),a=s(6);const h=Phaser.Utils.Objects.GetFastValue;var u=[];const l={ms:0,s:1,sec:1},f={abs:0,absolute:0,inc:1,increment:1};e.a=class extends i.a{constructor(t,e){super(),this.clock=new r.default(t),this.parent=t,this.resetFromJSON(e),this.boot()}resetFromJSON(t){var e=h(t,"clock",void 0);return this.clock.resetFromJSON(e),this.commands=h(t,"commands",[]),this.scope=h(t,"scope",void 0),this.timeUnit=h(t,"timeUnit",0),this.dtMode=h(t,"dtMode",0),this.index=h(t,"index",0),this.state=h(t,"state",0),this.nextDt=h(t,"nextDt",0),this}toJSON(){return{clock:this.clock.toJSON(),commands:this.commands,scope:this.scope,timeUnit:this.timeUnit,dtMode:this.dtMode,index:this.index,state:this.state,nextDt:this.nextDt}}boot(){Object(o.a)(this.parent).sys.events.on("update",this.runNextCommands,this)}shutdown(){this.clock.shutdown(),Object(o.a)(this.parent).sys.events.off("update",this.runNextCommands,this),this.removeAllListeners(),this.commands=void 0}destroy(){this.shutdown()}load(t,e,s){return this.stop(),this.timeUnit=h(s,"timeUnit",this.timeUnit),"string"==typeof this.timeUnit&&(this.timeUnit=l[this.timeUnit]),this.dtMode=h(s,"dtMode",this.dtMode),"string"==typeof this.dtMode&&(this.dtMode=f[this.dtMode]),t=t.filter(function(t){var e=t[0];return!isNaN(e)}).map(function(t){return"string"==typeof t[0]&&(t[0]=parseFloat(t[0])),t}),0===this.dtMode&&t.sort(function(t,e){var s=t[0],n=e[0];return s>n?1:s<n?-1:0}),this.commands=t,this.scope=e,this}start(t){return this.stop(),this.index=0,this.state=1,0===this.commands.length?this.complete():(this.nextDt=this.getNextDt(0),this.clock.start(t)),this}pause(){return this.clock.pause(),this}resume(){return this.clock.resume(),this}stop(){return this.state=0,this.clock.stop(),this}seek(t){return this.clock.seek(t),this}get isPlaying(){return this.clock.isRunning}get completed(){return 0===this.state}get timeScale(){return this.clock.timeScale}set timeScale(t){this.clock.timeScale=t}get now(){return this.clock.now}runNextCommands(){if(this.clock.isRunning&&!(this.nextDt>this.clock.now))for(;;){var t=this.commands[this.index],e=t[1];if("string"==typeof e&&(e=Object(c.a)(u,t,1)),Object(a.default)(e,this.scope),this.emit("runcommand",e,this.scope),this.index===this.commands.length-1)return void this.complete();if(this.index++,this.nextDt=this.getNextDt(this.nextDt),this.nextDt>this.clock.now)return}}complete(){this.state=0,this.clock.stop(),this.emit("complete")}getNextDt(t){var e=this.commands[this.index][0];return 1===this.timeUnit&&(e*=1e3),1===this.dtMode&&(e+=t),e}}},6:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(7);e.default=n.a},7:function(t,e,s){"use strict";var n=s(2),i=s(3);const r=Phaser.Utils.Objects.GetValue;var o=function(t,e,s){var n,i=r(s,"reverse",!1);if("string"==typeof t[0])n=c(t,e,s);else if(i)for(a=(h=t.length)-1;a>=0;a--)n=o(t[a],e,s);else for(var a=0,h=t.length;a<h;a++)n=o(t[a],e,s);return n},c=function(t,e,s){var i=r(s,"argsConvert",void 0),o=r(s,"argsConvertScope",void 0),c=t[0];if(a=Object(n.a)(a,t,1),void 0!==i)if(!0===i&&(i=h,o=void 0),o)for(var u=0,l=a.length;u<l;u++)a[u]=i.call(o,t,a[u]);else for(u=0,l=a.length;u<l;u++)a[u]=i(t,a[u]);var f=e[c];return null==f&&(f=r(e,c,null)),e?f.apply(e,a):f(a)},a=[];const h=function(t,e){return Object(i.a)(e)};e.a=o},8:function(t,e,s){"use strict";var n=Object.prototype.hasOwnProperty,i="~";function r(){}function o(t,e,s,n,r){if("function"!=typeof s)throw new TypeError("The listener must be a function");var o=new function(t,e,s){this.fn=t,this.context=e,this.once=s||!1}(s,n||t,r),c=i?i+e:e;return t._events[c]?t._events[c].fn?t._events[c]=[t._events[c],o]:t._events[c].push(o):(t._events[c]=o,t._eventsCount++),t}function c(t,e){0==--t._eventsCount?t._events=new r:delete t._events[e]}function a(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(i=!1)),a.prototype.eventNames=function(){var t,e,s=[];if(0===this._eventsCount)return s;for(e in t=this._events)n.call(t,e)&&s.push(i?e.slice(1):e);return Object.getOwnPropertySymbols?s.concat(Object.getOwnPropertySymbols(t)):s},a.prototype.listeners=function(t){var e=i?i+t:t,s=this._events[e];if(!s)return[];if(s.fn)return[s.fn];for(var n=0,r=s.length,o=new Array(r);n<r;n++)o[n]=s[n].fn;return o},a.prototype.listenerCount=function(t){var e=i?i+t:t,s=this._events[e];return s?s.fn?1:s.length:0},a.prototype.emit=function(t,e,s,n,r,o){var c=i?i+t:t;if(!this._events[c])return!1;var a,h,u=this._events[c],l=arguments.length;if(u.fn){switch(u.once&&this.removeListener(t,u.fn,void 0,!0),l){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,e),!0;case 3:return u.fn.call(u.context,e,s),!0;case 4:return u.fn.call(u.context,e,s,n),!0;case 5:return u.fn.call(u.context,e,s,n,r),!0;case 6:return u.fn.call(u.context,e,s,n,r,o),!0}for(h=1,a=new Array(l-1);h<l;h++)a[h-1]=arguments[h];u.fn.apply(u.context,a)}else{var f,d=u.length;for(h=0;h<d;h++)switch(u[h].once&&this.removeListener(t,u[h].fn,void 0,!0),l){case 1:u[h].fn.call(u[h].context);break;case 2:u[h].fn.call(u[h].context,e);break;case 3:u[h].fn.call(u[h].context,e,s);break;case 4:u[h].fn.call(u[h].context,e,s,n);break;default:if(!a)for(f=1,a=new Array(l-1);f<l;f++)a[f-1]=arguments[f];u[h].fn.apply(u[h].context,a)}}return!0},a.prototype.on=function(t,e,s){return o(this,t,e,s,!1)},a.prototype.once=function(t,e,s){return o(this,t,e,s,!0)},a.prototype.removeListener=function(t,e,s,n){var r=i?i+t:t;if(!this._events[r])return this;if(!e)return c(this,r),this;var o=this._events[r];if(o.fn)o.fn!==e||n&&!o.once||s&&o.context!==s||c(this,r);else{for(var a=0,h=[],u=o.length;a<u;a++)(o[a].fn!==e||n&&!o[a].once||s&&o[a].context!==s)&&h.push(o[a]);h.length?this._events[r]=1===h.length?h[0]:h:c(this,r)}return this},a.prototype.removeAllListeners=function(t){var e;return t?(e=i?i+t:t,this._events[e]&&c(this,e)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=i,a.EventEmitter=a,t.exports=a}})});