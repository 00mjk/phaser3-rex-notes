!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.rexdragcursorplugin=e():t.rexdragcursorplugin=e()}(window,function(){return function(t){var e={};function i(s){if(e[s])return e[s].exports;var r=e[s]={i:s,l:!1,exports:{}};return t[s].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(s,r,function(e){return t[e]}.bind(null,r));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=30)}({2:function(t,e,i){"use strict";const s=Phaser.Scene;e.a=function(t){return t instanceof s?t:t.scene&&t.scene instanceof s?t.scene:t.parent&&t.parent.scene&&t.parent.scene instanceof s?t.parent.scene:void 0}},30:function(t,e,i){"use strict";i.r(e);i(2);Phaser.Utils.Objects.GetFastValue;const s=Phaser.Utils.Objects.GetValue,r=Phaser.Utils.Objects.GetAdvancedValue,n=Phaser.Input.Keyboard.Key,o=Phaser.Math.RadToDeg;const a={"up&down":0,"left&right":1,"4dir":2,"8dir":3};var h=class{constructor(t){this.resetFromJSON(t)}resetFromJSON(t){void 0==this.cfg&&(this.cfg={}),void 0==this.start&&(this.start={}),void 0==this.end&&(this.end={}),void 0==this.cursorKeys&&(this.cursorKeys={up:new n,down:new n,left:new n,right:new n}),this.setEnable(r(t,"enable",!0)),this.setMode(r(t,"dir","8dir")),this.setDistanceThreshold(r(t,"distanceMin",16));var e=s(t,"start.x",null),i=s(t,"start.y",null),o=s(t,"end.x",null),a=s(t,"end.y",null);return null!==e&&null!==i&&null!==o&&null!==a?this.setVector(e,i,o,a):this.cleanVector(),this}toJSON(){return{enable:this.cfg.enable,dir:this.cfg.dirMode,distanceMin:this.cfg.distanceMin,start:{x:this.start.x,y:this.start.y},end:{x:this.end.x,y:this.end.y}}}setMode(t){return"string"==typeof t&&(t=a[t]),this.cfg.dirMode=t,this}setEnable(t){(t=void 0==t||!!t)!==this.cfg.enable&&(!1===t&&this.cleanVector(),this.cfg.enable=t)}setDistanceThreshold(t){return t<0&&(t=0),this.cfg.distanceMin=t,this}createCursorKeys(){return this.cursorKeys}setKeyState(t,e){var i=this.cursorKeys[t];if(i.enabled){var s=!e;i.isDown=e,i.isUp=s}}cleanVector(){for(var t in this.start.x=null,this.start.y=null,this.end.x=null,this.end.y=null,this.cursorKeys)this.setKeyState(t,!1);return this}setVector(t,e,i,s){if(!this.cfg.enable)return this;if(this.cleanVector(),null==t)return this;this.start.x=t,this.start.y=e,this.end.x=i,this.end.y=s;var r=i-t,n=s-e,a=Math.sqrt(r*r+n*n),h=o(Math.atan2(n,r));if(h=(360+h)%360,a<this.cfg.distanceMin)return this;switch(this.cfg.dirMode){case 0:var u=h<180?"down":"up";this.setKeyState(u,!0);break;case 1:u=h>90&&h<=270?"left":"right",this.setKeyState(u,!0);break;case 2:u=h>45&&h<=135?"down":h>135&&h<=225?"left":h>225&&h<=315?"up":"right",this.setKeyState(u,!0);break;case 3:h>22.5&&h<=67.5?(this.setKeyState("down",!0),this.setKeyState("right",!0)):h>67.5&&h<=112.5?this.setKeyState("down",!0):h>112.5&&h<=157.5?(this.setKeyState("down",!0),this.setKeyState("left",!0)):h>157.5&&h<=202.5?this.setKeyState("left",!0):h>202.5&&h<=247.5?(this.setKeyState("left",!0),this.setKeyState("up",!0)):h>247.5&&h<=292.5?this.setKeyState("up",!0):h>292.5&&h<=337.5?(this.setKeyState("up",!0),this.setKeyState("right",!0)):this.setKeyState("right",!0)}return this}};const u=Phaser.Utils.Objects.GetAdvancedValue;var c=class extends h{constructor(t,e){super(e),this.parent=t,this.boot()}resetFromJSON(t){super.resetFromJSON(t),this.pointerId=null,void 0==this.cfg.origin&&(this.cfg.origin={}),void 0==this.origin&&(this.origin={});var e=u(t,"origin.x",null),i=u(t,"origin.y",null);return this.setOrigin(e,i),this}toJSON(){var t=super.toJSON();return t.origin={x:this.cfg.origin.x,y:this.cfg.origin.y},t}boot(){if(this.parent&&this.parent.input){var t=this.parent.input;t instanceof Phaser.Input.InputPlugin&&(t.on("pointerdown",this.onDragStart,this),t.on("pointerup",this.onDrop,this),t.on("pointermove",this.onDragging,this))}}shutdown(){var t=this.parent.input;t.off("pointerdown",this.onDragStart,this),t.off("pointerup",this.onDragStart,this),t.off("pointermove",this.onDragStart,this)}destroy(){this.shutdown()}setOrigin(t,e){var i=this.cfg.origin;return i.x=t,i.y=e,this}onDragStart(t){if(null===this.pointerId){this.pointerId=t.id;var e=null!==this.cfg.origin.x;this.origin.x=e?this.cfg.origin.x:t.x,this.origin.y=e?this.cfg.origin.y:t.y,this.setVector(this.origin.x,this.origin.y,t.x,t.y)}}onDragging(t){this.pointerId===t.id&&t.isDown&&this.setVector(this.origin.x,this.origin.y,t.x,t.y)}onDrop(t){this.pointerId===t.id&&(this.pointerId=null,this.origin.x=null,this.origin.y=null,this.cleanVector())}};e.default=class extends Phaser.Plugins.BasePlugin{constructor(t){super(t)}start(){this.game.events.once("destroy",this.destroy,this)}add(t,e){return new c(t,e)}}}}).default});