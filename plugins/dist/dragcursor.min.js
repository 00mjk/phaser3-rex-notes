!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var i=e();for(var s in i)("object"==typeof exports?exports:t)[s]=i[s]}}("undefined"!=typeof self?self:this,function(){return function(t){var e={};function i(s){if(e[s])return e[s].exports;var n=e[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:s})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=40)}({0:function(t,e,i){"use strict";const s=Phaser.Scene;e.a=function(t){return t instanceof s?t:t.scene&&t.scene instanceof s?t.scene:t.parent&&t.parent.scene&&t.parent.scene instanceof s?t.parent.scene:void 0}},40:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i(41);e.default=s.a},41:function(t,e,i){"use strict";i(0);var s=i(42);const n=Phaser.Utils.Objects.GetAdvancedValue;e.a=class extends s.a{constructor(t,e){super(e),this.parent=t,this.boot()}resetFromJSON(t){super.resetFromJSON(t),this.pointerId=null,void 0==this.cfg.origin&&(this.cfg.origin={}),void 0==this.origin&&(this.origin={});var e=n(t,"origin.x",null),i=n(t,"origin.y",null);return this.setOrigin(e,i),this}toJSON(){var t=super.toJSON();return t.origin={x:this.cfg.origin.x,y:this.cfg.origin.y},t}boot(){if(this.parent&&this.parent.input){var t=this.parent.input;t instanceof Phaser.Input.InputPlugin&&(t.on("pointerdown",this.onDragStart,this),t.on("pointerup",this.onDrop,this),t.on("pointermove",this.onDragging,this))}}shutdown(){var t=this.parent.input;t.off("pointerdown",this.onDragStart,this),t.off("pointerup",this.onDragStart,this),t.off("pointermove",this.onDragStart,this)}destroy(){this.shutdown()}setOrigin(t,e){var i=this.cfg.origin;return i.x=t,i.y=e,this}onDragStart(t){if(null===this.pointerId){this.pointerId=t.id;var e=null!==this.cfg.origin.x;this.origin.x=e?this.cfg.origin.x:t.x,this.origin.y=e?this.cfg.origin.y:t.y,this.setVector(this.origin.x,this.origin.y,t.x,t.y)}}onDragging(t){this.pointerId===t.id&&t.isDown&&this.setVector(this.origin.x,this.origin.y,t.x,t.y)}onDrop(t){this.pointerId===t.id&&(this.pointerId=null,this.origin.x=null,this.origin.y=null,this.cleanVector())}}},42:function(t,e,i){"use strict";Phaser.Utils.Objects.GetFastValue;const s=Phaser.Utils.Objects.GetValue,n=Phaser.Utils.Objects.GetAdvancedValue,r=Phaser.Input.Keyboard.Key,o=Phaser.Math.RadToDeg;const h={"up&down":0,"left&right":1,"4dir":2,"8dir":3};e.a=class{constructor(t){this.resetFromJSON(t)}resetFromJSON(t){void 0==this.cfg&&(this.cfg={}),void 0==this.start&&(this.start={}),void 0==this.end&&(this.end={}),void 0==this.cursorKeys&&(this.cursorKeys={up:new r,down:new r,left:new r,right:new r}),this.setEnable(n(t,"enable",!0)),this.setMode(n(t,"dir","8dir")),this.setDistanceThreshold(n(t,"distanceMin",16));var e=s(t,"start.x",null),i=s(t,"start.y",null),o=s(t,"end.x",null),h=s(t,"end.y",null);return null!==e&&null!==i&&null!==o&&null!==h?this.setVector(e,i,o,h):this.cleanVector(),this}toJSON(){return{enable:this.cfg.enable,dir:this.cfg.dirMode,distanceMin:this.cfg.distanceMin,start:{x:this.start.x,y:this.start.y},end:{x:this.end.x,y:this.end.y}}}setMode(t){return"string"==typeof t&&(t=h[t]),this.cfg.dirMode=t,this}setEnable(t){(t=void 0==t||!!t)!==this.cfg.enable&&(!1===t&&this.cleanVector(),this.cfg.enable=t)}setDistanceThreshold(t){return t<0&&(t=0),this.cfg.distanceMin=t,this}createCursorKeys(){return this.cursorKeys}setKeyState(t,e){var i=this.cursorKeys[t];if(i.enabled){var s=!e;i.isDown=e,i.isUp=s}}cleanVector(){for(var t in this.start.x=null,this.start.y=null,this.end.x=null,this.end.y=null,this.cursorKeys)this.setKeyState(t,!1);return this}setVector(t,e,i,s){if(!this.cfg.enable)return this;if(this.cleanVector(),null==t)return this;this.start.x=t,this.start.y=e,this.end.x=i,this.end.y=s;var n=i-t,r=s-e,h=Math.sqrt(n*n+r*r),a=o(Math.atan2(r,n));if(a=(360+a)%360,h<this.cfg.distanceMin)return this;switch(this.cfg.dirMode){case 0:var c=a<180?"down":"up";this.setKeyState(c,!0);break;case 1:c=a>90&&a<=270?"left":"right",this.setKeyState(c,!0);break;case 2:c=a>45&&a<=135?"down":a>135&&a<=225?"left":a>225&&a<=315?"up":"right",this.setKeyState(c,!0);break;case 3:a>22.5&&a<=67.5?(this.setKeyState("down",!0),this.setKeyState("right",!0)):a>67.5&&a<=112.5?this.setKeyState("down",!0):a>112.5&&a<=157.5?(this.setKeyState("down",!0),this.setKeyState("left",!0)):a>157.5&&a<=202.5?this.setKeyState("left",!0):a>202.5&&a<=247.5?(this.setKeyState("left",!0),this.setKeyState("up",!0)):a>247.5&&a<=292.5?this.setKeyState("up",!0):a>292.5&&a<=337.5?(this.setKeyState("up",!0),this.setKeyState("right",!0)):this.setKeyState("right",!0)}return this}}}})});