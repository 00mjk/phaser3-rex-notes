!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.rexcanvasplugin=t():e.rexcanvasplugin=t()}("undefined"!=typeof self?self:this,function(){return function(e){var t={};function i(r){if(t[r])return t[r].exports;var s=t[r]={i:r,l:!1,exports:{}};return e[r].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=e,i.c=t,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=26)}({26:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(27);const s=Phaser.Utils.Objects.GetValue,a=Phaser.GameObjects.BuildGameObject;t.default=class extends Phaser.Plugins.BasePlugin{constructor(e){super(e),e.registerGameObject("rexCanvas",this.addCanvas,this.makeCanvas)}start(){this.game.events.once("destroy",this.destroy,this)}addCanvas(e,t,i,s){return this.displayList.add(new r.a(this.scene,e,t,i,s))}makeCanvas(e){var t=s(e,"width",256),i=s(e,"height",256),n=new r.a(this.scene,0,0,t,i);a(this.scene,n,e);var o=s(e,"fill",null);return n.fill(o),n}}},27:function(e,t,i){"use strict";var r=i(28);const s=Phaser.Display.Canvas.Pool,a=Phaser.GameObjects.Components,n=Phaser.GameObjects.GameObject;var o=new Phaser.Class({Extends:n,Mixins:[a.Alpha,a.BlendMode,a.ComputedSize,a.Depth,a.Flip,a.GetBounds,a.Origin,a.Pipeline,a.ScaleMode,a.ScrollFactor,a.Tint,a.Transform,a.Visible,r.a],initialize:function(e,t,i,r,a){void 0===t&&(t=0),void 0===i&&(i=0),void 0===r&&(r=256),void 0===a&&(a=256),n.call(this,e,"Canvas"),this.resolution=1,this.canvas=s.create(this,this.resolution*r,this.resolution*a),this.context=this.canvas.getContext("2d"),this.canvasTexture=null,this.dirty=!0,this.setPosition(t,i),this.setSize(r,a),this.setOrigin(),this.initPipeline("TextureTintPipeline"),e.sys.game.config.renderType===Phaser.WEBGL&&e.sys.game.renderer.onContextRestored(function(){this.canvasTexture=null,this.dirty=!0},this)},getCanvas:function(e){return e||(this.dirty=!0),this.canvas},needRedraw:function(){return this.dirty=!0,this},clear:function(){var e=this.canvas;return e.getContext("2d").clearRect(0,0,e.width,e.height),this.dirty=!0,this},fill:function(e){var t=this.canvas,i=t.getContext("2d");return i.fillStyle=e,i.fillRect(0,0,t.width,t.height),this.dirty=!0,this},preDestroy:function(){s.remove(this.canvas)},generateTexture:function(e,t,i,r,s){var a,n=this.canvas,o=this.scene.sys;void 0===t&&(t=0),void 0===i&&(i=0),void 0===r?r=n.width:r*=this.resolution,void 0===s?s=n.height:s*=this.resolution;var c=(a=o.textures.exists(e)?o.textures.get(e):o.textures.createCanvas(e,r,s)).getSourceImage();c.width!==r&&(c.width=r),c.height!==s&&(c.height=s);var l=c.getContext("2d");return l.clearRect(0,0,r,s),l.drawImage(n,t,i,r,s),o.game.renderer.gl&&a&&(a.source[0].glTexture=o.game.renderer.canvasToTexture(c,a.source[0].glTexture,!0,0)),this},loadTexture:function(e,t){var i=this.scene.sys;if(!i.textures.exists(e))return this;void 0===t&&(t=!0);var r=i.textures.get(e).getSourceImage(),s=(r.getContext("2d"),this.canvas);return s.width!==r.width&&(s.width=r.width),s.height!==r.height&&(s.height=r.height),destCtx.clearRect(0,0,s.width,s.height),destCtx.drawImage(r,0,0,s.width,s.height),this.dirty=!0,t&&this.setSize(s.width/this.resolution,s.height/this.resolution),this}});t.a=o},28:function(e,t,i){"use strict";var r=i(29),s=i(30);const a=Phaser.Utils.NOOP;var n=a,o=a;n=r.a,o=s.a,t.a={renderWebGL:n,renderCanvas:o}},29:function(e,t,i){"use strict";const r=Phaser.GameObjects.GameObject;t.a=function(e,t,i,s,a){r.RENDER_MASK!==t.renderFlags||t.cameraFilter>0&&t.cameraFilter&s._id||(t.dirty&&(t.canvasTexture=e.canvasToTexture(t.canvas,t.canvasTexture,!0,t.scaleMode),t.dirty=!1),this.pipeline.batchText(this,s,a))}},30:function(e,t,i){"use strict";const r=Phaser.GameObjects.GameObject;t.a=function(e,t,i,s,a){if(!(r.RENDER_MASK!==t.renderFlags||t.cameraFilter>0&&t.cameraFilter&s._id)){var n=e.currentContext;e.currentBlendMode!==t.blendMode&&(e.currentBlendMode=t.blendMode,n.globalCompositeOperation=e.blendModes[t.blendMode]),e.currentAlpha!==t.alpha&&(e.currentAlpha=t.alpha,n.globalAlpha=t.alpha),e.currentScaleMode!==t.scaleMode&&(e.currentScaleMode=t.scaleMode);var o=t.canvas;if(n.save(),void 0!==a){var c=a.matrix;n.transform(c[0],c[1],c[2],c[3],c[4],c[5])}var l=t.x-s.scrollX*t.scrollFactorX,h=t.y-s.scrollY*t.scrollFactorY;e.config.roundPixels&&(l|=0,h|=0),n.translate(l,h),n.rotate(t.rotation),n.scale(t.scaleX,t.scaleY),n.translate(o.width*(t.flipX?1:0),o.height*(t.flipY?1:0)),n.scale(t.flipX?-1:1,t.flipY?-1:1),n.drawImage(o,0,0,o.width,o.height,-t.displayOriginX,-t.displayOriginY,o.width,o.height),n.restore()}}}}).default});