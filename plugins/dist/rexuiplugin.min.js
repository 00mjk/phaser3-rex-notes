!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.rexuiplugin=e():t.rexuiplugin=e()}(window,function(){return function(t){var e={};function i(s){if(e[s])return e[s].exports;var r=e[s]={i:s,l:!1,exports:{}};return t[s].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(s,r,function(e){return t[e]}.bind(null,r));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=140)}({137:function(t,e){},140:function(t,e,i){"use strict";i.r(e);class s{constructor(t){this.scene=t}static register(t,e){s.prototype[t]=e}}var r=s,n=i(18);const h=Phaser.Utils.Objects.GetValue;var l=function(t,e){return void 0===e&&(e={}),"number"==typeof t?(e.left=t,e.right=t,e.top=t,e.bottom=t):(e.left=h(t,"left",0),e.right=h(t,"right",0),e.top=h(t,"top",0),e.bottom=h(t,"bottom",0)),e},o=function(t){return t.hasOwnProperty("rexSizer")||(t.rexSizer={}),t.rexSizer},a=function(){if(!this.visible)return 0;var t,e,i,s=0,r=this.sizerChildren;if(0===this.orientation)for(var n=0,h=r.length;n<h;n++)(t=r[n]).visible&&(i=0===t.rexSizer.proportion?t.isRexSizer?t.childrenWidth:t.width:0,s+=i+=(e=t.rexSizer.padding).left+e.right);else for(n=0,h=r.length;n<h;n++)(t=r[n]).hasOwnProperty("rexSizer")&&t.visible&&(i=t.isRexSizer?t.childrenWidth:t.width,i+=(e=t.rexSizer.padding).left+e.right,s=Math.max(i,s));return s=Math.max(s,this.minWidth)},d=function(){if(!this.visible)return 0;var t,e,i,s=0,r=this.sizerChildren;if(0===this.orientation)for(var n=0,h=r.length;n<h;n++)(t=r[n]).visible&&(i=t.isRexSizer?t.childrenHeight:t.height,i+=(e=t.rexSizer.padding).top+e.bottom,s=Math.max(i,s));else for(n=0,h=r.length;n<h;n++)(t=r[n]).hasOwnProperty("rexSizer")&&t.visible&&(i=0===t.rexSizer.proportion?t.isRexSizer?t.childrenHeight:t.height:0,s+=i+=(e=t.rexSizer.padding).top+e.bottom);return s=Math.max(s,this.minHeight)},u=function(){for(var t,e,i=0,s=this.sizerChildren,r=0,n=s.length;r<n;r++)(t=s[r]).visible&&(e=t.rexSizer.proportion)>0&&(i+=e);return i},c=function(t){void 0===t&&(t=[]);for(var e,i=this.sizerChildren,s=0,r=i.length;s<r;s++)(e=i[s]).isRexSizer&&(t.push(e),t.push(...e.getAllChildrenSizer()));return t},g=i(3),p=function(t,e,i){!t||void 0===e&&void 0===i||(t.resize?(void 0===e&&(e=t.width),void 0===i&&(i=t.height),t.resize(e,i)):(void 0!==e&&(t.displayWidth=e),void 0!==i&&(t.displayHeight=i)))};const v=Phaser.GameObjects.Zone,f=Phaser.Display.Align.In.QuickSet;var x=new v({sys:{queueDepthSort:g.a,events:{once:g.a}}},0,0,1,1);x.setOrigin(0);var b=function(t){if(!this.visible)return this;if(void 0===t)for(var e=0,i=(y=this.getAllChildrenSizer([this])).length;e<i;e++)(a=y[e])._childrenWidth=void 0,a._childrenHeight=void 0,a._childrenProportion=void 0;var s,r,n,h,l;if(t&&(this.rexSizer.expand&&(0===t.orientation?h=!0:n=!0),this.childrenProportion>0&&(0===this.orientation?n=!0:h=!0)),n){var o=this.rexSizer.padding;s=t.width-o.left-o.right}else s=this.childrenWidth;h?(o=this.rexSizer.padding,r=t.height-o.top-o.bottom):r=this.childrenHeight;this.resize(s,r),l=this.childrenProportion>0&&void 0!==t?(0===this.orientation?this.width-this.childrenWidth:this.height-this.childrenHeight)/this.childrenProportion:0;var a,d,u,c,g,v,b,C,y=this.sizerChildren,m=this.x-this.displayWidth*this.originX,w=this.y-this.displayHeight*this.originY,P=m,O=w;for(e=0,i=y.length;e<i;e++)if((a=y[e]).visible){if(a.isRexSizer&&a.layout(this),o=(d=a.rexSizer).padding,b=void 0,C=void 0,0===this.orientation){switch(d.proportion){case 0:u=P+o.left,P+=(g=a.width)+o.left+o.right;break;case-1:u=m+o.left,b=g=this.width-o.left-o.right;break;default:u=P+o.left,P+=(g=d.proportion*l)+o.left+o.right}c=w+o.top,v=this.height-o.top-o.bottom,d.expand&&(C=v)}else{switch(d.proportion){case 0:c=O+o.top,O+=(v=a.height)+o.top+o.bottom;break;case-1:c=w+o.top,C=v=this.height-o.top-o.bottom;break;default:c=O+o.top,O+=(v=d.proportion*l)+o.top+o.bottom}u=m+o.left,g=this.width-o.left-o.right,d.expand&&(b=g)}a.isRexSizer||p(a,b,C),x.setPosition(u,c).setSize(g,v),f(a,x,d.align),this.resetChildState(a)}return this},C=function(t,e){void 0===e&&(e=16777215);for(var i,s=this.getAllChildren([this]),r=0,n=s.length;r<n;r++)(i=s[r]).getBounds&&t.lineStyle(1,e).strokeRectShape(i.getBounds());return this},y={x:0,h:0,horizontal:0,"left-to-right":0,y:1,v:1,vertical:1,"top-to-bottom":1},m={center:Phaser.Display.Align.CENTER,left:Phaser.Display.Align.LEFT_CENTER,right:Phaser.Display.Align.RIGHT_CENTER,top:Phaser.Display.Align.TOP_CENTER,bottom:Phaser.Display.Align.BOTTOM_CENTER};const w=n.a,P=Phaser.Utils.Objects.IsPlainObject,O=Phaser.Utils.Objects.GetValue,S=Phaser.Utils.Array.Remove,M=Phaser.Display.Align.CENTER;class T extends w{constructor(t,e,i,s,r,n){var h;P(e)?(e=O(h=e,"x",0),i=O(h,"y",0),s=O(h,"width",void 0),r=O(h,"height",void 0)):P(s)?(s=O(h=s,"width",void 0),r=O(h,"height",void 0)):P(n)&&(h=n),void 0!==h&&(n=O(h,"orientation",0)),super(t,e,i,2,2),this.setName(O(h,"name","")),this.type="rexSizer",this.isRexSizer=!0,this.sizerChildren=[],this.setOrientation(n),this.setMinWidth(s),this.setMinHeight(r)}destroy(t){this.scene&&(this.sizerChildren.length=0,super.destroy(t))}setOrientation(t){return"string"==typeof t&&(t=y[t]),this.orientation=t,this}setExtendFlag(t){return void 0===t&&(t=!0),this.expandFlag=t,this}add(t,e,i,s,r){super.add(t);var n=typeof e;if(null===e)return this;if("number"===n);else if("string"===n)e=_[e];else if(P(e)){var h;e=O(h=e,"proportion",0),i=O(h,"align",M),s=O(h,"padding",0),r=O(h,"expand",!1)}return"string"==typeof i&&(i=m[i]),void 0===e&&(e=0),void 0===i&&(i=M),void 0===s&&(s=0),void 0===r&&(r=!1),(h=this.getSizerConfig(t)).proportion=e,h.align=i,h.padding=l(s),h.expand=r,this.sizerChildren.push(t),this}addBackground(t,e){return this.add(t,-1,void 0,e,!0),this}remove(t){return S(this.sizerChildren,t),super.remove(t),this}setMinWidth(t){return null==t&&(t=0),this.minWidth=t,this}setMinHeight(t){return null==t&&(t=0),this.minHeight=t,this}get childrenWidth(){return void 0===this._childrenWidth&&(this._childrenWidth=this.getChildrenWidth()),this._childrenWidth}get childrenHeight(){return void 0===this._childrenHeight&&(this._childrenHeight=this.getChildrenHeight()),this._childrenHeight}get childrenProportion(){return void 0===this._childrenProportion&&(this._childrenProportion=this.getChildrenProportion()),this._childrenProportion}}var R={getSizerConfig:o,getChildrenWidth:a,getChildrenHeight:d,getChildrenProportion:u,getAllChildrenSizer:c,layout:b,drawBounds:C};Object.assign(T.prototype,R);const _={min:0,full:-1};var H=T,Y=i(7);r.register("sizer",function(t,e,i,s,r){return new H(this.scene,t,e,i,s,r)}),Object(Y.a)(window,"RexPlugins.UI.Sizer",H);var k=function(){if(!this.visible)return 0;for(var t,e,i,s,r,n=0,h=this.gridChildren,l=0;l<this.columnCount;l++){if(t=0,void 0===(r=this.columnProportions[l])||0===r){for(var o=0;o<this.rowCount;o++)(e=h[o*this.columnCount+l])&&e.visible&&(s=e.isRexSizer?e.childrenWidth:e.width,s+=(i=e.rexSizer.padding).left+i.right,t=Math.max(t,s));n+=t}this.columnWidth[l]=t}return n=Math.max(n,this.minWidth)},X=function(){if(!this.visible)return 0;for(var t,e,i,s,r,n=0,h=this.gridChildren,l=0;l<this.rowCount;l++){if(t=0,void 0===(r=this.rowProportions[l])||0===r){for(var o=0;o<this.columnCount;o++)(e=h[l*this.columnCount+o])&&e.visible&&(s=e.isRexSizer?e.childrenHeight:e.height,s+=(i=e.rexSizer.padding).top+i.bottom,t=Math.max(t,s));n+=t}this.rowHeight[l]=t}return n=Math.max(n,this.minHeight)},z=function(t){void 0===t&&(t=[]);for(var e,i=this.gridChildren,s=0,r=i.length;s<r;s++)(e=i[s])&&e.isRexSizer&&(t.push(e),t.push(...e.getAllChildrenSizer()));return t};const W=Phaser.GameObjects.Zone,I=Phaser.Display.Align.In.QuickSet;var E=new W({sys:{queueDepthSort:g.a,events:{once:g.a}}},0,0,1,1);E.setOrigin(0);var D=function(t){if(!this.visible)return this;if(void 0===t)for(var e=this.getAllChildrenSizer([this]),i=0,s=e.length;i<s;i++)(d=e[i])._childrenWidth=void 0,d._childrenHeight=void 0,d._childrenProportion=void 0;var r,n,h,l,o,a,d,u,c=this.totalColumnProportions,g=this.totalRowProportions;if(t&&(this.rexSizer.expand&&(0===t.orientation?l=!0:h=!0),c>0&&(h=!0),g>0&&(l=!0)),h){var v=this.rexSizer.padding;r=t.width-v.left-v.right}else r=this.childrenWidth;if(l){var v=this.rexSizer.padding;n=t.height-v.top-v.bottom}else n=this.childrenHeight;this.resize(r,n),o=c>0&&void 0!==t?(this.width-this.childrenWidth)/c:0;a=g>0&&void 0!==t?(this.height-this.childrenWidth)/g:0;var f,x,b,C,y,m,w=this.x-this.displayWidth*this.originX,P=w,O=this.y-this.displayHeight*this.originY;for(i=0,s=this.backgroundChildren.length;i<s;i++)(d=this.backgroundChildren[i]).visible&&(f=P+(v=(u=d.rexSizer).padding).left,x=O+v.top,b=this.width-v.left-v.right,C=this.height-v.top-v.bottom,p(d,b,C),E.setPosition(f,x).setSize(b,C),I(d,E,u.align),this.resetChildState(d));for(var S=0;S<this.rowCount;S++){P=w;for(var M=0;M<this.columnCount;M++)if(d=this.gridChildren[S*this.columnCount+M])if(d.visible){switch(d.isRexSizer&&d.layout(this),v=(u=d.rexSizer).padding,y=this.columnProportions[M],m=this.rowProportions[S],y){case 0:case void 0:f=P+v.left,b=d.width;break;default:f=P+v.left,b=y*o}switch(m){case 0:case void 0:x=O+v.top,C=d.height;break;default:x=O+v.top,C=m*a}E.setPosition(f,x).setSize(b,C),I(d,E,u.align),this.resetChildState(d),P+=this.columnWidth[M]}else P+=this.columnWidth[M];else P+=this.columnWidth[M];O+=this.rowHeight[S]}return this};const j=n.a,A=Phaser.Utils.Objects.IsPlainObject,V=Phaser.Utils.Objects.GetValue,F=Phaser.Utils.Array.Remove,L=Phaser.Display.Align.CENTER;class B extends j{constructor(t,e,i,s,r,n,h){var l;A(e)?(e=V(l=e,"x",0),i=V(l,"y",0),s=V(l,"width",void 0),r=V(l,"height",void 0),n=V(l,"column",0),h=V(l,"row",0)):A(s)?(s=V(l=s,"width",void 0),r=V(l,"height",void 0),n=V(l,"column",0),h=V(l,"row",0)):A(n)&&(n=V(l=n,"column",0),h=V(l,"row",0)),super(t,e,i,2,2),this.type="rexGridSizer",this.isRexSizer=!0,this.setName(V(l,"name","")),this.initialGrid(n,h),this.setMinWidth(s),this.setMinHeight(r)}destroy(t){this.scene&&(this.gridChildren.length=0,this.backgroundChildren.length=0,super.destroy(t))}setColumnProportion(t,e){return t>=this.columnProportions.length?this:(this.columnProportions[t]=e,this)}setRowProportion(t,e){return t>=this.rowProportions.length?this:(this.rowProportions[t]=e,this)}add(t,e,i,s,r,n){var h;(super.add(t),A(e))&&(e=V(h=e,"column",0),i=V(h,"row",0),s=V(h,"align",L),r=V(h,"padding",0),n=V(h,"expand",!1));return"string"==typeof s&&(s=m[s]),void 0===s&&(s=L),void 0===r&&(r=0),void 0===n&&(n=!1),(h=this.getSizerConfig(t)).align=s,h.padding=l(r),h.expand=n,this.gridChildren[i*this.columnCount+e]=t,this}addBackground(t,e){super.add(t),void 0===e&&(e=0);var i=this.getSizerConfig(t);return i.align=L,i.padding=l(e),i.expand=!0,this.backgroundChildren.push(t),this}remove(t){return F(this.gridChildren,t),F(this.backgroundChildren,t),super.remove(t),this}setMinWidth(t){return null==t&&(t=0),this.minWidth=t,this}setMinHeight(t){return null==t&&(t=0),this.minHeight=t,this}get childrenWidth(){return void 0===this._childrenWidth&&(this._childrenWidth=this.getChildrenWidth()),this._childrenWidth}get childrenHeight(){return void 0===this._childrenHeight&&(this._childrenHeight=this.getChildrenHeight()),this._childrenHeight}get totalColumnProportions(){for(var t,e=0,i=0;i<this.columnCount;i++)(t=this.columnProportions[i])>0&&(e+=t);return e}get totalRowProportions(){for(var t,e=0,i=0;i<this.rowCount;i++)(t=this.rowProportions[i])>0&&(e+=t);return e}initialGrid(t,e){return this.columnCount=t,this.rowCount=e,this.gridChildren=[],this.gridChildren.length=t*e,this.backgroundChildren=[],this.columnProportions=[],this.columnProportions.length=t,this.columnWidth=[],this.columnWidth.length=t,this.rowProportions=[],this.rowProportions.length=e,this.rowHeight=[],this.rowHeight.length=e,this}}var G={getSizerConfig:o,getChildrenWidth:k,getChildrenHeight:X,getAllChildrenSizer:z,layout:D,drawBounds:C};Object.assign(B.prototype,G);var Z=B;r.register("gridSizer",function(t,e,i,s,r,n){return this.scene.sys.displayList.add(new Z(this.scene,t,e,i,s,r,n))}),Object(Y.a)(window,"RexPlugins.UI.GridSizer",Z);var U=i(137),N=i.n(U),Q=function(t,e){var i;for(var s in void 0===e&&(e=[]),t)void 0!==(i=t[s]).name?e.push(i):Q(i,e);return e};const q=/(\S+)\[(\d+)\]/i;var J=[],K=function(t){if("string"==typeof t&&(t=t.split(".")),0!==t.length){var e,i=t.shift();if("#"===i.charAt(0)){i=i.substring(1);for(var s=0,r=(n=Q(this.childrenMap,J)).length;s<r;s++)if(n[s].name===i){e=n[s];break}J.length=0}else if(-1===i.indexOf("["))e=this.childrenMap[i];else{var n,h=i.match(q);null!=h&&(n=this.childrenMap[h[1]])&&(e=n[h[2]])}return 0===t.length?e:e&&e.childrenMap?e.GetElement(t):null}};const $=Phaser.Utils.Objects.GetValue;class tt extends H{constructor(t,e){super(t,e),this.type="rexLabel";var i,s=$(e,"background",void 0),r=$(e,"icon",void 0),n=$(e,"text",void 0),h=$(e,"space.left",0),l=$(e,"space.right",0),o=$(e,"space.top",0),a=$(e,"space.bottom",0),d=$(e,"space.icon",0);(s&&this.addBackground(s),r)&&(i=0===this.orientation?{left:h,right:n?d:l,top:o,bottom:a}:{left:h,right:l,top:o,bottom:n?d:a},this.add(r,0,"center",i));n&&(i=0===this.orientation?{left:r?0:h,right:l,top:o,bottom:a}:{left:h,right:l,top:r?0:o,bottom:a},this.add(n,0,"center",i));var u=$(e,"click",void 0);u&&this.addClickCallback(u,this),this.childrenMap={},this.childrenMap.background=s,this.childrenMap.icon=r,this.childrenMap.text=n}get text(){var t=this.childrenMap.text;return void 0===t?"":t.text?t.text:t.getData("text")}set text(t){var e=this.childrenMap.text;void 0!==e&&(e.setText?e.setText(t):e.setData("text",t))}setText(t){return this.text=t,this}appendText(t){this.text+=t}}var et={addClickCallback:N.a,getElement:K};Object.assign(tt.prototype,et);var it=tt;r.register("label",function(t){return new it(this.scene,t)}),Object(Y.a)(window,"RexPlugins.UI.Label",it);const st=Phaser.Utils.Objects.GetValue;class rt extends H{constructor(t,e){void 0===e&&(e=lt),e.orientation=1,super(t,e),this.type="rexDialog";var i=st(e,"background",void 0),s=st(e,"title",void 0),r=st(e,"content",void 0),n=st(e,"buttons",void 0);n&&0===n.length&&(n=void 0);var h=st(e,"space.left",0),l=st(e,"space.right",0),o=st(e,"space.top",0),a=st(e,"space.bottom",0),d=st(e,"space.title",0),u=st(e,"space.content",0),c=st(e,"space.button",0);if(i&&this.addBackground(i),s){var g={left:h,right:l,top:o,bottom:r||n?d:a};this.add(s,0,"center",g,!0)}if(r){g={left:h,right:l,top:s?0:o,bottom:n?u:a};this.add(r,0,"center",g)}if(n){var p,v,f=st(e,"buttonsOrientation",0);if("string"==typeof f&&(f=y[f]),0===f){p=new H(t,0,0,0,0,{orientation:0});g={left:h,right:l,top:s||r?0:o,bottom:a};this.add(p,0,"center",g,!0)}else p=this;for(var x=0,b=n.length;x<b;x++){if(v=n[x],0===f){g={left:x>=1?c:0,right:0,top:0,bottom:0};p.add(v,1,"center",g,!0)}else{g={left:h,right:l,top:x>=1?c:0,bottom:x===b-1?a:0};p.add(v,0,"center",g,!0)}v.setInteractive().on("pointerdown",nt("button.click",v,x),this).on("pointerover",nt("button.over",v,x),this).on("pointerout",nt("button.out",v,x),this)}}this.childrenMap={},this.childrenMap.background=i,this.childrenMap.title=s,this.childrenMap.content=r,this.childrenMap.buttons=n}}var nt=function(t,e,i){return function(){this.emit(t,e,i)}},ht={getElement:K};Object.assign(rt.prototype,ht);const lt={};var ot=rt;r.register("dialog",function(t){return new ot(this.scene,t)}),Object(Y.a)(window,"RexPlugins.UI.Dialog",ot);var at=function(t,e,i,s){return function(){this.emit(t,e,i,s)}},dt=function(t,e,i,s){for(var r,n=this.scene,h=new H(n,{orientation:i}),l=0,o=0,a=e.length;o<a;o++)r=e[o],o>=1&&(l={left:0===i?s:0,right:0,top:1===i?s:0,bottom:0}),h.add(e[o],0,"center",l,!0),r.setInteractive().on("pointerdown",at("button.click",r,t,o),this).on("pointerover",at("button.over",r,t,o),this).on("pointerout",at("button.out",r,t,o),this);return h};const ut=Phaser.Utils.Objects.GetValue;class ct extends Z{constructor(t,e){void 0===e&&(e=pt),e.column=3,e.row=3,super(t,e),this.type="rexTabs";var i=ut(e,"background",void 0),s=ut(e,"panel",void 0),r=ut(e,"leftButtons",void 0);r&&0===r.length&&(r=void 0);var n=ut(e,"rightButtons",void 0);n&&0===n.length&&(n=void 0);var h=ut(e,"topButtons",void 0);h&&0===h.length&&(h=void 0);var l=ut(e,"bottomButtons",void 0);l&&0===l.length&&(l=void 0);var o=ut(e,"space.left",0),a=ut(e,"space.right",0),d=ut(e,"space.top",0),u=ut(e,"space.bottom",0),c=ut(e,"space.leftButtonsOffset",0),g=ut(e,"space.rightButtonsOffset",0),p=ut(e,"space.topButtonsOffset",0),v=ut(e,"space.bottomButtonsOffset",0),f=ut(e,"space.leftButton",0),x=ut(e,"space.rightButton",0),b=ut(e,"space.topButton",0),C=ut(e,"space.bottomButton",0);if(i&&this.addBackground(i),s){var y={left:r?0:o,right:n?0:a,top:h?0:d,bottom:l?0:u};this.add(s,1,1,void 0,y,!1)}if(r){var m=dt.call(this,"left",r,1,f);y={left:o,top:c};this.add(m,0,1,void 0,y,!1)}if(n){m=dt.call(this,"right",n,1,x),y={right:a,top:g};this.add(m,2,1,void 0,y,!1)}if(h){m=dt.call(this,"top",h,0,b),y={top:d,left:p};this.add(m,1,0,void 0,y,!1)}if(l){m=dt.call(this,"bottom",l,0,C),y={bottom:u,left:v};this.add(m,1,2,void 0,y,!1)}this.childrenMap={},this.childrenMap.background=i,this.childrenMap.panel=s,this.childrenMap.leftButtons=r,this.childrenMap.rightButtons=n,this.childrenMap.topButtons=h,this.childrenMap.bottomButtons=l}emitButtonClick(t,e){var i=this.getElement(t+"Buttons["+e+"]");return i?(this.emit("button.click",i,t,e),this):this}}var gt={getElement:K};Object.assign(ct.prototype,gt);const pt={};var vt=ct;r.register("tabs",function(t){return new vt(this.scene,t)}),Object(Y.a)(window,"RexPlugins.UI.Tabs",vt);const ft=Phaser.Math.Distance.Between,xt=Phaser.Math.RotateAroundDistance,bt=Phaser.Math.Percent;var Ct=function(t,e,i){var s,r=this.getStartPoint(),n=this.getEndPoint();if(r.y===n.y){var h=Math.min(r.x,n.x),l=Math.max(r.x,n.x);s=bt(e,h,l)}else if(r.x===n.x)h=Math.min(r.y,n.y),l=Math.max(r.y,n.y),s=bt(i,h,l);else{var o,a=this.childrenMap.thumb;P1.x=e,P1.y=i,o=ft(P1.x,P1.y,a.x,a.y),P1=xt(P1,a.x,a.y,-this.axisRotation,o),P1.y=a.y,o=ft(P1.x,P1.y,a.x,a.y),P1=xt(P1,a.x,a.y,this.axisRotation,o),h=Math.min(r.x,n.x),l=Math.max(r.x,n.x),s=bt(P1.x,h,l)}this.value=s};const yt=Phaser.Display.Align.In.QuickSet;var mt={},wt=function(t,e){void 0===e&&(e=mt);var i=this.childrenMap.thumb,s=i.x,r=i.y;return yt(i,this,t),e.x=i.x,e.y=i.y,i.x=s,i.y=r,e};const Pt=Phaser.Display.Align.LEFT_CENTER,Ot=Phaser.Display.Align.TOP_CENTER;var St={},Mt=function(t){void 0===t&&(t=St);var e=1===this.orientation?Pt:Ot;return wt.call(this,e,t)};const Tt=Phaser.Display.Align.RIGHT_CENTER,Rt=Phaser.Display.Align.BOTTOM_CENTER;var _t={},Ht=function(t){void 0===t&&(t=_t);var e=1===this.orientation?Tt:Rt;return wt.call(this,e,t)};const Yt=Phaser.Math.Linear;var kt=function(t){void 0===t&&(t=this.value);var e=this.getStartPoint(),i=this.getEndPoint(),s=this.childrenMap.thumb;return s.x=Yt(e.x,i.x,t),s.y=Yt(e.y,i.y,t),this.resetChildState(s),this};const Xt=Phaser.Utils.Objects.GetValue,zt=Phaser.Math.Clamp,Wt=Phaser.Math.Linear,It=Phaser.Math.Percent;class Et extends H{constructor(t,e){super(t,e),this.type="rexSlider";var i=Xt(e,"track",void 0),s=Xt(e,"thumb",void 0);i&&this.add(i,0,void 0,0,!0),s&&(this.add(s,null),s.setInteractive(),this.scene.input.setDraggable(s),s.on("drag",Ct,this)),this.childrenMap={},this.childrenMap.track=i,this.childrenMap.thumb=s;var r=Xt(e,"valuechangeCallback",null);if(null!==r){var n=Xt(e,"valuechangeCallbackScope",void 0);this.on("valuechange",r,n)}this.setValue(Xt(e,"value",0))}get value(){return this._value}set value(t){var e=this._value;this._value=zt(t,0,1),e!==this._value&&(this.updateThumb(this._value),this.emit("valuechange",this._value,e))}setValue(t,e,i){return void 0!==e&&(t=It(t,e,i)),this.value=t,this}addValue(t,e,i){return void 0!==e&&(t=It(t,e,i)),this.value+=t,this}getValue(t,e){var i=this.value;return void 0!==t&&(i=Wt(t,e,i)),i}layout(t){return super.layout(t),this.updateThumb(),this}}var Dt={getStartPoint:Mt,getEndPoint:Ht,updateThumb:kt,getElement:K};Object.assign(Et.prototype,Dt);var jt=Et;r.register("slider",function(t){return new jt(this.scene,t)}),Object(Y.a)(window,"RexPlugins.UI.Slider",jt);var At=i(41);const Vt=Phaser.Utils.Objects.GetValue;var Ft=function(t,e){var i=Vt(e,"width",void 0),s=Vt(e,"height",void 0);return new At.a(t,0,0,i,s,e)};const Lt=Phaser.Utils.Objects.GetValue;class Bt extends H{constructor(t,e){void 0===e&&(e=Gt),e.orientation=0,super(t,e),this.type="rexGridTable";var i=Lt(e,"background",void 0),s=Lt(e,"table",void 0),r=Lt(e,"slider",void 0);i&&this.addBackground(i);var n,h=Ft(t,s);h.on("cellvisible",function(t){var e,i=this.createCellContainerCallback,s=this.createCellContainerCallbackScope;t.item=this.items[t.index],e=s?i.call(s,t):i(t),t.item=void 0,t.setContainer(e)},this),this.add(h,0,"center",void 0,!0),r&&(r.orientation=e.orientation,(n=new jt(t,r)).on("valuechange",function(t){h.setTableOYByPercentage(t).updateTable()}),this.add(n,0,"center",void 0,!0)),this.childrenMap={},this.childrenMap.table=h,this.childrenMap.slider=n;var l=Lt(e,"createCellContainerCallback",g.a),o=Lt(e,"createCellContainerCallbackScope",void 0);this.setCreateCellContainerCallback(l,o),this.setItems(Lt(e,"items",[]))}setCreateCellContainerCallback(t,e){return this.createCellContainerCallback=t,this.createCellContainerCallbackScope=e,this}setItems(t){return void 0===t?this.items.length=0:this.items=t,this.childrenMap.table.setCellsCount(this.items.length).setTableOY(0).updateTable(!0),this}}const Gt={};Object.assign(Bt.prototype,{});var Zt=Bt;r.register("gridTable",function(t){return new Zt(this.scene,t)}),Object(Y.a)(window,"RexPlugins.UI.GridTable",Zt);var Ut=i(42).a;r.register("roundRectangle",function(t,e,i,s,r,n,h){var l=new Ut(this.scene,t,e,i,s,r,n,h);return this.scene.sys.displayList.add(l),l}),Object(Y.a)(window,"RexPlugins.UI.RoundRectangle",Ut);e.default=class extends Phaser.Plugins.ScenePlugin{constructor(t,e){super(t,e),this.add=new r(t)}}},18:function(t,e,i){"use strict";const s=Phaser.GameObjects.Zone,r=Phaser.GameObjects.Components,n=Phaser.Math.RotateAround,h=Phaser.Utils.Array;class l extends s{constructor(t,e,i,s,r,n){Array.isArray(s)&&(n=s,s=void 0),super(t,e,i,s,r),this.children=t.add.group(),this.type="rexContainerLite",this.isRexContainerLite=!0,this.syncChildrenEnable=!0,this._flipX=!1,this._flipY=!1,this._alpha=1,this._mask=null,this._scrollFactorX=1,this._scrollFactorY=1,n&&this.add(n)}destroy(t){this.scene&&(this.children.destroy(!0),this.children=void 0,super.destroy(t))}add(t){return Array.isArray(t)?this.addMultiple(t):this._add(t),this}addMultiple(t){return t.forEach(this._add,this),this}remove(t){return this.children.remove(t),this}clear(){return this.children.clear(),this}getChildren(){return this.children.getChildren()}getAllChildren(t){void 0===t&&(t=[]);for(var e,i=this.children.getChildren(),s=0,r=i.length;s<r;s++)e=i[s],t.push(e),e.hasOwnProperty("isRexContainerLite")&&t.push(...e.getAllChildren());return t}contains(t){if(this.children.contains(t))return!0;for(var e,i=this.children.getChildren(),s=0,r=i.length;s<r;s++)if((e=i[s]).isRexContainerLite&&e.contains(t))return!0;return!1}worldToLocal(t){return t.x-=this.x,t.y-=this.y,n(t,0,0,-this.rotation),t.x/=this.scaleX,t.y/=this.scaleY,t.x*=this.flipX?-1:1,t.y*=this.flipY?-1:1,t}localToWorld(t){return t.x*=this.flipX?-1:1,t.y*=this.flipY?-1:1,t.x*=this.scaleX,t.y*=this.scaleY,n(t,0,0,this.rotation),t.x+=this.x,t.y+=this.y,t}updateChildPosition(t){t.isRexContainerLite&&(t.syncChildrenEnable=!1);var e=this.getLocalState(t);return t.x=e.x,t.y=e.y,this.localToWorld(t),t.scaleX=e.scaleX*this.scaleX,t.scaleY=e.scaleY*this.scaleY,void 0!==t.flipX&&(t.flipX=this.flipX?!e.flipX:e.flipX,t.flipY=this.flipY?!e.flipY:e.flipY),t.rotation=e.rotation+this.rotation,t.isRexContainerLite&&(t.syncChildrenEnable=!0,t.syncPosition()),this}updateChildVisible(t){return t.visible=this.visible&&this.getLocalState(t).visible,this}updateChildAlpha(t){return t.alpha=this.alpha*this.getLocalState(t).alpha,this}updateChildMask(t){return null==this.mask?this:((this.mask.hasOwnProperty("geometryMask")?this.mask.geometryMask:this.mask.bitmapMask)!==t&&(t.mask=this.mask),this)}updateChildScrollFactor(t){return t.setScrollFactor(this.scrollFactorX,this.scrollFactorY),this}syncPosition(){return this.children&&this.syncChildrenEnable&&this.children.getChildren().forEach(this.updateChildPosition,this),this}syncVisible(){return this.children&&this.syncChildrenEnable&&this.children.getChildren().forEach(this.updateChildVisible,this),this}syncAlpha(){return this.children&&this.syncChildrenEnable&&this.children.getChildren().forEach(this.updateChildAlpha,this),this}syncMask(){return this.children&&this.syncChildrenEnable&&this.children.getChildren().forEach(this.updateChildMask,this),this}syncScrollFactor(){return this.children&&this.syncChildrenEnable&&this.children.getChildren().forEach(this.updateChildScrollFactor,this),this}syncProperties(){return this.syncPosition().syncVisible().syncAlpha().syncMask(),this}getLocalState(t){return t.hasOwnProperty("rexContainer")||(t.rexContainer={}),t.rexContainer}resetChildState(t){var e=this.getLocalState(t);return e.x=t.x,e.y=t.y,this.worldToLocal(e),e.scaleX=o(t.scaleX,this.scaleX),e.scaleY=o(t.scaleY,this.scaleY),void 0!==t.flipX&&(e.flipX=t.flipX,e.flipY=t.flipY),e.rotation=t.rotation-this.rotation,e.alpha=o(t.alpha,this.alpha),e.visible=t.visible,this}setChildLocalPosition(t,e,i){var s=this.getLocalState(t);return s.x=e,s.y=i,this.updateChildPosition(t),this}_add(t){return this.children.add(t),this.resetChildState(t).updateChildVisible(t).updateChildScrollFactor(t).updateChildMask(t),this}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this.syncPosition())}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this.syncPosition())}get rotation(){return super.rotation}set rotation(t){this.rotation!==t&&(super.rotation=t,this.syncPosition())}get scaleX(){return super.scaleX}set scaleX(t){this.scaleX!==t&&(super.scaleX=t,this.syncPosition())}get scaleY(){return super.scaleY}set scaleY(t){this.scaleY!==t&&(super.scaleY=t,this.syncPosition())}get flipX(){return this._flipX}set flipX(t){this._flipX!==t&&(this._flipX=t,this.syncPosition())}get flipY(){return this._flipY}set flipY(t){this._flipY!==t&&(this._flipY=t,this.syncPosition())}get visible(){return super.visible}set visible(t){this.visible!==t&&(super.visible=t,this.syncVisible())}get alpha(){return this._alpha}set alpha(t){this._alpha!==t&&(this._alpha=t,this.syncAlpha())}get mask(){return this._mask}set mask(t){this._mask!==t&&(this._mask=t,this.syncMask())}setMask(t){return this.mask=t,this}clearMask(t){return void 0===t&&(t=!1),t&&this.mask&&this.mask.destroy(),this.mask=null,this}get scrollFactorX(){return this._scrollFactorX}set scrollFactorX(t){this._scrollFactorX!==t&&(this._scrollFactorX=t,this.syncScrollFactor())}get scrollFactorY(){return this._scrollFactorY}set scrollFactorY(t){this._scrollFactorY!==t&&(this._scrollFactorY=t,this.syncScrollFactor())}get list(){return this.children.getChildren()}getByName(t){return h.GetFirst(this.list,"name",t)}getRandom(t,e){return h.GetRandom(this.list,t,e)}getFirst(t,e,i,s){return h.GetFirstElement(this.list,t,e,i,s)}getAll(t,e,i,s){return h.GetAll(this.list,t,e,i,s)}count(t,e,i,s){return h.CountAllMatching(this.list,t,e,i,s)}swap(t,e){return h.Swap(this.list,t,e),this}moveTo(t,e){return h.MoveTo(this.list,t,e),this}setAll(t,e,i,s){return h.SetAll(this.list,t,e,i,s),this}resize(t,e){return this.setSize(t,e),this.updateDisplayOrigin(),this}}Object.assign(l.prototype,r.Alpha,r.Flip);var o=function(t,e){return t===e?1:t/e};e.a=l},3:function(t,e,i){"use strict";e.a=function(){}},4:function(t,e,i){"use strict";e.a=function(t){if(Array.isArray(t))t.length=0;else for(var e in t)delete t[e]}},41:function(t,e,i){"use strict";var s=i(18),r=i(4);var n=class{constructor(t,e){this.container=null,this.data=null,this.setParent(t),this._deltaHeight=0}setParent(t){this.parent=t,this.parentContainer=t.getParentContainer()}destroy(){var t=this.parent;0!==this.deltaHeight&&t.nonZeroDeltaHeightCount--,this.cleanData(),this.destroyContainer(),this.parent=void 0,this.parentContainer=void 0}get table(){return this.parent}get colIndx(){return this.parent.cellIndxeToColIndex(this.index)}get rowIndx(){return this.parent.cellIndxeToRowIndex(this.index)}getContainer(){return this.container}setContainer(t){return this.container&&this.container.destroy(),this.container=t,this.parentContainer.add(t),this}destroyContainer(){this.container&&(this.container.destroy(),this.container=null)}popContainer(){if(this.container){var t=this.container;return this.container=null,this.parentContainer.remove(t),t}return null}setXY(t,e){return this.container&&this.parentContainer.setChildLocalPosition(this.container,t,e),this}setData(t,e){return this.data||(this.data={}),this.data[t]=e,this}getData(t,e){this.data||(this.data={});var i=this.data;return i.hasOwnProperty(t)?i[t]:e}cleanData(){this.data&&Object(r.a)(this.data)}get deltaHeight(){return this._deltaHeight}set deltaHeight(t){null==t&&(t=0);var e=this.parent;0===this._deltaHeight&&0!==t?e.nonZeroDeltaHeightCount++:0!==this._deltaHeight&&0===t&&e.nonZeroDeltaHeightCount--,this._deltaHeight=t}setDeltaHeight(t){return this.deltaHeight=t,this}get height(){var t=this.parent;return this.deltaHeight+t.defaultCellHeight}set height(t){var e,i=this.parent;e=void 0===t?0:t-i.defaultCellHeight,this.setDeltaHeight(e)}setHeight(t){return this.height=t,this}get width(){return this.parent.defaultCellWidth}get scene(){return this.parentContainer.scene}},h=i(9).a;const l=Phaser.Utils.Objects.GetValue,o=Phaser.Utils.Array.SpliceOne;var a=new h;var d=class{constructor(t,e){this.parent=t,this.cells=[],this.resetFromJSON(e)}resetFromJSON(t){return this.colCount=void 0,this._nonZeroDeltaHeightCount=0,this.resetTotalRowsHeight(),this.setDefaultCellHeight(l(t,"cellHeight",30)),this.setDefaultCellWidth(l(t,"cellWidth",30)),this.initCells(l(t,"cellsCount",0)),this.setColumnCount(l(t,"columns",1)),this}destroy(){for(var t=0,e=this.cells.length;t<e;t++)this.freeCell(this.cells[t]);this.cells=void 0,this.parent=void 0}get nonZeroDeltaHeightCount(){return this._nonZeroDeltaHeightCount}set nonZeroDeltaHeightCount(t){this._nonZeroDeltaHeightCount!==t&&(this._nonZeroDeltaHeightCount=t,this.resetTotalRowsHeight())}get defaultCellHeightMode(){return 0===this.nonZeroDeltaHeightCount}setDefaultCellHeight(t){return this.defaultCellHeight=t,this}setDefaultCellWidth(t){return this.defaultCellWidth=t,this}initCells(t){var e=this.cells;e.length=t;for(var i=0;i<t;i++)e[i]=null;return this}insertNewCell(t,e){var i=this.cells;if(t===i.length){var s=t+e;i.legth=s;for(var r=t;r<s;r++)i[r]=null}else{var n=[];for(n.length=e,r=0;r<e;r++)n[r]=null;this.cells.splice(t,0,...n)}return this.resetTotalRowsHeight(),this}removeCell(t,e){for(var i=t+e,s=t;s<i;s++)this.freeCell(s);return i===this.cells.length?this.cells.length=t:(1===e?o(this.cells,t):this.cells.splice(t,e),this.buildCellIndex(t)),this.resetTotalRowsHeight(),this}setColumnCount(t){return this.colCount=t,this.resetTotalRowsHeight(),this}get rowCount(){return Math.ceil(this.cells.length/this.colCount)}get cellsCount(){return this.cells.length}isValidCellIdx(t){return t>=0&&t<this.cells.length}heightToRowIndex(t,e){if(this.defaultCellHeightMode){var i=t/this.defaultCellHeight;return i=e?Math.ceil(i):Math.floor(i)}var s,r=this.rowCount,n=t;for(i=0;;){if(n-=this.getRowHeight(i),s=i>=0&&i<r,!(n>0&&s)){if(0===n)return i;if(e){var h=i;(s=(i+=1)>=0&&i<r)||(i=h)}return i}i+=1}}widthToColIndex(t,e){var i=t/this.defaultCellWidth;return i=e?Math.ceil(i):Math.floor(i)}colRowToCellIndex(t,e){return e*this.colCount+t}rowIndexToHeight(t,e){if(this.defaultCellHeightMode)return(e-t+1)*this.defaultCellHeight;for(var i=0,s=t;s<=e;s++)i+=this.getRowHeight(s);return i}colIndexToWidth(t,e){return(e-t+1)*this.defaultCellWidth}getRowHeight(t){var e=this.colCount;if(e<=1)return this.getCellHeight(this.colRowToCellIndex(0,t));for(var i,s=0,r=0;r<e;r++)s<(i=this.getCellHeight(this.colRowToCellIndex(r,t)))&&(s=i);return s}getColWidth(t){return this.defaultCellWidth}getCellHeight(t){if(!this.isValidCellIdx(t))return 0;var e;if(this.defaultCellHeightMode)e=this.defaultCellHeight;else{var i=this.getCell(t,!1),s=i?i.deltaHeight:0;e=this.defaultCellHeight+s}return e}resetTotalRowsHeight(){this._totalRowsHeight=null}get totalRowsHeight(){return null===this._totalRowsHeight&&(this._totalRowsHeight=this.rowIndexToHeight(0,this.rowCount-1)),this._totalRowsHeight}get totalColumnWidth(){return this.colCount*this.defaultCellWidth}cellIndxeToColIndex(t){return t%this.colCount}cellIndxeToRowIndex(t){return Math.floor(t/this.colCount)}getCell(t,e){if(!this.isValidCellIdx(t))return null;if(void 0===e&&(e=!0),null===this.cells[t]&&e){var i=this.newCell(t);this.cells[t]=i}return this.cells[t]}newCell(t){var e=a.pop();return null===e?e=new n(this):e.setParent(this),e.index=t,e}buildCellIndex(t){void 0===t&&(t=0);for(var e,i=this.cells,s=t,r=i.length;s<r;s++)(e=i[s])&&(e.index=s);return this}getParentContainer(){return this.parent}freeCell(t){return"number"==typeof t&&(t=this.cells[t]),t?(t.destroy(),a.push(t),this):this}};const u=Phaser.GameObjects.Graphics;var c=class extends u{constructor(t){super(t.scene,{x:t.x,y:t.y}),this.table=t,this.resize()}destroy(){return this.table=void 0,super.destroy(),this}resize(){var t=this.table;return this.clear().fillStyle(16777215).fillRect(-t.width*t.originX,-t.height*t.originY,t.width,t.height),this}};const g=s.a,p=Phaser.GameObjects.Components,v=Phaser.Structs.Set,f=Phaser.Utils.Objects.GetValue,x=Phaser.Math.Clamp;class b extends g{constructor(t,e,i,s,r,n){super(t,e,i,s,r),this.type="rexGridTable",this.updateFlag=!0,this._tableOX=0,this._tableOY=0,this.visibleCells=new v,this.preVisibleCells=new v,this.visibleStartX=null,this.visibleEndX=null,this.visibleStartY=null,this.visibleEndY=null,this.lastVisibleCellIdx=null,this.execeedTopState=!1,this.execeedBottomState=!1,this.execeedLeftState=!1,this.execeedRightState=!1;var h=f(n,"cellVisibleCallback",null);if(null!==h){var l=f(n,"cellVisibleCallbackScope",void 0);this.on("cellvisible",h,l)}if(null!==(h=f(n,"cellInvisibleCallback",null))){l=f(n,"cellInvisibleCallbackScope",void 0);this.on("cellinvisible",h,l)}var o=f(n,"mask",!0);!0===o&&(o=this.getDefaultMask()),o&&this.setMask(o),this.setScrollMode(f(n,"scrollMode",0)),this.setClampMode(f(n,"clamplTableOXY",!0)),this.table=new d(this,n),this.updateTable()}destroy(t){this.scene&&(this.setCellsCount(0),this.table.destroy(),this.table=void 0,super.destroy(t))}setScrollMode(t){"string"==typeof t&&(t=C[t.toLowerCase()]),this.scrollMode=t}setClampMode(t){return this.clampTableOXYMode=t,this}setCellsCount(t){var e=this.cellsCount;return e===t?this:(e>t?this.removeCell(t,e-t):this.insertNewCell(e,t-e),this)}setColumnCount(t){return this.table.colCount===t?this:(this.table.setColumnCount(t),this.updateFlag=!0,this)}setGridSize(t,e){return this.setCellsCount(t*e),this.table.setColumnCount(t),this}insertNewCell(t,e){return"object"==typeof t&&(t=t.index),void 0===e&&(e=1),e<=0?this:(t=x(t,0,this.cellsCount),this.table.insertNewCell(t,e),t<=this.lastVisibleCellIdx&&(this.updateFlag=!0),this)}removeCell(t,e){if("object"==typeof t&&(t=t.index),void 0===e&&(e=1),t<0&&(e+=t,t=0),e<=0)return this;if(t>this.cellsCount)return this;if(t<=this.lastVisibleCellIdx)for(var i,s=this.preVisibleCells,r=this.visibleCells,n=t,h=t+e;n<h;n++)(i=this.getCell(n,!1))&&(r.contains(i)&&(this.hideCell(i),this.updateFlag=!0,r.delete(i)),s.delete(i));return this.table.removeCell(t,e),this}get tableOY(){return this._tableOY}get tableOX(){return this._tableOX}set tableOY(t){var e=this.table,i=this.topTableOY,s=this.bottomTableOY,r=this.tableOYExceedTop(t),n=this.tableOYExeceedBottom(t);this.clampTableOXYMode&&(e.rowCount<e.heightToRowIndex(this.instHeight,!0)?t=0:r?t=i:n&&(t=s));this._tableOY!==t&&(this.updateFlag=!0,this._tableOY=t),r&&(this.execeedTopState||this.emit("execeedtop",this,t,i)),this.execeedTopState=r,n&&(this.execeedBottomState||this.emit("execeedbottom",this,t,s)),this.execeedBottomState=n}set tableOX(t){var e=this.table,i=this.leftTableOX,s=this.rightTableOX,r=this.tableOXExeceedLeft(t),n=this.tableOXExeceedRight(t);this.clampTableOXYMode&&(e.colCount<e.widthToColIndex(this.instWidth,!0)?t=0:r?t=i:n&&(t=s));this._tableOX!==t&&(this.updateFlag=!0,this._tableOX=t),r&&(this.execeedLeftState||this.emit("execeedleft",this,t,i)),this.execeedLeftState=r,n&&(this.execeedRightState||this.emit("execeedright",this,t,s)),this.execeedRightState=n}setTableOY(t){return this.tableOY=t,this}setTableOX(t){return this.tableOX=t,this}setTableOXY(t,e){return this.tableOX=t,this.tableOY=e,this}addTableOX(t){return this.tableOX+=t,this}addTableOY(t){return this.tableOY+=t,this}addTableOXY(t,e){return this.tableOX+=t,this.tableOY+=e,this}setTableOYByPercentage(t){return t=x(t,0,1),this.setTableOY(-this.tableVisibleHeight*t),this}getTableOYPercentage(){return this.tableOY/-this.tableVisibleHeight}set t(t){this.setTableOYByPercentage(t).updateTable()}get t(){return this.getTableOYPercentage()}updateTable(t){return t&&(this.updateFlag=!0),this.updateFlag?(this.updateFlag=!1,t&&(this.cleanVisibleCellIndexes(),this.hideCells()),this.cleanVisibleCellIndexes(),this.showCells(),this.hideCells(),this):this}getCell(t){return this.table.getCell(t,!0)}get cellsCount(){return this.table.cellsCount}get columnCount(){return this.table.colCount}setCellHeight(t,e){"number"==typeof t&&(this.table.getCell(t,!0).height=e);return this}eachVisibleCell(t,e){return this.visibleCells.each(t,e),this}iterateVisibleCell(t,e){return this.visibleCells.iterate(t,e),this}getDefaultMask(){var t=new c(this);return this.add(t),t.createGeometryMask()}resize(t,e){if(super.resize(t,e),this.updateTable(!0),this.mask){var i=this.mask.hasOwnProperty("geometryMask")?this.mask.geometryMask:this.mask.bitmapMask;i.resize&&i.resize(t,e)}return this}cleanVisibleCellIndexes(){var t=this.preVisibleCells;this.preVisibleCells=this.visibleCells,this.visibleCells=t,this.visibleCells.clear()}showCells(){var t=this.table,e=t.heightToRowIndex(-this.tableOY);e<0&&(e=0);var i=t.widthToColIndex(-this.tableOX);i<0&&(i=0);var s=t.colRowToCellIndex(i,e),r=this.bottomBound,n=this.rightBound,h=t.cellsCount-1,l=t.colCount-1,o=this.getTLX(i),a=o,d=this.getTLY(e);for(this.visibleStartY=null,this.visibleEndY=null,this.visibleStartX=null,this.visibleEndX=null,this.lastVisibleCellIdx=null;d<r&&s<=h;){if(this.table.isValidCellIdx(s)){null===this.visibleStartY&&(this.visibleStartY=e,this.visibleEndY=e),null===this.visibleStartX&&(this.visibleStartX=i,this.visibleEndX=i),null===this.lastVisibleCellIdx&&(this.lastVisibleCellIdx=s),this.visibleEndY<e&&(this.visibleEndY=e),this.visibleEndX<i&&(this.visibleEndX=i),this.lastVisibleCellIdx<s&&(this.lastVisibleCellIdx=s);var u=t.getCell(s,!0);this.visibleCells.set(u),this.preVisibleCells.contains(u)||this.showCell(u),0===this.scrollMode?u.setXY(a,d):u.setXY(d,a)}a<n&&i<l?(a+=t.getColWidth(i),i+=1):(a=o,d+=t.getRowHeight(e),i=this.visibleStartX,e+=1),s=t.colRowToCellIndex(i,e)}}showCell(t){this.emit("cellvisible",t)}hideCells(){var t=this.preVisibleCells,e=this.visibleCells;t.iterate(function(t){e.contains(t)||this.hideCell(t)},this)}hideCell(t){this.emit("cellinvisible",t),t.destroyContainer()}get instHeight(){return 0===this.scrollMode?this.height:this.width}get instWidth(){return 0===this.scrollMode?this.width:this.height}get tableHeight(){return this.table.totalRowsHeight}get tableWidth(){return this.table.totalColumnWidth}get topTableOY(){return 0}get bottomTableOY(){return-this.tableVisibleHeight}get leftTableOX(){return 0}get rightTableOX(){return-this.tableVisibleWidth}tableOYExceedTop(t){return void 0===t&&(t=this.tableOY),t>this.topTableOY}tableOYExeceedBottom(t){return void 0===t&&(t=this.tableOY),t<this.bottomTableOY}tableOXExeceedLeft(t){return void 0===t&&(t=this.tableOX),t>this.leftTableOX}tableOXExeceedRight(t){return void 0===t&&(t=this.tableOX),t<this.rightTableOX}get tableVisibleHeight(){var t=this.tableHeight,e=this.instHeight;return t>e?t-e:0}get tableVisibleWidth(){var t=this.tableWidth,e=this.instWidth;return t>e?t-e:t}get bottomLeftY(){return-this.displayHeight*this.originY+this.displayHeight}get topRightX(){return-this.displayWidth*this.originX+this.displayWidth}get topLeftX(){return-this.displayWidth*this.originX}get topLeftY(){return-this.displayHeight*this.originY}get bottomBound(){return 0===this.scrollMode?this.bottomLeftY:this.topRightX}get rightBound(){return 0===this.scrollMode?this.topRightX:this.bottomLeftY}getTLX(t){var e=0===this.scrollMode?this.topLeftX:this.topLeftY;return this.tableOX+this.table.colIndexToWidth(0,t-1)+e}getTLY(t){var e=0===this.scrollMode?this.topLeftY:this.topLeftX;return this.tableOY+this.table.rowIndexToHeight(0,t-1)+e}}Object.assign(b.prototype,p.GetBounds);const C={v:0,vertical:0,h:1,horizontal:1};e.a=b},42:function(t,e,i){"use strict";const s=Phaser.Utils.Objects.GetValue;var r=function(t,e,i){return void 0===t?{x:e,y:i}:"number"==typeof t?{x:t,y:t}:t},n=class{constructor(t,e,i,s,r){this.cornerRadius={},this._width=0,this._height=0,this.setTo(t,e,i,s,r)}setTo(t,e,i,s,r){return this.setPosition(t,e),this.setRadius(r),this.setSize(i,s),this}setPosition(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x=t,this.y=e,this}setRadius(t){var e,i;void 0===t&&(t=0),"number"==typeof t?(e=t,i=t):(e=s(t,"x",0),i=s(t,"y",0));var n=this.cornerRadius;return n.tl=r(s(t,"tl",void 0),e,i),n.tr=r(s(t,"tr",void 0),e,i),n.bl=r(s(t,"bl",void 0),e,i),n.br=r(s(t,"br",void 0),e,i),this}setSize(t,e){return this.width=t,this.height=e,this}get minWidth(){var t=this.cornerRadius;return Math.max(t.tl.x+t.tr.x,t.bl.x+t.br.x)}get minHeight(){var t=this.cornerRadius;return Math.max(t.tl.y+t.bl.y,t.tr.y+t.br.y)}get width(){return this._width}set width(t){null==t&&(t=0),this._width=Math.max(t,this.minWidth)}get height(){return this._height}set height(t){null==t&&(t=0),this._height=Math.max(t,this.minHeight)}get radius(){var t=this.cornerRadius;return Math.max(t.tl.x,t.tl.y,t.tr.x,t.tr.y,t.bl.x,t.bl.y,t.br.x,t.br.y)}},h=function(t,e,i){var s=i.length;if(s>=2){var r=i[s-2],n=i[s-1];if(t===r&&e===n)return i}return i.push(t,e),i};const l=Phaser.Utils.Objects.GetValue,o=Phaser.Math.DegToRad;var a=function(t,e,i,s,r,n,a,d){var u,c,g,p=l(i,"x",i),v=l(i,"y",i);n&&(r+=360),s=o(s);for(var f=((r=o(r))-s)/a,x=0;x<=a;x++)g=s+f*x,u=t+p*Math.cos(g),c=e+v*Math.sin(g),h(u,c,d);return d},d=i(87),u=i.n(d),c=i(86),g=i.n(c),p=i(85),v=i.n(p),f=function(t,e,i,s,r){var n=this.pipeline,h=n._tempMatrix1,l=n._tempMatrix2,o=n._tempMatrix3;t.setPipeline(n),l.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY),h.copyFrom(s.matrix),r?(h.multiplyWithOffset(r,-s.scrollX*e.scrollFactorX,-s.scrollY*e.scrollFactorY),l.e=e.x,l.f=e.y):(l.e-=s.scrollX*e.scrollFactorX,l.f-=s.scrollY*e.scrollFactorY),h.multiply(l,o);var a=e._displayOriginX,d=e._displayOriginY,u=s.alpha*e.alpha;e.isFilled&&g()(n,o,e,u,a,d),e.isStroked&&v()(n,e,u,a,d)},x=i(84),b=i.n(x),C=i(83),y=i.n(C);const m=Phaser.Renderer.Canvas.SetTransform;var w=function(t,e,i,s,r){var n=t.currentContext;if(m(t,n,e,s,r)){var h=e._displayOriginX,l=e._displayOriginY,o=e.pathData,a=o.length-1,d=o[0]-h,u=o[1]-l;n.beginPath(),n.moveTo(d,u),e.closePath||(a-=2);for(var c=2;c<a;c+=2){var g=o[c]-h,p=o[c+1]-l;n.lineTo(g,p)}n.closePath(),e.isFilled&&(b()(n,e),n.fill()),e.isStroked&&(y()(n,e),n.stroke())}},P=i(3),O=(P.a,P.a,{renderWebGL:f,renderCanvas:w});const S=Phaser.Utils.Objects.GetValue;class M extends Phaser.GameObjects.Shape{constructor(t,e,i,s,r,h,l,o){void 0===e&&(e=0),void 0===i&&(i=0);var a=S(h,"iteration",void 0);h=S(h,"radius",h),super(t,"RoundRectangle",new n(0,0,s,r,h)),this.setIteration(a),this.setPosition(e,i),void 0!==l&&this.setFillStyle(l,o),this.updateDisplayOrigin(),this.updateData()}updateData(){var t=this.geom,e=this.pathData;e.length=0;var i,s=t.cornerRadius,r=this.iteration+1;if(i=s.br,T(i)){var n=t.width-i.x,l=t.height-i.y;a(n,l,i,0,90,!1,r,e)}else h(t.width,t.height,e);if(i=s.bl,T(i)){n=i.x,l=t.height-i.y;a(n,l,i,90,180,!1,r,e)}else h(0,t.height,e);if(i=s.tl,T(i)){n=i.x,l=i.y;a(n,l,i,180,270,!1,r,e)}else h(0,0,e);if(i=s.tr,T(i)){n=t.width-i.x,l=i.y;a(n,l,i,270,360,!1,r,e)}else h(t.width,0,e);return e.push(e[0],e[1]),this.pathIndexes=u()(e),this}get width(){return this.geom.width}set width(t){this.width!==t&&(this.geom.width=t,this.updateDisplayOrigin(),this.updateData())}get height(){return this.geom.height}set height(t){this.height!==t&&(this.geom.height=t,this.updateDisplayOrigin(),this.updateData())}resize(t,e){return void 0===e&&(e=t),this.geom.width===t&&this.geom.height===e?this:(this.geom.height=e,this.geom.width=t,this.updateDisplayOrigin(),this.updateData(),this)}get iteration(){return this._iteration}set iteration(t){void 0!==this._iteration?this._iteration!==t&&(this._iteration=t,this.updateData()):this._iteration=t}setIteration(t){return void 0===t&&(t=6),this.iteration=t,this}get radius(){return this.geom.radius}set radius(t){this.geom.setRadius(t),this.updateDisplayOrigin(),this.updateData()}setRadius(t){return void 0===t&&(t=0),this.radius=t,this}get cornerRadius(){return this.geom.cornerRadius}set cornerRadius(t){this.radius=t}setCornerRadius(t){return this.setRadius(t)}}var T=function(t){return 0!==t.x&&0!==t.y};Object.assign(M.prototype,O);e.a=M},7:function(t,e,i){"use strict";var s=function(t){return null==t||""===t||0===t.length};e.a=function(t,e,i){if("object"==typeof t)if(s(e)){if(null==i)return;"object"==typeof i&&(t=i)}else{"string"==typeof e&&(e=e.split("."));var r=e.pop();((function(t,e,i){void 0===i&&(i={});var r=t;if(s(e));else{var n;"string"==typeof e&&(e=e.split("."));for(var h=0,l=e.length;h<l;h++){var o;null!=r[n=e[h]]&&"object"==typeof r[n]||(o=h===l-1?i:{},r[n]=o),r=r[n]}}return r})(t,e))[r]=i}}},83:function(t,e){t.exports=function(t,e){var i=e.strokeColor,s=e.strokeAlpha,r=(16711680&i)>>>16,n=(65280&i)>>>8,h=255&i;t.strokeStyle="rgba("+r+","+n+","+h+","+s+")",t.lineWidth=e.lineWidth}},84:function(t,e){t.exports=function(t,e,i){var s=i||e.fillColor,r=e.fillAlpha,n=(16711680&s)>>>16,h=(65280&s)>>>8,l=255&s;t.fillStyle="rgba("+n+","+h+","+l+","+r+")"}},85:function(t,e){const i=Phaser.Renderer.WebGL.Utils;t.exports=function(t,e,s,r,n){var h=t.strokeTint,l=i.getTintAppendFloatAlphaAndSwap(e.strokeColor,e.strokeAlpha*s);h.TL=l,h.TR=l,h.BL=l,h.BR=l;var o=e.pathData,a=o.length-1,d=e.lineWidth,u=d/2,c=o[0]-r,g=o[1]-n;e.closePath||(a-=2);for(var p=2;p<a;p+=2){var v=o[p]-r,f=o[p+1]-n;t.setTexture2D(),t.batchLine(c,g,v,f,u,u,d,p-2,!!e.closePath&&p===a-1),c=v,g=f}}},86:function(t,e){const i=Phaser.Renderer.WebGL.Utils;t.exports=function(t,e,s,r,n,h){for(var l=i.getTintAppendFloatAlphaAndSwap(s.fillColor,s.fillAlpha*r),o=s.pathData,a=s.pathIndexes,d=0;d<a.length;d+=3){var u=2*a[d],c=2*a[d+1],g=2*a[d+2],p=o[u+0]-n,v=o[u+1]-h,f=o[c+0]-n,x=o[c+1]-h,b=o[g+0]-n,C=o[g+1]-h,y=e.getX(p,v),m=e.getY(p,v),w=e.getX(f,x),P=e.getY(f,x),O=e.getX(b,C),S=e.getY(b,C);t.setTexture2D(),t.batchTri(y,m,w,P,O,S,0,0,1,1,l,l,l,t.tintEffect)}}},87:function(t,e,i){"use strict";function s(t,e,i){i=i||2;var s,l,o,a,d,g,v,f=e&&e.length,x=f?e[0]*i:t.length,b=r(t,0,x,i,!0),C=[];if(!b)return C;if(f&&(b=function(t,e,i,s){var h,l,o,a,d,g=[];for(h=0,l=e.length;h<l;h++)o=e[h]*s,a=h<l-1?e[h+1]*s:t.length,(d=r(t,o,a,s,!1))===d.next&&(d.steiner=!0),g.push(p(d));for(g.sort(u),h=0;h<g.length;h++)c(g[h],i),i=n(i,i.next);return i}(t,e,b,i)),t.length>80*i){s=o=t[0],l=a=t[1];for(var y=i;y<x;y+=i)d=t[y],g=t[y+1],d<s&&(s=d),g<l&&(l=g),d>o&&(o=d),g>a&&(a=g);v=Math.max(o-s,a-l)}return h(b,C,i,s,l,v),C}function r(t,e,i,s,r){var n,h;if(r===S(t,e,i,s)>0)for(n=e;n<i;n+=s)h=w(n,t[n],t[n+1],h);else for(n=i-s;n>=e;n-=s)h=w(n,t[n],t[n+1],h);return h&&b(h,h.next)&&(P(h),h=h.next),h}function n(t,e){if(!t)return t;e||(e=t);var i,s=t;do{if(i=!1,s.steiner||!b(s,s.next)&&0!==x(s.prev,s,s.next))s=s.next;else{if(P(s),(s=e=s.prev)===s.next)return null;i=!0}}while(i||s!==e);return e}function h(t,e,i,s,r,u,c){if(t){!c&&u&&function(t,e,i,s){var r=t;do{null===r.z&&(r.z=g(r.x,r.y,e,i,s)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,function(t){var e,i,s,r,n,h,l,o,a=1;do{for(i=t,t=null,n=null,h=0;i;){for(h++,s=i,l=0,e=0;e<a&&(l++,s=s.nextZ);e++);for(o=a;l>0||o>0&&s;)0!==l&&(0===o||!s||i.z<=s.z)?(r=i,i=i.nextZ,l--):(r=s,s=s.nextZ,o--),n?n.nextZ=r:t=r,r.prevZ=n,n=r;i=s}n.nextZ=null,a*=2}while(h>1)}(r)}(t,s,r,u);for(var p,v,f=t;t.prev!==t.next;)if(p=t.prev,v=t.next,u?o(t,s,r,u):l(t))e.push(p.i/i),e.push(t.i/i),e.push(v.i/i),P(t),t=v.next,f=v.next;else if((t=v)===f){c?1===c?h(t=a(t,e,i),e,i,s,r,u,2):2===c&&d(t,e,i,s,r,u):h(n(t),e,i,s,r,u,1);break}}}function l(t){var e=t.prev,i=t,s=t.next;if(x(e,i,s)>=0)return!1;for(var r=t.next.next;r!==t.prev;){if(v(e.x,e.y,i.x,i.y,s.x,s.y,r.x,r.y)&&x(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function o(t,e,i,s){var r=t.prev,n=t,h=t.next;if(x(r,n,h)>=0)return!1;for(var l=r.x<n.x?r.x<h.x?r.x:h.x:n.x<h.x?n.x:h.x,o=r.y<n.y?r.y<h.y?r.y:h.y:n.y<h.y?n.y:h.y,a=r.x>n.x?r.x>h.x?r.x:h.x:n.x>h.x?n.x:h.x,d=r.y>n.y?r.y>h.y?r.y:h.y:n.y>h.y?n.y:h.y,u=g(l,o,e,i,s),c=g(a,d,e,i,s),p=t.nextZ;p&&p.z<=c;){if(p!==t.prev&&p!==t.next&&v(r.x,r.y,n.x,n.y,h.x,h.y,p.x,p.y)&&x(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(p=t.prevZ;p&&p.z>=u;){if(p!==t.prev&&p!==t.next&&v(r.x,r.y,n.x,n.y,h.x,h.y,p.x,p.y)&&x(p.prev,p,p.next)>=0)return!1;p=p.prevZ}return!0}function a(t,e,i){var s=t;do{var r=s.prev,n=s.next.next;!b(r,n)&&C(r,s,s.next,n)&&y(r,n)&&y(n,r)&&(e.push(r.i/i),e.push(s.i/i),e.push(n.i/i),P(s),P(s.next),s=t=n),s=s.next}while(s!==t);return s}function d(t,e,i,s,r,l){var o=t;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&f(o,a)){var d=m(o,a);return o=n(o,o.next),d=n(d,d.next),h(o,e,i,s,r,l),void h(d,e,i,s,r,l)}a=a.next}o=o.next}while(o!==t)}function u(t,e){return t.x-e.x}function c(t,e){if(e=function(t,e){var i,s=e,r=t.x,n=t.y,h=-1/0;do{if(n<=s.y&&n>=s.next.y&&s.next.y!==s.y){var l=s.x+(n-s.y)*(s.next.x-s.x)/(s.next.y-s.y);if(l<=r&&l>h){if(h=l,l===r){if(n===s.y)return s;if(n===s.next.y)return s.next}i=s.x<s.next.x?s:s.next}}s=s.next}while(s!==e);if(!i)return null;if(r===h)return i.prev;var o,a=i,d=i.x,u=i.y,c=1/0;s=i.next;for(;s!==a;)r>=s.x&&s.x>=d&&r!==s.x&&v(n<u?r:h,n,d,u,n<u?h:r,n,s.x,s.y)&&((o=Math.abs(n-s.y)/(r-s.x))<c||o===c&&s.x>i.x)&&y(s,t)&&(i=s,c=o),s=s.next;return i}(t,e)){var i=m(e,t);n(i,i.next)}}function g(t,e,i,s,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)/r)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-s)/r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function p(t){var e=t,i=t;do{e.x<i.x&&(i=e),e=e.next}while(e!==t);return i}function v(t,e,i,s,r,n,h,l){return(r-h)*(e-l)-(t-h)*(n-l)>=0&&(t-h)*(s-l)-(i-h)*(e-l)>=0&&(i-h)*(n-l)-(r-h)*(s-l)>=0}function f(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&C(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}(t,e)&&y(t,e)&&y(e,t)&&function(t,e){var i=t,s=!1,r=(t.x+e.x)/2,n=(t.y+e.y)/2;do{i.y>n!=i.next.y>n&&i.next.y!==i.y&&r<(i.next.x-i.x)*(n-i.y)/(i.next.y-i.y)+i.x&&(s=!s),i=i.next}while(i!==t);return s}(t,e)}function x(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function b(t,e){return t.x===e.x&&t.y===e.y}function C(t,e,i,s){return!!(b(t,e)&&b(i,s)||b(t,s)&&b(i,e))||x(t,e,i)>0!=x(t,e,s)>0&&x(i,s,t)>0!=x(i,s,e)>0}function y(t,e){return x(t.prev,t,t.next)<0?x(t,e,t.next)>=0&&x(t,t.prev,e)>=0:x(t,e,t.prev)<0||x(t,t.next,e)<0}function m(t,e){var i=new O(t.i,t.x,t.y),s=new O(e.i,e.x,e.y),r=t.next,n=e.prev;return t.next=e,e.prev=t,i.next=r,r.prev=i,s.next=i,i.prev=s,n.next=s,s.prev=n,s}function w(t,e,i,s){var r=new O(t,e,i);return s?(r.next=s.next,r.prev=s,s.next.prev=r,s.next=r):(r.prev=r,r.next=r),r}function P(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function O(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function S(t,e,i,s){for(var r=0,n=e,h=i-s;n<i;n+=s)r+=(t[h]-t[n])*(t[n+1]+t[h+1]),h=n;return r}t.exports=s,s.deviation=function(t,e,i,s){var r=e&&e.length,n=r?e[0]*i:t.length,h=Math.abs(S(t,0,n,i));if(r)for(var l=0,o=e.length;l<o;l++){var a=e[l]*i,d=l<o-1?e[l+1]*i:t.length;h-=Math.abs(S(t,a,d,i))}var u=0;for(l=0;l<s.length;l+=3){var c=s[l]*i,g=s[l+1]*i,p=s[l+2]*i;u+=Math.abs((t[c]-t[p])*(t[g+1]-t[c+1])-(t[c]-t[g])*(t[p+1]-t[c+1]))}return 0===h&&0===u?0:Math.abs((u-h)/h)},s.flatten=function(t){for(var e=t[0][0].length,i={vertices:[],holes:[],dimensions:e},s=0,r=0;r<t.length;r++){for(var n=0;n<t[r].length;n++)for(var h=0;h<e;h++)i.vertices.push(t[r][n][h]);r>0&&(s+=t[r-1].length,i.holes.push(s))}return i}},9:function(t,e,i){"use strict";e.a=class{constructor(){this.items=[]}pop(){return this.items.length>0?this.items.pop():null}push(t){this.items.push(t)}pushMultiple(t){for(var e=0,i=t.length;e<i;e++)this.items.push(t[e]);t.length=0}}}}).default});