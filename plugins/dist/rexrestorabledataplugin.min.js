!function(e,s){"object"==typeof exports&&"object"==typeof module?module.exports=s():"function"==typeof define&&define.amd?define([],s):"object"==typeof exports?exports.rexrestorabledataplugin=s():e.rexrestorabledataplugin=s()}(window,function(){return function(e){var s={};function t(i){if(s[i])return s[i].exports;var r=s[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}return t.m=e,t.c=s,t.d=function(e,s,i){t.o(e,s)||Object.defineProperty(e,s,{enumerable:!0,get:i})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,s){if(1&s&&(e=t(e)),8&s)return e;if(4&s&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(t.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&s&&"string"!=typeof e)for(var r in e)t.d(i,r,function(s){return e[s]}.bind(null,r));return i},t.n=function(e){var s=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(s,"a",s),s},t.o=function(e,s){return Object.prototype.hasOwnProperty.call(e,s)},t.p="",t(t.s=154)}({119:function(e,s,t){"use strict";var i=t(3);const r=Phaser.Data.DataManager,n=Phaser.Utils.Objects.GetValue;var o=class extends r{constructor(e,s,t){super(e,s),this._recordEnable=!0,this.resetFromJSON(t),this.events.on("changedata",this.onValueChange,this).on("setdata",function(e,s,t){this.onValueChange(e,s,t,null)},this).on("removedata",function(e,s,t){this.onValueChange(e,s,null,t)},this)}resetFromJSON(e){this._version=n(e,"version",0),this.versionAlias=n(e,"versionAlias",""),this._changeList=n(e,"changeList",{}),this._repository=n(e,"repository",[]),this._versionAliases=n(e,"versionAliases",{});var s=n(e,"data",void 0);if(s)this._recordEnable=!1,this.set(s),this._recordEnable=!0;else{var t=""!==this.versionAlias?this.versionAlias:this._version;this._version=0,this.restore(t)}}toJSON(e){void 0===e&&(e=!1);var s={version:this._version,versionAlias:this.versionAlias,changeList:this._changeList,repository:this._repository,versionAliases:this._versionAliases};return e&&(s.data=this.list),s}get version(){return this._version}set version(e){var s;if("string"==typeof e&&(s=e,e=this._versionAliases[e]),"number"==typeof e){if(this.versionAlias=s||"",0===e)return this._recordEnable=!1,super.reset(),this._version=0,Object(i.a)(this._changeList),void(this._recordEnable=!0);e=Math.min(e,this._repository.length);var t,r={};for(var n in this._changeList)r[n]=this._changeList[n][1],delete this._changeList[n];if(this._version===e);else if(this._version<e)for(var o=this._version;o<e;o++)for(var n in t=this._repository[o])r[n]=t[n][0];else for(o=this._version-1;o>=e;o--)for(var n in t=this._repository[o])r[n]=t[n][1];for(var n in this._version=e,this._recordEnable=!1,r)null===(e=r[n])?this.removeValue(n):this.setValue(n,e);this._recordEnable=!0}else this.versionAlias=""}get lastVersion(){return this._repository.length}get versionAliases(){var e=[];for(var s in this._versionAliases)e.push(s);return e}commit(e){for(var s in this._repository.length=this._version,this._versionAliases)this._versionAliases[s]>this._version&&delete this._versionAliases[s];return this._repository.push(this._changeList),this._changeList={},this._version++,"string"==typeof e&&(this.versionAlias=e,this._versionAliases[e]=this._version),this}restore(e,s){return void 0===e&&(e=""!==this.versionAlias?this.versionAlias:this._version),void 0===s&&(s=!1),s&&(this.version=0),this.version=e,this}reset(){return this.version=0,this._repository.length=0,Object(i.a)(this._versionAliases),this}onValueChange(e,s,t,i){this._recordEnable&&(this._changeList.hasOwnProperty(s)?this._changeList[s][0]=t:this._changeList[s]=[t,i])}};s.a=o},154:function(e,s,t){"use strict";t.r(s);var i=t(119);s.default=class extends Phaser.Plugins.BasePlugin{constructor(e){super(e)}start(){this.game.events.once("destroy",this.destroy,this)}add(e,s){return new i.a(e,s)}}},3:function(e,s,t){"use strict";s.a=function(e){if(Array.isArray(e))e.length=0;else for(var s in e)delete e[s]}}}).default});