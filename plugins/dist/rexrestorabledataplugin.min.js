!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.rexrestorabledataplugin=e():t.rexrestorabledataplugin=e()}(window,function(){return function(t){var e={};function r(i){if(e[i])return e[i].exports;var s=e[i]={i:i,l:!1,exports:{}};return t[i].call(s.exports,s,s.exports,r),s.l=!0,s.exports}return r.m=t,r.c=e,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)r.d(i,s,function(e){return t[e]}.bind(null,s));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=144)}({144:function(t,e,r){"use strict";r.r(e);const i=Phaser.Data.DataManager;var s=class extends i{constructor(t,e){super(t,e),this._version=0,this.changeList={},this.repository=[],this.rollbackFlag=!1,this.events.on("setdata",this.onValueChange,this),this.events.on("changedata",this.onValueChange,this)}get version(){return this._version}set version(t){if(0!==this.repository.length&&(t=Math.min(t,this.repository.length),this._version!==t)){var e,r={};if(this._version<t){for(var i in this.changeList)r[i]=this.changeList[i][0],delete this.changeList[i];for(var s=this._version;s<t;s++)for(var i in e=this.repository[s])r[i]=e[i][0]}else{for(var i in this.changeList)r[i]=this.changeList[i][1],delete this.changeList[i];for(s=this._version-1;s>=t;s--)for(var i in e=this.repository[s])r[i]=e[i][1]}for(var i in this._version=t,this.rollbackFlag=!0,r)void 0===(t=r[i])?this.removeValue(i):this.setValue(i,t);this.rollbackFlag=!1}}get lastVersion(){return this.repository.length}commit(){return this.repository.length=this._version,this.repository.push(this.changeList),this.changeList={},this._version++,this}restore(t){return this.version=t,this}onValueChange(t,e,r,i){this.rollbackFlag||(this.changeList.hasOwnProperty(e)?this.changeList[e][0]=r:this.changeList[e]=[r,i])}};e.default=class extends Phaser.Plugins.BasePlugin{constructor(t){super(t)}start(){this.game.events.once("destroy",this.destroy,this)}add(t,e){return new s(t,e)}}}}).default});